{
    "pipes": [
        {
            "name": "FilterPipe",
            "id": "pipe-FilterPipe-8f5563592e7848d0396a44a3dda709a8e66fefdb2e77e96acc0bcbae4a88fa007a169340a75b319f0129d2b18822fc641728616cf347437555f3e55217e9c469",
            "file": "src/app/utils/pipes/filter-pipe.ts",
            "type": "pipe",
            "deprecated": false,
            "deprecationMessage": "",
            "description": "",
            "rawdescription": "\n",
            "properties": [],
            "methods": [
                {
                    "name": "transform",
                    "args": [
                        {
                            "name": "items",
                            "type": "any[]",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "filter",
                            "type": "function",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "function": [
                                {
                                    "name": "item",
                                    "type": "any",
                                    "optional": false,
                                    "dotDotDotToken": false,
                                    "deprecated": false,
                                    "deprecationMessage": ""
                                }
                            ]
                        }
                    ],
                    "optional": false,
                    "returnType": "any[]",
                    "typeParameters": [],
                    "line": 8,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "items",
                            "type": "any[]",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "filter",
                            "type": "function",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "function": [
                                {
                                    "name": "item",
                                    "type": "any",
                                    "optional": false,
                                    "dotDotDotToken": false,
                                    "deprecated": false,
                                    "deprecationMessage": ""
                                }
                            ],
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                }
            ],
            "standalone": true,
            "ngname": "filter",
            "sourceCode": "import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'filter',\n  standalone: true\n})\nexport class FilterPipe implements PipeTransform {\n  transform(items: any[], filter: (item: any) => boolean): any[] {\n    if (!items || !filter) {\n      return items;\n    }\n    return items.filter(filter);\n  }\n}"
        }
    ],
    "interfaces": [
        {
            "name": "Artist",
            "id": "interface-Artist-9f39bcaa8c1c04fb512f1ec3eecfdbce95458070d7e93e9ebb3f817179de2ee599eb51d502841ac695ce4a8cc7833d554d3e1c248629c52282f32788bff1ff64",
            "file": "src/app/tab-ranking/ranking.page.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "import { Component, OnInit } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { addIcons } from 'ionicons';\nimport { starOutline, cash, search } from 'ionicons/icons';\nimport { \n  IonContent, \n  IonHeader, \n  IonToolbar, \n  IonButton,\n  IonIcon,\n  IonCard,\n  IonCardContent\n} from '@ionic/angular/standalone';\n\ninterface Artist {\n  id: number;\n  name: string;\n  category: string;\n  votes: number;\n  imageUrl: string;\n  rank?: number;\n  isFavorite?: boolean;\n}\n\n@Component({\n  selector: 'app-ranking',\n  templateUrl: './ranking.page.html',\n  styleUrls: ['./ranking.page.scss'],\n  standalone: true,\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonHeader,\n    IonToolbar,\n    IonContent,\n    IonButton,\n    IonIcon,\n    IonCard,\n    IonCardContent  ]\n})\nexport class RankingPage implements OnInit {\n  selectedTab: 'votes' | 'dons' = 'votes';\n  \n  topArtists: Artist[] = [\n    {\n      id: 1,\n      name: 'Sophie Martin',\n      category: 'Sculpture',\n      votes: 15420,\n      imageUrl: 'https://images.unsplash.com/photo-1547826039-bfc35e0f1ea8?w=300&h=400&fit=crop',\n      rank: 1\n    },\n    {\n      id: 2,\n      name: 'Jean Dubois',\n      category: 'Peinture',\n      votes: 12350,\n      imageUrl: 'https://images.unsplash.com/photo-1460661419201-fd4cecdf8a8b?w=300&h=400&fit=crop',\n      rank: 2\n    },\n    {\n      id: 3,\n      name: 'Marie Leclerc',\n      category: 'Photographie',\n      votes: 10890,\n      imageUrl: 'https://images.unsplash.com/photo-1518717758536-85ae29035b6d?w=300&h=400&fit=crop',\n      rank: 3\n    },\n    {\n      id: 4,\n      name: 'Pierre Laurent',\n      category: 'Design',\n      votes: 9560,\n      imageUrl: 'https://images.unsplash.com/photo-1536924940846-227afb31e2a5?w=300&h=400&fit=crop',\n      rank: 4\n    },\n    {\n      id: 5,\n      name: 'Claire Bonnet',\n      category: 'Illustration',\n      votes: 8720,\n      imageUrl: 'https://images.unsplash.com/photo-1460661419201-fd4cecdf8a8b?w=300&h=400&fit=crop',\n      rank: 5\n    },\n    {\n      id: 6,\n      name: 'Thomas Roux',\n      category: 'Art Numérique',\n      votes: 7890,\n      imageUrl: 'https://images.unsplash.com/photo-1470225620780-dba8ba36b745?w=300&h=400&fit=crop',\n      rank: 6\n    }\n  ];\n\n  allArtists: Artist[] = [\n    ...this.topArtists,\n    {\n      id: 7,\n      name: 'Emma Lefebvre',\n      category: 'Céramique',\n      votes: 6540,\n      imageUrl: 'https://images.unsplash.com/photo-1611162617474-5b21e879e113?w=100&h=100&fit=crop',\n      isFavorite: true\n    },\n    {\n      id: 8,\n      name: 'Lucas Moreau',\n      category: 'Street Art',\n      votes: 5890,\n      imageUrl: 'https://images.unsplash.com/photo-1460661419201-fd4cecdf8a8b?w=100&h=100&fit=crop',\n      isFavorite: false\n    }\n  ];\n\n  constructor() {addIcons({ starOutline, cash, search });}\n\n  ngOnInit() {}\n\n  selectTab(tab: 'votes' | 'dons') {\n    this.selectedTab = tab;\n  }\n\n  formatVotes(votes: number): string {\n    return votes.toLocaleString('fr-FR');\n  }\n\n  toggleFavorite(artist: Artist) {\n    artist.isFavorite = !artist.isFavorite;\n  }\n}",
            "properties": [
                {
                    "name": "category",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 19
                },
                {
                    "name": "id",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 17
                },
                {
                    "name": "imageUrl",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 21
                },
                {
                    "name": "isFavorite",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 23
                },
                {
                    "name": "name",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 18
                },
                {
                    "name": "rank",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 22
                },
                {
                    "name": "votes",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 20
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "methods": [],
            "extends": []
        },
        {
            "name": "Challenge",
            "id": "interface-Challenge-b8e6fc4fb29fc8989f7bb6bae6f3018b0bd51d26b7fb0f3b8ee7bd17652e8eeb0e3ab37ae3c29ba40f06d1c0b2959f0d1ea6d2ec07cb82188f4f9325733c1a07",
            "file": "src/models/Challenge.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "export interface Challenge {\n  id: string;\n  name: string;\n  description: string;\n  creator_id: string;\n  duration_days: number;\n  vote_rule: 'one_vote_per_user' | 'unlimited_votes' | string; // Vous pouvez étendre avec d'autres règles si nécessaire\n  call_to_action : 'Participer' | 'Voter' | 'Soutenir' | 'Voter l\\'artiste' | 'J\\'approuve' | 'Soutenir ce talent';\n  created_at?: Date; // Optionnel : date de création\n  start_date?: Date; // Optionnel : date de début\n  end_date?: Date; // Optionnel : date de fin\n  is_active?: boolean; // Optionnel : statut actif/inactif\n  cover_image_url?: string; // Optionnel : URL de l'image de couverture\n  prize?: string; // Optionnel : description du prix\n  rules?: string[]; // Optionnel : liste des règles du défi\n  participants_count?: number; // Optionnel : nombre de participants\n  entries_count?: number; // Optionnel : nombre de participations\n}\n\n// Exemple d'énumération pour les règles de vote\nexport enum VoteRule {\n  ONE_VOTE_PER_USER = 'one_vote_per_user',\n  UNLIMITED_VOTES = 'unlimited_votes',\n  // Ajoutez d'autres règles au besoin\n}",
            "properties": [
                {
                    "name": "call_to_action",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "\"Participer\" | \"Voter\" | \"Soutenir\" | \"Voter l'artiste\" | \"J'approuve\" | \"Soutenir ce talent\"",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 8
                },
                {
                    "name": "cover_image_url",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 13
                },
                {
                    "name": "created_at",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "Date",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 9
                },
                {
                    "name": "creator_id",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 5
                },
                {
                    "name": "description",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 4
                },
                {
                    "name": "duration_days",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 6
                },
                {
                    "name": "end_date",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "Date",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 11
                },
                {
                    "name": "entries_count",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 17
                },
                {
                    "name": "id",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 2
                },
                {
                    "name": "is_active",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 12
                },
                {
                    "name": "name",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 3
                },
                {
                    "name": "participants_count",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 16
                },
                {
                    "name": "prize",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 14
                },
                {
                    "name": "rules",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string[]",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 15
                },
                {
                    "name": "start_date",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "Date",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 10
                },
                {
                    "name": "vote_rule",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "\"one_vote_per_user\" | \"unlimited_votes\" | string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 7
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "methods": [],
            "extends": []
        },
        {
            "name": "Comment",
            "id": "interface-Comment-f3894263248c47cbb9ad76da163321adbe23320c908382132161106a4fdcbaf9e94e22f85a0ba8476256854aad251c9164622c60197a1bb953889e18b4a073d4",
            "file": "src/models/Comment.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "export interface Comment {\n  id?: string;                // ID unique du commentaire\n  contentId: string;          // ID du contenu associé\n  userId: string;             // ID de l'auteur du commentaire\n  userAvatar?: string;        // URL de l'avatar de l'auteur\n  username: string;           // Nom d'utilisateur de l'auteur\n  text: string;               // Texte du commentaire\n  createdAt: string;          // Date de création (ISO string)\n  updatedAt?: string;         // Date de mise à jour (ISO string)\n  likes: number;              // Nombre de likes du commentaire\n  likedBy?: string[];  // Nouveau tableau pour suivre qui a aimé\n  isLiked?: boolean;          // Si l'utilisateur actuel a aimé ce commentaire\n  parentId?: string;          // ID du commentaire parent (pour les réponses)\n  replies?: string[];         // IDs des réponses à ce commentaire\n}",
            "properties": [
                {
                    "name": "contentId",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 4
                },
                {
                    "name": "createdAt",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 9
                },
                {
                    "name": "id",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 3
                },
                {
                    "name": "isLiked",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 13
                },
                {
                    "name": "likedBy",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string[]",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 12
                },
                {
                    "name": "likes",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 11
                },
                {
                    "name": "parentId",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 14
                },
                {
                    "name": "replies",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string[]",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 15
                },
                {
                    "name": "text",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 8
                },
                {
                    "name": "updatedAt",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 10
                },
                {
                    "name": "userAvatar",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 6
                },
                {
                    "name": "userId",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 5
                },
                {
                    "name": "username",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 7
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "methods": [],
            "extends": []
        },
        {
            "name": "Comment",
            "id": "interface-Comment-bfe032a939991abada90b2700409eb8dcbc22800a3ca2291eb5faf650c3b00a06f23aa80ccef2c566475c07613d6a6caa0e820906ed2441bed71842eba5a792b-1",
            "file": "src/app/content-detail/content-detail.page.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "import { Component, ElementRef, OnInit, ViewChild } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { IonContent, IonHeader, IonTitle, IonToolbar, IonButtons, IonBackButton, IonSpinner, IonIcon, IonAvatar, IonButton, IonFooter } from '@ionic/angular/standalone';\nimport { Content } from 'src/models/Content';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { CreationService } from 'src/services/CREATION/creation-service';\nimport { Auth, AuthUser } from 'src/services/AUTH/auth';\nimport { User } from 'src/models/User';\ninterface Comment {\n  id?: string;\n  text: string;\n  userId: string;\n  user: {\n    id: string;\n    username: string;\n    avatar?: string;\n  };\n  timestamp: Date;\n  likes: number;\n}\n@Component({\n  selector: 'app-content-detail',\n  templateUrl: './content-detail.page.html',\n  styleUrls: ['./content-detail.page.scss'],\n  standalone: true,\n  imports: [IonFooter, IonButton, IonAvatar, IonIcon, IonSpinner, IonBackButton, IonButtons, IonContent, IonHeader, IonTitle, IonToolbar, CommonModule, FormsModule]\n})\nexport class ContentDetailPage implements OnInit {\n  @ViewChild('commentInput') commentInput!: ElementRef<HTMLIonInputElement>;\n  @ViewChild('commentsSection') commentsSection!: ElementRef<HTMLDivElement>;\n\n  content: Content | null = null;\n  isLoading = true;\n  error: string | null = null;\n  isLiked = false;\n  isSaved = false;\n  newComment = '';\n  comments: Comment[] = [];\n  currentUser: AuthUser | null = null;\n\n  constructor(\n    private route: ActivatedRoute,\n    private router: Router,\n    private creationService: CreationService,\n    private authService: Auth\n  ) {}\n\n  ngOnInit() {\n    this.currentUser = this.authService.getCurrentUser();\n    const contentId = this.route.snapshot.paramMap.get('id');\n    if (contentId) {\n      this.loadContent(contentId);\n      this.loadComments(contentId);\n    } else {\n      this.error = 'Aucun contenu spécifié';\n      this.isLoading = false;\n    }\n  }\n\n  getFullFileUrl(relativePath: string): string {\n    const apiUrl = 'http://localhost:3000'; \n    const cleanPath = relativePath.startsWith('/') ? relativePath.substring(1) : relativePath;\n    return `${apiUrl}/${cleanPath}`;\n  }\n\n  private loadContent(id: string) {\n    this.isLoading = true;\n    this.creationService.getContentById(id).subscribe({\n      next: (content) => {\n        this.content = content;\n        this.isLoading = false;\n        // Vérifier si l'utilisateur actuel a aimé ce contenu\n        if (content.likeCount && this.currentUser) {\n          this.isLiked = false; //content.likeCount.some(like => like.userId === this.currentUser?.id);\n        }\n      },\n      error: (err) => {\n        console.error('Erreur lors du chargement du contenu:', err);\n        this.error = 'Impossible de charger le contenu';\n        this.isLoading = false;\n      }\n    });\n  }\n\n  private loadComments(contentId: string) {\n    // Implémentez le chargement des commentaires depuis votre service\n    // Exemple:\n    // this.creationService.getComments(contentId).subscribe(comments => {\n    //   this.comments = comments;\n    // });\n  }\n\n  toggleLike() {\n    if (!this.content || !this.currentUser) return;\n\n    this.isLiked = !this.isLiked;\n    \n    if (this.isLiked) {\n      // Ajouter un like\n      if (this.content.likeCount !== undefined) {\n        this.content.likeCount++;\n      }\n      // this.creationService.likeContent(this.content.id).subscribe();\n    } else {\n      // Retirer le like\n      if (this.content.likeCount && this.content.likeCount > 0) {\n        this.content.likeCount--;\n      }\n      // this.creationService.unlikeContent(this.content.id).subscribe();\n    }\n  }\n\n  toggleSave() {\n    this.isSaved = !this.isSaved;\n    // Implémentez la logique de sauvegarde\n  }\n\n  focusCommentInput() {\n    setTimeout(() => {\n      this.commentInput.nativeElement.setFocus();\n    }, 100);\n  }\n\n  addComment() {\n    if (!this.newComment.trim() || !this.content || !this.currentUser) return;\n\n    const newComment: Comment = {\n      id: Date.now().toString(),\n      userId: this.currentUser.id as string,\n      user: {\n        id: this.currentUser.id as string,\n        username: this.currentUser.email || 'Utilisateur',\n        avatar: this.currentUser.user_type\n      },\n      text: this.newComment,\n      timestamp: new Date(),\n      likes: 0\n    };\n\n    this.comments.push(newComment);\n    this.newComment = '';\n\n    // Faire défiler vers le bas pour voir le nouveau commentaire\n    setTimeout(() => {\n      this.commentsSection.nativeElement.scrollTop = this.commentsSection.nativeElement.scrollHeight;\n    }, 100);\n\n    // Envoyer le commentaire au serveur\n    // this.creationService.addComment(this.content.id, newComment).subscribe();\n  }\n\n  likeComment(commentId: string) {\n    // Implémentez la logique pour aimer un commentaire\n    //const comment = this.comments.find(c => c.id === commentId);\n    //if (comment) {\n      //comment.likeCount++;\n      // this.creationService.likeComment(commentId).subscribe();\n    //}\n  }\n\n  scrollToComments() {\n    this.commentsSection.nativeElement.scrollIntoView({ behavior: 'smooth' });\n  }\n\n  toggleMedia() {\n    // Implémentez la logique pour afficher le média en plein écran\n  }\n\n  sharePost() {\n    // Implémentez la logique de partage\n    if (this.content) {\n      const shareData = {\n        title: this.content.title,\n        text: this.content.description,\n        url: window.location.href\n      };\n      \n      if (navigator.share) {\n        navigator.share(shareData).catch(console.error);\n      } else {\n        // Fallback pour les navigateurs qui ne supportent pas l'API Web Share\n        console.log('Partage non supporté sur ce navigateur');\n      }\n    }\n  }\n}\n",
            "properties": [
                {
                    "name": "id",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 11
                },
                {
                    "name": "likes",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 20
                },
                {
                    "name": "text",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 12
                },
                {
                    "name": "timestamp",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "Date",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 19
                },
                {
                    "name": "user",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "literal type",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 14
                },
                {
                    "name": "userId",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 13
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "methods": [],
            "extends": [],
            "isDuplicate": true,
            "duplicateId": 1,
            "duplicateName": "Comment-1"
        },
        {
            "name": "Content",
            "id": "interface-Content-db11e310970e777cbe01986226f300175e3eeb01e0ce2352cc22dc6955bcc2b475106daa28775732287b74dd43bc65eea7a948649fea4fc0c5d0f0921c8c3664",
            "file": "src/models/Content.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "export enum ContentType {\n  IMAGE = 'image',\n  VIDEO = 'video'\n}\n\nexport enum ContentStatus {\n  DRAFT = 'draft',\n  PUBLISHED = 'published',\n  ARCHIVED = 'archived',\n  DELETED = 'deleted'\n}\n\nexport enum ContentSource {\n  CAMERA = 'camera',\n  GALLERY = 'gallery'\n}\n\nexport interface Content {\n  // Identifiants\n  id?: string;                // ID unique généré par la base de données\n  userId: string;             // ID de l'utilisateur créateur\n  challengeId: string;       // Optionnel : ID du défi associé\n  commentIds: string[];      // IDs des commentaires associés à ce contenu\n  likedIds?:string[];\n  // Métadonnées du contenu\n  title: string;              // Titre du contenu\n  description?: string;       // Description optionnelle\n  username?:string;            // Nom d'utilisateur du post\n  tags?: string[];            // Mots-clés pour la recherche\n  isPublic: boolean;          // Visibilité publique/privée\n  allowDownloads: boolean;    // Autoriser le téléchargement\n  allowComments: boolean;     // Autoriser les commentaires\n  source: ContentSource;      // Source: caméra ou galerie\n  isLikedByUser?: boolean;\n\n  // Fichier média\n  fileUrl: string;            // URL du fichier sur le serveur\n  thumbnailUrl?: string;      // URL de la miniature (pour les vidéos)\n  mimeType: string;           // Type MIME du fichier\n  fileSize: number;           // Taille en octets\n  duration?: number;          // Durée en secondes (pour les vidéos)\n  width?: number;             // Largeur en pixels\n  height?: number;            // Hauteur en pixels\n  safeUrl?: string;           // URL sécurisée\n  \n  // Métadonnées système\n  status: ContentStatus;      // État de publication\n  createdAt: string;          // Date de création (ISO string)\n  updatedAt?: string;         // Date de mise à jour (ISO string)\n\n  // Statistiques\n  viewCount: number;          // Nombre de vues\n  likeCount: number;          // Nombre de likes\n  commentCount: number;       // Nombre de commentaires\n  downloadCount: number;      // Nombre de téléchargements\n}\n\n\ninterface PostWithUser extends Content {\n  username: string;\n  isLikedByUser: boolean;\n  avatarUrl?: string;\n}",
            "properties": [
                {
                    "name": "allowComments",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 32
                },
                {
                    "name": "allowDownloads",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 31
                },
                {
                    "name": "challengeId",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 22
                },
                {
                    "name": "commentCount",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 54
                },
                {
                    "name": "commentIds",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string[]",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 23
                },
                {
                    "name": "createdAt",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 48
                },
                {
                    "name": "description",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 27
                },
                {
                    "name": "downloadCount",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 55
                },
                {
                    "name": "duration",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 41
                },
                {
                    "name": "fileSize",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 40
                },
                {
                    "name": "fileUrl",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 37
                },
                {
                    "name": "height",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 43
                },
                {
                    "name": "id",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 20
                },
                {
                    "name": "isLikedByUser",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 34
                },
                {
                    "name": "isPublic",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 30
                },
                {
                    "name": "likeCount",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 53
                },
                {
                    "name": "likedIds",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string[]",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 24
                },
                {
                    "name": "mimeType",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 39
                },
                {
                    "name": "safeUrl",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 44
                },
                {
                    "name": "source",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "ContentSource",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 33
                },
                {
                    "name": "status",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "ContentStatus",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 47
                },
                {
                    "name": "tags",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string[]",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 29
                },
                {
                    "name": "thumbnailUrl",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 38
                },
                {
                    "name": "title",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 26
                },
                {
                    "name": "updatedAt",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 49
                },
                {
                    "name": "userId",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 21
                },
                {
                    "name": "username",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 28
                },
                {
                    "name": "viewCount",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 52
                },
                {
                    "name": "width",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 42
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "methods": [],
            "extends": []
        },
        {
            "name": "Plan",
            "id": "interface-Plan-3f742604011933431a53e6e2cb5d907ab78d64b485893dab30d0c7c5efd72c59571e558f014c25cf3822bb315c1133ca6bbbb251770e58f64332bf6f6da003a4",
            "file": "src/models/Plan.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "export interface Plan {\n  id: string;\n  name: string;\n  price: number;  // Changé de string à number\n  period: string;\n  duration: number;\n  icon?: string;\n  startDate: string;\n  endDate: string;\n status: 'active' | 'expired' | 'pending';\n  features: string[];\n  popular?: boolean;\n  color?: string; \n  isPopular?: boolean;\n  createdAt?: Date;\n  updatedAt?: Date;\n}",
            "properties": [
                {
                    "name": "color",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 13
                },
                {
                    "name": "createdAt",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "Date",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 15
                },
                {
                    "name": "duration",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 6
                },
                {
                    "name": "endDate",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 9
                },
                {
                    "name": "features",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string[]",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 11
                },
                {
                    "name": "icon",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 7
                },
                {
                    "name": "id",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 2
                },
                {
                    "name": "isPopular",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 14
                },
                {
                    "name": "name",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 3
                },
                {
                    "name": "period",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 5
                },
                {
                    "name": "popular",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 12
                },
                {
                    "name": "price",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 4
                },
                {
                    "name": "startDate",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 8
                },
                {
                    "name": "status",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "\"active\" | \"expired\" | \"pending\"",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 10
                },
                {
                    "name": "updatedAt",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "Date",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 16
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "methods": [],
            "extends": []
        },
        {
            "name": "Post",
            "id": "interface-Post-cb8763681302902bcb3486f16bea3b4bcbcf7a6d94b3d172d1eafe5497be4ec8168be47fb14bab31b472c1fb0a23c6807b74526a4172f82a446a15d5656d5d16",
            "file": "src/app/tab-profile/profile.page.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "import { ChangeDetectorRef, Component, OnInit } from '@angular/core';\nimport { NgIf, CommonModule, Location } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { ModalController } from '@ionic/angular';\nimport { ChallengeFormComponent } from '../components/challenge-form/challenge-form.component';\nimport { addIcons } from 'ionicons';\n\nimport { \n  shareSocialOutline, \n  ellipsisVertical, \n  addCircle, \n  checkmarkCircle, \n  star, \n  linkOutline, \n  calendarOutline, \n  openOutline,\n  flag,\n  ban,\n  close,\n  heart,\n  createOutline,\n  settingsOutline,\n  trophyOutline,\n  schoolOutline,\n  flameOutline,\n  peopleOutline,\n  timeOutline,\n  add, musicalNotesOutline, chatbubble, chevronBack, \n  create} from 'ionicons/icons';\nimport { \n  IonContent, \n  IonHeader,\n  IonToolbar, \n  IonModal,\n  IonButtons, \n  IonButton, \n  IonIcon, \n  IonBadge,\n  IonFab,\n  IonFabButton, IonSpinner, IonTitle }  from '@ionic/angular/standalone';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { ActionSheetController, AlertController, ToastController } from '@ionic/angular';\nimport { UserProfile } from 'src/models/User';\nimport { Observable, of, Subject, switchMap, takeUntil, tap } from 'rxjs';\nimport { Challenge } from 'src/models/Challenge';\nimport { ProfileService } from 'src/services/PROFILE_SERVICE/profile-service';\nimport { Auth } from 'src/services/AUTH/auth';\nimport { CreationService } from 'src/services/CREATION/creation-service';\nimport { UserService } from 'src/services/USER_SERVICE/user-service';\nimport { Content } from 'src/models/Content';\nimport { getMediaUrl } from '../utils/media.utils';\n\n\ninterface Post {\n  id: number;\n  imageUrl: string;\n  title: string;\n  votes: number;\n  category: string;\n}\n\n\n\n@Component({\n  selector: 'app-profile',\n  templateUrl: './profile.page.html',\n  styleUrls: ['./profile.page.scss'],\n  standalone: true,\n  providers: [ModalController],\n  imports: [ NgIf,IonTitle, IonSpinner, \n    IonContent, IonHeader, IonToolbar, IonButtons, IonButton, \n    IonIcon, IonBadge, IonFab, IonFabButton,\n    CommonModule, FormsModule\n  ] \n})\nexport class ProfilePage implements OnInit {\n\n  \n  selectedTab: 'posts' | 'success' | 'info' = 'posts';\n  isOwnProfile: boolean = false; // Détermine si c'est le profil de l'utilisateur connecté\n  isLoading : boolean =false;\n  userProfile!:UserProfile; \n  currentUserId: string | null = null;\n  activeChallenges$!: Observable<Challenge[]>;\n  hasActiveChallenges = true;\n  activeChallengesCount : number = 0;\n  userContents: Content[] = [];\n  isLoadingContents = false; \n  isRight_toWrite = false;\n  successPosts: Post[] = [];\n  private destroy$ = new Subject<void>();\n  constructor(\n    private cdr: ChangeDetectorRef, \n    private route: ActivatedRoute,\n    private router: Router,\n    private location: Location,\n    private profileService : ProfileService,\n    private authservice: Auth,\n    private creationService: CreationService,\n    private alertController: AlertController,\n    private toastController: ToastController,\n    private actionSheetController: ActionSheetController,\n    private modalCtrl: ModalController\n  ) {\n    this.userProfile = {} as UserProfile;\n    this.userProfile.stats = {} as {\n      posts: 0;\n      fans: 0;\n      votes: 0;\n      stars: 0;\n    };\n    \n    addIcons({ flag, ban, close, createOutline, settingsOutline, chevronBack,shareSocialOutline,star, ellipsisVertical,addCircle,checkmarkCircle,schoolOutline,linkOutline,calendarOutline,openOutline,trophyOutline,flameOutline,peopleOutline,musicalNotesOutline,timeOutline,add,heart,chatbubble});\n  }\nngOnInit() {\n  // S'abonner aux changements de paramètres de route\n  this.route.paramMap.pipe(\n    takeUntil(this.destroy$)\n  ).subscribe(params => {\n    const userId = params.get('id');\n    const isCurrentUserProfile = this.route.snapshot.data['isCurrentUser'] === true;\n    const currentUser = this.authservice.getCurrentUser();\n    this.currentUserId = currentUser?.id?.toString() || null;\n    this.isRight_toWrite = !currentUser?.readonly;\n   \n    if (isCurrentUserProfile && this.currentUserId) {\n      // Cas de la route /my-profile\n      this.isOwnProfile = true;\n      this.loadUserProfile(this.currentUserId);\n    } else if (userId) {\n      // Cas de la route /profile/:id\n      this.isOwnProfile = userId === this.currentUserId;\n      this.loadUserProfile(userId);\n    } else if (this.currentUserId) {\n      // Fallback si pas d'ID mais utilisateur connecté\n      this.isOwnProfile = true;\n      this.loadUserProfile(this.currentUserId);\n    } else {\n      // Rediriger vers la page de connexion si pas connecté\n      this.router.navigate(['/login']);\n    }\n  });\n\n  // S'abonner aux changements d'authentification\n  this.authservice.currentUser$.pipe(\n    takeUntil(this.destroy$)\n  ).subscribe(user => {\n    const currentUserId = user?.id?.toString() || null;\n    if (this.userProfile) {\n      const isCurrentUserProfile = this.route.snapshot.data['isCurrentUser'] === true;\n      this.isOwnProfile = isCurrentUserProfile || this.userProfile.id === currentUserId;\n    }\n    this.currentUserId = currentUserId;\n    this.isRight_toWrite = user?.readonly || false;\n  });\n}\n\nasync toggleFollow() {\n  if (!this.currentUserId || !this.userProfile) return;\n\n  try {\n    let result;\n    if (this.userProfile.isFollowing) {\n      result = await this.profileService.unfollowProfile(this.currentUserId, this.userProfile.id);\n    } else {\n      result = await this.profileService.followProfile(this.currentUserId, this.userProfile.id);\n    }\n\n    // Mise à jour locale des données\n    if (result) {\n      this.userProfile.isFollowing = !this.userProfile.isFollowing;\n      if (result.profile) {\n        // Mettre à jour le compteur de fans avec la valeur du serveur\n        this.userProfile.stats = this.userProfile.stats || { fans: 0, following: 0 };\n        this.userProfile.stats.fans = result.profile.stats?.fans || 0;\n      }\n    }\n  } catch (err) {\n    console.error('Erreur lors de la mise à jour du suivi', err);\n    const toast = await this.toastController.create({\n      message: 'Erreur lors de la mise à jour du suivi',\n      duration: 3000,\n      position: 'bottom',\n      color: 'danger'\n    });\n    await toast.present();\n  }\n}\n\n// Add this method to your HomePage class\ngetMediaUrl(relativePath: string): string {\n  return getMediaUrl(relativePath);\n}\n \n   async loadUserProfile(userId: string) {\n  if (!userId) {\n    this.router.navigate(['/login']);\n    return;\n  }\n\n  this.isLoading = true;\n  try {\n    const profile = await this.profileService.getProfileById(userId).toPromise();\n    if (!profile) {\n      throw new Error('Profil non trouvé');\n    }\n    \n    this.userProfile = profile;\n    this.isOwnProfile = this.currentUserId === userId;\n    this.cdr.detectChanges();\n    \n    // Charger les données associées\n    this.loadUserContents(userId);\n    this.loadActiveChallenges(userId);\n    \n  } catch (error) {\n    console.error('Erreur lors du chargement du profil:', error);\n    this.router.navigate(['/tabs/home']);\n  } finally {\n    this.isLoading = false;\n  }\n}\n\n  loadUserContents(userId: string) {\n    this.isLoadingContents = true;\n    this.creationService.getUserContents(userId).subscribe({\n      next: (contents) => {\n        this.userContents = contents;\n        this.isLoadingContents = false;\n      },\n      error: (err) => {\n        console.error('Erreur lors du chargement des contenus', err);\n        this.isLoadingContents = false;\n      }\n    });\n  }\n\n\n  loadActiveChallenges(UerId: string){\n    this.activeChallenges$ = this.creationService.getChallengesByCreator(UerId);\n    this.activeChallenges$.subscribe((challenges: Challenge[]) => {\n      this.activeChallengesCount = challenges.length;\n    });\n    \n  }\n\n  selectTab(tab: 'posts' | 'success' | 'info') {\n    this.selectedTab = tab;\n  }\n\n  \n\n  // Gestion des challenges\n  async createChallenge() {\n     const modal = await this.modalCtrl.create({\n      component: ChallengeFormComponent,\n      componentProps: {\n        challenge: null // Permet d'éditer un challenge existant ou d'en créer un nouveau\n      },\n      cssClass: 'auto-height',\n      backdropDismiss: false\n    });\n\n    await modal.present();\n\n    const { data } = await modal.onDidDismiss();\n    \n    if (data) {\n      this.loadActiveChallenges(this.currentUserId || ''); // Rafraîchir la liste des challenges\n    }\n   \n  }\n\n   async openChallenge(challenge?: Challenge) {\n    console.log('Navigating to create challenge...');\n    //this.router.navigate(['/create-challenge']);\n  }\n\n  viewAllChallenges() {\n    console.log('Viewing all challenges for user:', this.userProfile.id);\n    this.router.navigate(['/challenges', this.userProfile.id]);\n  }\n\n  getDaysRemaining(challenge: Challenge): number {\n  if (!challenge.end_date) return 0;\n  \n  const endDate = new Date(challenge.end_date);\n  if (isNaN(endDate.getTime())) {\n    console.error('Date de fin invalide:', challenge.end_date);\n    return 0;\n  }\n  \n  const now = new Date();\n  const diffTime = endDate.getTime() - now.getTime();\n  return Math.max(0, Math.ceil(diffTime / (1000 * 60 * 60 * 24)));\n}\n\n  getChallengeStatus(challenge: Challenge): 'active' | 'ending-soon' | 'ended' {\n    const daysRemaining = this.getDaysRemaining(challenge);\n    if (daysRemaining <= 0) return 'ended';\n    if (daysRemaining <= 3) return 'ending-soon';\n    return 'active';\n  }\n\n  getStatusBadgeColor(status: string): string {\n    switch(status) {\n      case 'active': return 'success';\n      case 'ending-soon': return 'warning';\n      case 'ended': return 'medium';\n      default: return 'primary';\n    }\n  }\n\n  getStatusText(status: string): string {\n    switch(status) {\n      case 'active': return 'EN COURS';\n      case 'ending-soon': return 'BIENTÔT TERMINÉ';\n      case 'ended': return 'TERMINÉ';\n      default: return 'ACTIF';\n    }\n  }\n\n  // Méthodes existantes\n  async presentShareOptions() {\n    const actionSheet = await this.actionSheetController.create({\n      header: 'Partager le profil',\n      buttons: [\n        {\n          text: 'Copier le lien',\n          icon: 'link',\n          handler: () => {\n            this.copyProfileLink();\n          }\n        },\n        {\n          text: 'Partager via...',\n          icon: 'share-social',\n          handler: () => {\n            this.shareProfile();\n          }\n        },\n        {\n          text: 'Annuler',\n          icon: 'close',\n          role: 'cancel'\n        }\n      ]\n    });\n    await actionSheet.present();\n  }\n\n async presentMoreOptions() {\n  const isOwnProfile = this.userProfile?.id === this.authservice.getCurrentUser()?.id;\n  \n  const buttons = [];\n \n  if (isOwnProfile) {\n    // Options pour le profil de l'utilisateur connecté\n    if(this.activeChallengesCount > 0 && this.userProfile?.userType === 'creator') {\n      buttons.push(\n        {\n          text: 'Nouveau Défi',\n          icon: 'trophy-outline',\n          handler: () => {\n            this.createChallenge();\n          }\n        }\n      );\n    }\n    buttons.push(\n      {\n        text: 'Modifier le profil',\n        icon: 'create-outline',\n        handler: () => {\n          this.editProfile();\n        }\n      },\n      {\n        text: 'Paramètres',\n        icon: 'settings-outline',\n        handler: () => {\n          this.openSettings();\n        }\n      }\n    );\n    \n  } else {\n    // Options pour le profil d'un autre utilisateur\n    buttons.push(\n      {\n        text: 'Signaler',\n        icon: 'flag-outline',\n        role: 'destructive',\n        handler: () => {\n          this.reportUser();\n        }\n      },\n      {\n        text: 'Bloquer',\n        icon: 'ban-outline',\n        role: 'destructive',\n        handler: () => {\n          this.blockUser();\n        }\n      }\n    );\n  }\n\n  // Bouton Annuler commun aux deux cas\n  buttons.push({\n    text: 'Annuler',\n    icon: 'close',\n    role: 'cancel'\n  });\n\n  const actionSheet = await this.actionSheetController.create({\n    header: isOwnProfile ? 'Options du profil' : 'Options',\n    buttons: buttons\n  });\n\n  await actionSheet.present();\n}\n\n// Ajoutez ces méthodes si elles n'existent pas déjà\nprivate editProfile() {\n  this.router.navigate(['/edit-profile']);\n}\n\nprivate openSettings() {\n  this.router.navigate(['/settings']);\n}\n\nprivate async reportUser() {\n  const alert = await this.alertController.create({\n    header: 'Signaler un utilisateur',\n    message: 'Pourquoi souhaitez-vous signaler cet utilisateur ?',\n    inputs: [\n      {\n        name: 'reason',\n        type: 'text',\n        placeholder: 'Raison du signalement'\n      }\n    ],\n    buttons: [\n      {\n        text: 'Annuler',\n        role: 'cancel'\n      },\n      {\n        text: 'Envoyer',\n        handler: (data) => {\n          if (data.reason) {\n            // Envoyer le signalement\n            console.log('Signalement envoyé :', data.reason);\n            this.presentToast('Signalement envoyé avec succès', 'success');\n            return true; // Ajoutez cette ligne pour fermer l'alerte\n          } else {\n            this.presentToast('Veuillez indiquer une raison', 'warning');\n            return false; // Empêche la fermeture de l'alerte\n          }\n        }\n      }\n    ]\n  });\n  await alert.present();\n}\nprivate async blockUser() {\n  const alert = await this.alertController.create({\n    header: 'Confirmer',\n    message: 'Voulez-vous vraiment bloquer cet utilisateur ?',\n    buttons: [\n      {\n        text: 'Annuler',\n        role: 'cancel'\n      },\n      {\n        text: 'Bloquer',\n        role: 'destructive',\n        handler: () => {\n          // Implémentez la logique de blocage\n          console.log('Utilisateur bloqué');\n          this.presentToast('Utilisateur bloqué avec succès', 'success');\n          // Revenir en arrière ou rafraîchir la page\n          this.router.navigate(['/tabs/tab-home']);\n        }\n      }\n    ]\n  });\n  await alert.present();\n}\n\n// Ajoutez cette méthode utilitaire pour les notifications\nprivate async presentToast(message: string, color: 'success' | 'warning' | 'danger' = 'success') {\n  const toast = await this.toastController.create({\n    message: message,\n    duration: 2000,\n    color: color,\n    position: 'bottom'\n  });\n  await toast.present();\n}\n\n  copyProfileLink() {\n    const link = `https://app.com/profile/${this.userProfile.id}`;\n    navigator.clipboard.writeText(link);\n    console.log('Link copied:', link);\n  }\n\n  shareProfile() {\n    console.log('Sharing profile...');\n  }\n\n  sendMessage() {\n    console.log('Opening message...');\n  }\n\n  // Dans profile.page.ts\nopenContent(content: Content) {\n  // Naviguer vers la page de détail du contenu\n  this.router.navigate(['/content-detail', content.id]);\n  // Ou ouvrir un modal avec le contenu\n  // this.presentContentModal(content);\n}\n\n\nonImageAvatarError(event: any) {\n    // On récupère l'élément HTML <img> qui a déclenché l'erreur\n    const imgElement = event.target as HTMLImageElement;\n   imgElement.onerror = null;\n    // On remplace la source par l'image locale\n    imgElement.src = 'assets/avatar-default.png';\n    // Optionnel : ajouter une classe pour styliser différemment l'avatar par défaut si besoin\n    imgElement.classList.add('is-default');\n  }\n\n\n  onImageContentError(event: any) {\n    // On récupère l'élément HTML <img> qui a déclenché l'erreur\n    const imgElement = event.target as HTMLImageElement;\n   imgElement.onerror = null;\n    // On remplace la source par l'image locale\n    imgElement.src = 'assets/splash.png';\n    // Optionnel : ajouter une classe pour styliser différemment l'avatar par défaut si besoin\n    imgElement.classList.add('is-default');\n  }\n  \n  \n\ngoBack() {\n  if (this.location.back) {\n    this.location.back();\n  } else {\n    this.router.navigate(['/home']);\n  }\n}\n\n formatNumber(num: number | undefined | null): string {\n  if (num === undefined || num === null) {\n    return '0';\n  }\n  if (num >= 1000) {\n    return (num / 1000).toFixed(1) + 'K';\n  }\n  return num.toString();\n}\n}",
            "properties": [
                {
                    "name": "category",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 59
                },
                {
                    "name": "id",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 55
                },
                {
                    "name": "imageUrl",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 56
                },
                {
                    "name": "title",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 57
                },
                {
                    "name": "votes",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 58
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "methods": [],
            "extends": []
        },
        {
            "name": "PostWithUser",
            "id": "interface-PostWithUser-db11e310970e777cbe01986226f300175e3eeb01e0ce2352cc22dc6955bcc2b475106daa28775732287b74dd43bc65eea7a948649fea4fc0c5d0f0921c8c3664",
            "file": "src/models/Content.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "export enum ContentType {\n  IMAGE = 'image',\n  VIDEO = 'video'\n}\n\nexport enum ContentStatus {\n  DRAFT = 'draft',\n  PUBLISHED = 'published',\n  ARCHIVED = 'archived',\n  DELETED = 'deleted'\n}\n\nexport enum ContentSource {\n  CAMERA = 'camera',\n  GALLERY = 'gallery'\n}\n\nexport interface Content {\n  // Identifiants\n  id?: string;                // ID unique généré par la base de données\n  userId: string;             // ID de l'utilisateur créateur\n  challengeId: string;       // Optionnel : ID du défi associé\n  commentIds: string[];      // IDs des commentaires associés à ce contenu\n  likedIds?:string[];\n  // Métadonnées du contenu\n  title: string;              // Titre du contenu\n  description?: string;       // Description optionnelle\n  username?:string;            // Nom d'utilisateur du post\n  tags?: string[];            // Mots-clés pour la recherche\n  isPublic: boolean;          // Visibilité publique/privée\n  allowDownloads: boolean;    // Autoriser le téléchargement\n  allowComments: boolean;     // Autoriser les commentaires\n  source: ContentSource;      // Source: caméra ou galerie\n  isLikedByUser?: boolean;\n\n  // Fichier média\n  fileUrl: string;            // URL du fichier sur le serveur\n  thumbnailUrl?: string;      // URL de la miniature (pour les vidéos)\n  mimeType: string;           // Type MIME du fichier\n  fileSize: number;           // Taille en octets\n  duration?: number;          // Durée en secondes (pour les vidéos)\n  width?: number;             // Largeur en pixels\n  height?: number;            // Hauteur en pixels\n  safeUrl?: string;           // URL sécurisée\n  \n  // Métadonnées système\n  status: ContentStatus;      // État de publication\n  createdAt: string;          // Date de création (ISO string)\n  updatedAt?: string;         // Date de mise à jour (ISO string)\n\n  // Statistiques\n  viewCount: number;          // Nombre de vues\n  likeCount: number;          // Nombre de likes\n  commentCount: number;       // Nombre de commentaires\n  downloadCount: number;      // Nombre de téléchargements\n}\n\n\ninterface PostWithUser extends Content {\n  username: string;\n  isLikedByUser: boolean;\n  avatarUrl?: string;\n}",
            "properties": [
                {
                    "name": "avatarUrl",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 62
                },
                {
                    "name": "isLikedByUser",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 61
                },
                {
                    "name": "username",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 60
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "methods": [],
            "extends": [
                "Content"
            ]
        },
        {
            "name": "User",
            "id": "interface-User-748940e31de84fc165085f02a658b6b8ee38177d9ea0b71768fba430f1bbc19c9cd4d3162360f917d4959529ff0dc77aca8924093f66b6d98b5aa1dbc14854d0",
            "file": "src/models/User.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "import { Plan } from \"./Plan\";\n\nexport interface User {\n  id: number | string;\n\n  /* Identity */\n  first_name: string;\n  last_name: string;\n  gender: string;\n  birthDate?:Date;  \n  age: number; \n  email: string;\n\n  /* Auth */\n  password_hash: string;\n  QR_proof: string;\n  password?: string;\n  confirmPassword?: string;\n  \n  /* Role & statustudentProofs */\n  user_type:\n    | 'fan'\n    | 'artist'\n    | 'admin'\n    | 'creator';\n\n  user_status: \n  |'university' \n  | 'student' \n  | 'other'; \n\n  status: 'active' | 'blocked' | 'pending';\n\n  /* Meta */\n  \n  readonly:boolean;\n  myPlan:Plan\n  registration_date: string;\n}\n\n\nexport interface UserProfile {\n  id: string;\n  username: string;\n  displayName: string;\n  avatar: string;\n  isVerified: boolean;\n  isFollowing: boolean;\n  plan?: string;\n  bio: string;\n  school: string;\n  contact: string;\n  memberSince: string;\n  userType: 'fan' | 'artist' | 'creator' | 'admin';\n  myFollows: string[];\n  stats: {\n    posts: number;\n    fans: number;\n    votes: number;\n    stars: number;\n  };\n}",
            "properties": [
                {
                    "name": "age",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 11
                },
                {
                    "name": "birthDate",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "Date",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 10
                },
                {
                    "name": "confirmPassword",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 18
                },
                {
                    "name": "email",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 12
                },
                {
                    "name": "first_name",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 7
                },
                {
                    "name": "gender",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 9
                },
                {
                    "name": "id",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number | string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 4
                },
                {
                    "name": "last_name",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 8
                },
                {
                    "name": "myPlan",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "Plan",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 37
                },
                {
                    "name": "password",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 17
                },
                {
                    "name": "password_hash",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 15
                },
                {
                    "name": "QR_proof",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 16
                },
                {
                    "name": "readonly",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 36
                },
                {
                    "name": "registration_date",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 38
                },
                {
                    "name": "status",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "\"active\" | \"blocked\" | \"pending\"",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 32
                },
                {
                    "name": "user_status",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "\"university\" | \"student\" | \"other\"",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 27
                },
                {
                    "name": "user_type",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "\"fan\" | \"artist\" | \"admin\" | \"creator\"",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 21
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "methods": [],
            "extends": []
        },
        {
            "name": "User",
            "id": "interface-User-d4821beac0e4a852e513391b7470981c4353fdd95a18628bb68136c8695b489ee15b926e2e5031bc26cf30e1508e0a362c3ee13a06734702b4d15af140e485d5-1",
            "file": "src/stories/user.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "export interface User {\n  name: string;\n}\n",
            "properties": [
                {
                    "name": "name",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 2
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "methods": [],
            "extends": [],
            "isDuplicate": true,
            "duplicateId": 1,
            "duplicateName": "User-1"
        },
        {
            "name": "UserProfile",
            "id": "interface-UserProfile-748940e31de84fc165085f02a658b6b8ee38177d9ea0b71768fba430f1bbc19c9cd4d3162360f917d4959529ff0dc77aca8924093f66b6d98b5aa1dbc14854d0",
            "file": "src/models/User.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "import { Plan } from \"./Plan\";\n\nexport interface User {\n  id: number | string;\n\n  /* Identity */\n  first_name: string;\n  last_name: string;\n  gender: string;\n  birthDate?:Date;  \n  age: number; \n  email: string;\n\n  /* Auth */\n  password_hash: string;\n  QR_proof: string;\n  password?: string;\n  confirmPassword?: string;\n  \n  /* Role & statustudentProofs */\n  user_type:\n    | 'fan'\n    | 'artist'\n    | 'admin'\n    | 'creator';\n\n  user_status: \n  |'university' \n  | 'student' \n  | 'other'; \n\n  status: 'active' | 'blocked' | 'pending';\n\n  /* Meta */\n  \n  readonly:boolean;\n  myPlan:Plan\n  registration_date: string;\n}\n\n\nexport interface UserProfile {\n  id: string;\n  username: string;\n  displayName: string;\n  avatar: string;\n  isVerified: boolean;\n  isFollowing: boolean;\n  plan?: string;\n  bio: string;\n  school: string;\n  contact: string;\n  memberSince: string;\n  userType: 'fan' | 'artist' | 'creator' | 'admin';\n  myFollows: string[];\n  stats: {\n    posts: number;\n    fans: number;\n    votes: number;\n    stars: number;\n  };\n}",
            "properties": [
                {
                    "name": "avatar",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 46
                },
                {
                    "name": "bio",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 50
                },
                {
                    "name": "contact",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 52
                },
                {
                    "name": "displayName",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 45
                },
                {
                    "name": "id",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 43
                },
                {
                    "name": "isFollowing",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 48
                },
                {
                    "name": "isVerified",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 47
                },
                {
                    "name": "memberSince",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 53
                },
                {
                    "name": "myFollows",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string[]",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 55
                },
                {
                    "name": "plan",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 49
                },
                {
                    "name": "school",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 51
                },
                {
                    "name": "stats",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "literal type",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 56
                },
                {
                    "name": "username",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 44
                },
                {
                    "name": "userType",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "\"fan\" | \"artist\" | \"creator\" | \"admin\"",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 54
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "methods": [],
            "extends": []
        },
        {
            "name": "Vote",
            "id": "interface-Vote-5c36b8237025c6840c23375568e840df2788451ae3a47a0f2bc4535df2628bc700be9f40210f01150d2539e3f7ed080e4a9c4e9f02d527457f73c92d82cf0c65",
            "file": "src/models/Vote.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "export interface Vote {\n    id?: string;\n    userId: string;\n    contentId: string;\n    nbVotes: number;\n    createdAt: string;\n}",
            "properties": [
                {
                    "name": "contentId",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 4
                },
                {
                    "name": "createdAt",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 6
                },
                {
                    "name": "id",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 2
                },
                {
                    "name": "nbVotes",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 5
                },
                {
                    "name": "userId",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 3
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "methods": [],
            "extends": []
        }
    ],
    "injectables": [
        {
            "name": "ApiJSON",
            "id": "injectable-ApiJSON-34677ce08aa10ee175c340c19ffdc992fd13e0cfafbf77bdf5d7444030790a17956a4072c496331ad5322e93e920ad03407ffa30af1cf389cd8187fba94ebb09",
            "file": "src/services/API/LOCAL/api-json.ts",
            "properties": [
                {
                    "name": "AUTH_TOKEN",
                    "defaultValue": "environment.authToken",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 13,
                    "modifierKind": [
                        123,
                        148
                    ]
                },
                {
                    "name": "BASE_URL",
                    "defaultValue": "environment.apiUrl",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 12,
                    "modifierKind": [
                        123,
                        148
                    ]
                }
            ],
            "methods": [
                {
                    "name": "create",
                    "args": [
                        {
                            "name": "resource",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "payload",
                            "type": "Partial<T>",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Observable<T>",
                    "typeParameters": [
                        "T"
                    ],
                    "line": 28,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "resource",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "payload",
                            "type": "Partial<T>",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "delete",
                    "args": [
                        {
                            "name": "resource",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "id",
                            "type": "number | string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Observable<void>",
                    "typeParameters": [],
                    "line": 88,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "resource",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "id",
                            "type": "number | string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "getAll",
                    "args": [
                        {
                            "name": "resource",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "params",
                            "type": "Record<string | string | number | boolean>",
                            "optional": true,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Observable<T[]>",
                    "typeParameters": [
                        "T"
                    ],
                    "line": 37,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "resource",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "params",
                            "type": "Record<string | string | number | boolean>",
                            "optional": true,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "getAuthHeaders",
                    "args": [],
                    "optional": false,
                    "returnType": "HttpHeaders",
                    "typeParameters": [],
                    "line": 20,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nCrée un HttpHeaders avec Authorization\n",
                    "description": "<p>Crée un HttpHeaders avec Authorization</p>\n",
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "getById",
                    "args": [
                        {
                            "name": "resource",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "id",
                            "type": "number | string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Observable<T>",
                    "typeParameters": [
                        "T"
                    ],
                    "line": 55,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "resource",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "id",
                            "type": "number | string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "getFile",
                    "args": [
                        {
                            "name": "filePath",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Observable<Blob>",
                    "typeParameters": [],
                    "line": 122,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nRécupère un fichier depuis le serveur\n",
                    "description": "<p>Récupère un fichier depuis le serveur</p>\n",
                    "jsdoctags": [
                        {
                            "name": {
                                "pos": 2938,
                                "end": 2946,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "filePath"
                            },
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "pos": 2932,
                                "end": 2937,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "param"
                            },
                            "comment": "<p>Chemin relatif du fichier</p>\n"
                        },
                        {
                            "tagName": {
                                "pos": 2977,
                                "end": 2984,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "returns"
                            },
                            "comment": "<p>Observable avec les données du fichier sous forme de Blob</p>\n"
                        }
                    ]
                },
                {
                    "name": "patch",
                    "args": [
                        {
                            "name": "resource",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "id",
                            "type": "number | string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "payload",
                            "type": "Partial<T>",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Observable<T>",
                    "typeParameters": [
                        "T"
                    ],
                    "line": 75,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "resource",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "id",
                            "type": "number | string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "payload",
                            "type": "Partial<T>",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "update",
                    "args": [
                        {
                            "name": "resource",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "id",
                            "type": "number | string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "payload",
                            "type": "Partial<T>",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Observable<T>",
                    "typeParameters": [
                        "T"
                    ],
                    "line": 63,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "resource",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "id",
                            "type": "number | string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "payload",
                            "type": "Partial<T>",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "upload",
                    "args": [
                        {
                            "name": "resource",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "file",
                            "type": "File",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "fieldName",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "defaultValue": "'file'"
                        },
                        {
                            "name": "reportProgress",
                            "type": "unknown",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "defaultValue": "false"
                        }
                    ],
                    "optional": false,
                    "returnType": "Observable<T | HttpEvent>",
                    "typeParameters": [
                        "T"
                    ],
                    "line": 96,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "resource",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "file",
                            "type": "File",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "fieldName",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "defaultValue": "'file'",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "reportProgress",
                            "type": "unknown",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "defaultValue": "false",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                }
            ],
            "deprecated": false,
            "deprecationMessage": "",
            "description": "",
            "rawdescription": "\n",
            "sourceCode": "import { Injectable } from '@angular/core';\nimport { environment } from 'src/environments/environment.prod';\nimport { HttpClient, HttpEvent, HttpHeaders, HttpParams } from '@angular/common/http';\nimport { catchError, Observable, of } from 'rxjs';\n\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ApiJSON {\n\n  private readonly BASE_URL = environment.apiUrl;\n  private readonly AUTH_TOKEN = environment.authToken;\n\n  constructor(private http: HttpClient) {}\n\n  /**\n   * Crée un HttpHeaders avec Authorization\n   */\n  private getAuthHeaders(): HttpHeaders {\n    return new HttpHeaders({\n      'Authorization': `Bearer ${this.AUTH_TOKEN}`,\n      'Content-Type': 'application/json'\n    });\n  }\n\n  /* ========= CREATE ========= */\n  create<T>(resource: string, payload: Partial<T>): Observable<T> {\n    return this.http.post<T>(\n      `${this.BASE_URL}/${resource}`,\n      payload,\n      { headers: this.getAuthHeaders() }\n    );\n  }\n\n  /* ========= READ ========= */\n  getAll<T>(\n    resource: string,\n    params?: Record<string, string | number | boolean>\n  ): Observable<T[]> {\n\n    let httpParams = new HttpParams();\n    if (params) {\n      Object.entries(params).forEach(([key, value]) => {\n        httpParams = httpParams.set(key, String(value));\n      });\n    }\n\n    return this.http.get<T[]>(\n      `${this.BASE_URL}/${resource}`,\n      { headers: this.getAuthHeaders(), params: httpParams }\n    );\n  }\n\n  getById<T>(resource: string, id: number | string): Observable<T> {\n    return this.http.get<T>(\n      `${this.BASE_URL}/${resource}/${id}`,\n      { headers: this.getAuthHeaders() }\n    );\n  }\n\n  /* ========= UPDATE ========= */\n  update<T>(\n    resource: string,\n    id: number | string,\n    payload: Partial<T>\n  ): Observable<T> {\n    return this.http.put<T>(\n      `${this.BASE_URL}/${resource}/${id}`,\n      payload,\n      { headers: this.getAuthHeaders() }\n    );\n  }\n\n  patch<T>(\n    resource: string,\n    id: number | string,\n    payload: Partial<T>\n  ): Observable<T> {\n    return this.http.patch<T>(\n      `${this.BASE_URL}/${resource}/${id}`,\n      payload,\n      { headers: this.getAuthHeaders() }\n    );\n  }\n\n  /* ========= DELETE ========= */\n  delete(resource: string, id: number | string): Observable<void> {\n    return this.http.delete<void>(\n      `${this.BASE_URL}/${resource}/${id}`,\n      { headers: this.getAuthHeaders() }\n    );\n  }\n\n  /* ========= UPLOAD ========= */\n  upload<T>(\n  resource: string, \n  file: File, \n  fieldName: string = 'file',\n  reportProgress = false\n): Observable<T | HttpEvent<T>> {\n  const formData = new FormData();\n  formData.append(fieldName, file);\n\n  return this.http.post<T>(\n    `${this.BASE_URL}/${resource}`,\n    formData,\n    { \n      headers: { 'Authorization': `Bearer ${this.AUTH_TOKEN}` },\n      reportProgress: true,\n      observe: reportProgress ? 'events' : 'body'\n    } as any\n  );\n}\n\n// Dans api-json.ts\n/**\n * Récupère un fichier depuis le serveur\n * @param filePath Chemin relatif du fichier\n * @returns Observable avec les données du fichier sous forme de Blob\n */\ngetFile(filePath: string): Observable<Blob> {\n  const cleanPath = filePath.startsWith('/') ? filePath.substring(1) : filePath;\n  const url = `${this.BASE_URL}/${cleanPath}`;\n  \n  return this.http.get(url, {\n    responseType: 'blob',\n    headers: this.getAuthHeaders(),\n    withCredentials: true // Important pour les requêtes avec authentification\n  }).pipe(\n    catchError(error => {\n      console.error('Erreur lors de la récupération du fichier:', error);\n      // Retourne un blob vide en cas d'erreur\n      return of(new Blob());\n    })\n  );\n}\n\n}\n",
            "constructorObj": {
                "name": "constructor",
                "description": "",
                "deprecated": false,
                "deprecationMessage": "",
                "args": [
                    {
                        "name": "http",
                        "type": "HttpClient",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    }
                ],
                "line": 13,
                "jsdoctags": [
                    {
                        "name": "http",
                        "type": "HttpClient",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            },
            "extends": [],
            "type": "injectable"
        },
        {
            "name": "Auth",
            "id": "injectable-Auth-d6922f7f1da5c40352e9576a483830d8fa66ab4b85aebc4549e0f33e1e50aefe1ed57d739e6752e3f466cab608561939e9e02a73e9ade6e02c74de19b8dafd04",
            "file": "src/services/AUTH/auth.ts",
            "properties": [
                {
                    "name": "currentUser$",
                    "defaultValue": "this.currentUserSubject.asObservable()",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "Observable<AuthUser | null>",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Observable public</p>\n",
                    "line": 26,
                    "rawdescription": "\nObservable public"
                },
                {
                    "name": "currentUserSubject",
                    "defaultValue": "new BehaviorSubject<AuthUser | null>(this.loadUserFromStorage())",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 22,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "LOCKOUT_TIME",
                    "defaultValue": "15 * 60 * 1000",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 20,
                    "modifierKind": [
                        123,
                        148
                    ]
                },
                {
                    "name": "loginAttempts",
                    "defaultValue": "new Map<string, { attempts: number; lastAttempt: number }>()",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 21,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "MAX_ATTEMPTS",
                    "defaultValue": "5",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 19,
                    "modifierKind": [
                        123,
                        148
                    ]
                },
                {
                    "name": "STORAGE_KEY",
                    "defaultValue": "'auth_user'",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 18,
                    "modifierKind": [
                        123,
                        148
                    ]
                }
            ],
            "methods": [
                {
                    "name": "getCurrentUser",
                    "args": [],
                    "optional": false,
                    "returnType": "AuthUser | null",
                    "typeParameters": [],
                    "line": 141,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "isAuthenticated",
                    "args": [],
                    "optional": false,
                    "returnType": "boolean",
                    "typeParameters": [],
                    "line": 137,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "loadUserFromStorage",
                    "args": [],
                    "optional": false,
                    "returnType": "AuthUser | null",
                    "typeParameters": [],
                    "line": 145,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "login",
                    "args": [
                        {
                            "name": "email",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "password",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Observable<AuthUser>",
                    "typeParameters": [],
                    "line": 35,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "email",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "password",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "logout",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 127,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "recordFailedAttempt",
                    "args": [
                        {
                            "name": "email",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 107,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        123
                    ],
                    "jsdoctags": [
                        {
                            "name": "email",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                }
            ],
            "deprecated": false,
            "deprecationMessage": "",
            "description": "",
            "rawdescription": "\n",
            "sourceCode": "import { Injectable } from '@angular/core';\nimport { BehaviorSubject, Observable, catchError, delay, map, tap, throwError } from 'rxjs';\nimport { ApiJSON } from '../API/LOCAL/api-json';\nimport { User } from '../../models/User';\nimport * as bcrypt from 'bcryptjs';\n\nexport type AuthUser = Pick<\n  User,\n  'id' | 'email' | 'user_type' | 'status' | 'readonly'\n>;\n\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class Auth {\n\n  private readonly STORAGE_KEY = 'auth_user';\n  private readonly MAX_ATTEMPTS = 5;\n  private readonly LOCKOUT_TIME = 15 * 60 * 1000; // 15 minutes\n  private loginAttempts = new Map<string, { attempts: number; lastAttempt: number }>();\n  private currentUserSubject =\n    new BehaviorSubject<AuthUser | null>(this.loadUserFromStorage());\n  \n  /** Observable public */\n  currentUser$: Observable<AuthUser | null> =\n    this.currentUserSubject.asObservable();\n\n  constructor(private api: ApiJSON) {}\n\n  /* ======================\n     LOGIN\n     ====================== */\n\n  login(email: string, password: string): Observable<AuthUser> {\n    // Vérifier le verrouillage\n    const userAttempts = this.loginAttempts.get(email);\n    if (userAttempts && userAttempts.attempts >= this.MAX_ATTEMPTS) {\n        const timeLeft = (userAttempts.lastAttempt + this.LOCKOUT_TIME) - Date.now();\n        if (timeLeft > 0) {\n            const minutesLeft = Math.ceil(timeLeft / (60 * 1000));\n            return throwError(() => new Error('TOO_MANY_ATTEMPTS:' + minutesLeft));\n        } else {\n            this.loginAttempts.delete(email);\n        }\n    }\n\n    // Validation de base\n    if (!email || !password) {\n        return throwError(() => new Error('MISSING_CREDENTIALS'));\n    }\n\n    return this.api.getAll<User>('users').pipe(\n        delay(1000 + Math.random() * 1000),\n        map(users => {\n            // Vérification sensible à la casse de l'email\n            const user = users.find(u => u.email.toLowerCase() === email.toLowerCase());\n            \n            if (!user) {\n                this.recordFailedAttempt(email);\n                throw new Error('AUTH_FAILED');\n            }\n\n            // Vérification du statut du compte\n            if (user.status !== 'active') {\n                throw new Error('ACCOUNT_INACTIVE');\n            }\n\n            // Vérification du mot de passe\n            const isPasswordValid = bcrypt.compareSync(password, user.password_hash);\n            if (!isPasswordValid) {\n                this.recordFailedAttempt(email);\n                throw new Error('AUTH_FAILED');\n            }\n\n            // Réinitialisation des tentatives en cas de succès\n            this.loginAttempts.delete(email);\n\n            return {\n                id: user.id,\n                email: user.email,\n                user_type: user.user_type,\n                status: user.status,\n                readonly: user.readonly,\n            } as AuthUser;\n        }),\n        tap(authUser => {\n            const safeUserData = {\n                id: authUser.id,\n                email: authUser.email,\n                user_type: authUser.user_type,\n                status: authUser.status,\n                readonly: authUser.readonly,\n                lastLogin: new Date().toISOString()\n            };\n            \n            localStorage.setItem(this.STORAGE_KEY, JSON.stringify(safeUserData));\n            this.currentUserSubject.next(authUser);\n        }),\n        catchError((error: Error) => {\n            console.error('Login error:', error.message);\n            return throwError(() => error);\n        })\n    );\n}\n\n  private recordFailedAttempt(email: string): void {\n    const now = Date.now();\n    const attempt = this.loginAttempts.get(email) || { attempts: 0, lastAttempt: 0 };\n    \n    // Réinitialiser le compteur si plus de 15 minutes se sont écoulées\n    if (now - attempt.lastAttempt > this.LOCKOUT_TIME) {\n      attempt.attempts = 0;\n    }\n\n    attempt.attempts++;\n    attempt.lastAttempt = now;\n    this.loginAttempts.set(email, attempt);\n\n    console.warn(`Failed login attempt for ${email}. Attempt ${attempt.attempts}/${this.MAX_ATTEMPTS}`);\n  }\n\n  /* ======================\n     LOGOUT\n     ====================== */\n\n  logout(): void {\n    localStorage.removeItem(this.STORAGE_KEY);\n    this.currentUserSubject.next(null);\n    window.dispatchEvent(new Event('storage')); // Déclencher un événement de stockage\n  }\n\n  /* ======================\n     HELPERS\n     ====================== */\n\n  isAuthenticated(): boolean {\n    return !!this.currentUserSubject.value;\n  }\n\n  getCurrentUser(): AuthUser | null {\n    return this.currentUserSubject.value;\n  }\n\n  private loadUserFromStorage(): AuthUser | null {\n    const raw = localStorage.getItem(this.STORAGE_KEY);\n    return raw ? JSON.parse(raw) : null;\n  }\n}\n",
            "constructorObj": {
                "name": "constructor",
                "description": "",
                "deprecated": false,
                "deprecationMessage": "",
                "args": [
                    {
                        "name": "api",
                        "type": "ApiJSON",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    }
                ],
                "line": 27,
                "jsdoctags": [
                    {
                        "name": "api",
                        "type": "ApiJSON",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            },
            "extends": [],
            "type": "injectable"
        },
        {
            "name": "CameraService",
            "id": "injectable-CameraService-6423bc1c6c50a518af446bb07ead58475a6fcc987fb8fc5cc2e5b96d6d25fa0c256d0a909d948984f9eb2604fcc317f671363503eee1432825e915b2252dac45",
            "file": "src/services/CAMERA_SERVICE/camera-service.ts",
            "properties": [],
            "methods": [
                {
                    "name": "convertPhotoToFile",
                    "args": [
                        {
                            "name": "photo",
                            "type": "Photo",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Promise<File>",
                    "typeParameters": [],
                    "line": 34,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        134
                    ],
                    "jsdoctags": [
                        {
                            "name": "photo",
                            "type": "Photo",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "getVideoMetadata",
                    "args": [
                        {
                            "name": "videoFile",
                            "type": "File",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Promise<literal type>",
                    "typeParameters": [],
                    "line": 44,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        134
                    ],
                    "jsdoctags": [
                        {
                            "name": "videoFile",
                            "type": "File",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "pickFromGallery",
                    "args": [],
                    "optional": false,
                    "returnType": "Promise<Photo>",
                    "typeParameters": [],
                    "line": 24,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        134
                    ]
                },
                {
                    "name": "takePhoto",
                    "args": [],
                    "optional": false,
                    "returnType": "Promise<Photo>",
                    "typeParameters": [],
                    "line": 13,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        134
                    ]
                }
            ],
            "deprecated": false,
            "deprecationMessage": "",
            "description": "",
            "rawdescription": "\n",
            "sourceCode": "import { Injectable } from '@angular/core';\nimport { Camera, CameraResultType, CameraSource, Photo } from '@capacitor/camera';\nimport { Filesystem, Directory } from '@capacitor/filesystem';\nimport { Capacitor } from '@capacitor/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class CameraService {\n  constructor() {}\n\n  // Prendre une photo avec la caméra\n  async takePhoto(): Promise<Photo> {\n    return await Camera.getPhoto({\n      quality: 90,\n      allowEditing: false,\n      resultType: CameraResultType.Uri,\n      source: CameraSource.Camera,\n      correctOrientation: true\n    });\n  }\n\n  // Choisir depuis la galerie\n  async pickFromGallery(): Promise<Photo> {\n    return await Camera.getPhoto({\n      quality: 90,\n      allowEditing: false,\n      resultType: CameraResultType.Uri,\n      source: CameraSource.Photos,\n    });\n  }\n\n  // Convertir une photo en fichier\n  async convertPhotoToFile(photo: Photo): Promise<File> {\n    // Fetch the photo, read as a blob, then convert to a File\n    const response = await fetch(photo.webPath!);\n    const blob = await response.blob();\n    return new File([blob], `photo_${new Date().getTime()}.jpg`, { \n      type: 'image/jpeg' \n    });\n  }\n\n  // Obtenir les métadonnées d'une vidéo\n  async getVideoMetadata(videoFile: File): Promise<{ duration: number, width: number, height: number }> {\n    return new Promise((resolve) => {\n      const video = document.createElement('video');\n      video.preload = 'metadata';\n      \n      video.onloadedmetadata = () => {\n        URL.revokeObjectURL(video.src);\n        resolve({\n          duration: video.duration,\n          width: video.videoWidth,\n          height: video.videoHeight\n        });\n      };\n      \n      video.src = URL.createObjectURL(videoFile);\n    });\n  }\n}",
            "constructorObj": {
                "name": "constructor",
                "description": "",
                "deprecated": false,
                "deprecationMessage": "",
                "args": [],
                "line": 9
            },
            "extends": [],
            "type": "injectable"
        },
        {
            "name": "CommentService",
            "id": "injectable-CommentService-0713529fade6fe9c69dcfba28b5d11f4a4a4b78b56692ef333b6d9589a4046530386483468bf93972b5004fb34b8faea3ec1fb9a42f0cccaac4a6ccb3c908e43",
            "file": "src/services/COMMENTS_SERVICE/comment-service.ts",
            "properties": [
                {
                    "name": "commentAdded",
                    "defaultValue": "new Subject<{contentId: string, increment: number}>()",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 16,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "commentAdded$",
                    "defaultValue": "this.commentAdded.asObservable()",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 17
                },
                {
                    "name": "resource",
                    "defaultValue": "'comments'",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 12,
                    "modifierKind": [
                        123,
                        148
                    ]
                }
            ],
            "methods": [
                {
                    "name": "addComment",
                    "args": [
                        {
                            "name": "comment",
                            "type": "Omit<Comment | \"id\" | \"createdAt\" | \"likes\">",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Observable<Comment>",
                    "typeParameters": [],
                    "line": 33,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nAjoute un nouveau commentaire\n",
                    "description": "<p>Ajoute un nouveau commentaire</p>\n",
                    "jsdoctags": [
                        {
                            "name": "comment",
                            "type": "Omit<Comment | \"id\" | \"createdAt\" | \"likes\">",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "deleteComment",
                    "args": [
                        {
                            "name": "commentId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Observable<void>",
                    "typeParameters": [],
                    "line": 79,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nSupprime un commentaire\n",
                    "description": "<p>Supprime un commentaire</p>\n",
                    "jsdoctags": [
                        {
                            "name": "commentId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "getComments",
                    "args": [
                        {
                            "name": "contentId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Observable<Comment[]>",
                    "typeParameters": [],
                    "line": 23,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nRécupère les commentaires d'un contenu\n",
                    "description": "<p>Récupère les commentaires d&#39;un contenu</p>\n",
                    "jsdoctags": [
                        {
                            "name": "contentId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "toggleLike",
                    "args": [
                        {
                            "name": "commentId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "userId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "isLiked",
                            "type": "boolean",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Observable<Comment>",
                    "typeParameters": [],
                    "line": 89,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nLike/Unlike un commentaire\n",
                    "description": "<p>Like/Unlike un commentaire</p>\n",
                    "jsdoctags": [
                        {
                            "name": "commentId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "userId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "isLiked",
                            "type": "boolean",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "updateComment",
                    "args": [
                        {
                            "name": "commentId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "updates",
                            "type": "Partial<Comment>",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Observable<Comment>",
                    "typeParameters": [],
                    "line": 69,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nMet à jour un commentaire existant\n",
                    "description": "<p>Met à jour un commentaire existant</p>\n",
                    "jsdoctags": [
                        {
                            "name": "commentId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "updates",
                            "type": "Partial<Comment>",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "updateContentCommentCount",
                    "args": [
                        {
                            "name": "contentId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "increment",
                            "type": "number",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 52,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        123
                    ],
                    "jsdoctags": [
                        {
                            "name": "contentId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "increment",
                            "type": "number",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                }
            ],
            "deprecated": false,
            "deprecationMessage": "",
            "description": "",
            "rawdescription": "\n",
            "sourceCode": "import { Injectable } from '@angular/core';\nimport { Observable, switchMap, take, tap, Subject } from 'rxjs';\nimport { ApiJSON } from '../API/LOCAL/api-json';\nimport { Comment } from '../../models/Comment';\nimport { Content } from 'src/models/Content';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class CommentService {\n  private readonly resource = 'comments';\n\n  constructor(private api: ApiJSON) {}\n\n  private commentAdded = new Subject<{contentId: string, increment: number}>();\n commentAdded$ = this.commentAdded.asObservable();\n\n\n  /**\n   * Récupère les commentaires d'un contenu\n   */\n  getComments(contentId: string): Observable<Comment[]> {\n    return this.api.getAll<Comment>(this.resource, {\n      contentId,\n      _sort: 'createdAt:desc'\n    });\n  }\n\n  /**\n   * Ajoute un nouveau commentaire\n   */\n  addComment(comment: Omit<Comment, 'id' | 'createdAt' | 'likes'>): Observable<Comment> {\n  const newComment = {\n    ...comment,\n    likes: 0,\n    createdAt: new Date().toISOString(),\n    replies: []\n  };\n  \n  return this.api.create<Comment>('comments', newComment).pipe(  // Utilisez newComment ici\n    tap(createdComment => {\n      this.commentAdded.next({  // Utilisez .next() directement sur le Subject\n        contentId: comment.contentId, \n        increment: 1\n      });\n      this.updateContentCommentCount(comment.contentId, 1);\n    })\n  );\n}\n\n  private updateContentCommentCount(contentId: string, increment: number): void {\n  this.api.getById<Content>('contents', contentId).pipe(\n    take(1),\n    switchMap(content => {\n      const newCount = (content.commentCount || 0) + increment;\n      return this.api.update<Content>('contents', contentId, {\n        commentCount: newCount\n      });\n    })\n  ).subscribe({\n    next: () => console.log('Comment count updated'),\n    error: (err) => console.error('Failed to update comment count', err)\n  });\n}\n  /**\n   * Met à jour un commentaire existant\n   */\n  updateComment(commentId: string, updates: Partial<Comment>): Observable<Comment> {\n    return this.api.patch<Comment>(this.resource, commentId, {\n      ...updates,\n      updatedAt: new Date().toISOString()\n    });\n  }\n\n  /**\n   * Supprime un commentaire\n   */\n  deleteComment(commentId: string): Observable<void> {\n    return this.api.delete(this.resource, commentId);\n  }\n\n  /**\n   * Like/Unlike un commentaire\n   */\n/**\n * Like/Unlike un commentaire\n */\ntoggleLike(commentId: string, userId: string, isLiked: boolean): Observable<Comment> {\n  // D'abord, récupérer le commentaire actuel\n  return this.api.getById<Comment>(this.resource, commentId).pipe(\n    switchMap(comment => {\n      // Mettre à jour le nombre de likes localement\n      const updatedLikes = isLiked ? comment.likes - 1 : comment.likes + 1;\n      \n      // Mettre à jour le commentaire avec le nouveau nombre de likes\n      return this.api.patch<Comment>(this.resource, commentId, {\n        likes: updatedLikes\n      });\n    })\n  );\n}\n}",
            "constructorObj": {
                "name": "constructor",
                "description": "",
                "deprecated": false,
                "deprecationMessage": "",
                "args": [
                    {
                        "name": "api",
                        "type": "ApiJSON",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    }
                ],
                "line": 12,
                "jsdoctags": [
                    {
                        "name": "api",
                        "type": "ApiJSON",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            },
            "extends": [],
            "type": "injectable"
        },
        {
            "name": "CreationService",
            "id": "injectable-CreationService-d492bce28eda2ca08c5ab30b324c0f3fd4a934990dbee7a29bc9cbd5ede3131f881b995bd84280778777eb9308c68df2c75b13c055fd5d4ba2582698aadb3752",
            "file": "src/services/CREATION/creation-service.ts",
            "properties": [
                {
                    "name": "challengeResource",
                    "defaultValue": "'challenges'",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 12,
                    "modifierKind": [
                        123,
                        148
                    ]
                },
                {
                    "name": "contentResource",
                    "defaultValue": "'contents'",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 11,
                    "modifierKind": [
                        123,
                        148
                    ]
                },
                {
                    "name": "newContent$",
                    "defaultValue": "this.newContentSubject.asObservable()",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 15
                },
                {
                    "name": "newContentSubject",
                    "defaultValue": "new BehaviorSubject<Content | null>(null)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 14,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "uploadResource",
                    "defaultValue": "'api/upload'",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 13,
                    "modifierKind": [
                        123,
                        148
                    ]
                }
            ],
            "methods": [
                {
                    "name": "createChallenge",
                    "args": [
                        {
                            "name": "challengeData",
                            "type": "Omit<Challenge | \"id\" | \"created_at\" | \"is_active\">",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Observable<Challenge>",
                    "typeParameters": [],
                    "line": 231,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "challengeData",
                            "type": "Omit<Challenge | \"id\" | \"created_at\" | \"is_active\">",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "createChallengeWithCoverImage",
                    "args": [
                        {
                            "name": "coverImage",
                            "type": "File",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "challengeData",
                            "type": "Omit<Challenge | \"id\" | \"created_at\" | \"is_active\" | \"cover_image_url\">",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "progressCallback",
                            "type": "function",
                            "optional": true,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "function": [
                                {
                                    "name": "progress",
                                    "type": "number",
                                    "optional": false,
                                    "dotDotDotToken": false,
                                    "deprecated": false,
                                    "deprecationMessage": ""
                                }
                            ]
                        }
                    ],
                    "optional": false,
                    "returnType": "Observable<Challenge>",
                    "typeParameters": [],
                    "line": 240,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "coverImage",
                            "type": "File",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "challengeData",
                            "type": "Omit<Challenge | \"id\" | \"created_at\" | \"is_active\" | \"cover_image_url\">",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "progressCallback",
                            "type": "function",
                            "optional": true,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "function": [
                                {
                                    "name": "progress",
                                    "type": "number",
                                    "optional": false,
                                    "dotDotDotToken": false,
                                    "deprecated": false,
                                    "deprecationMessage": ""
                                }
                            ],
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "createContentWithFile",
                    "args": [
                        {
                            "name": "file",
                            "type": "File",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "metadata",
                            "type": "literal type",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "progressCallback",
                            "type": "function",
                            "optional": true,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "function": [
                                {
                                    "name": "progress",
                                    "type": "number",
                                    "optional": false,
                                    "dotDotDotToken": false,
                                    "deprecated": false,
                                    "deprecationMessage": ""
                                }
                            ]
                        }
                    ],
                    "optional": false,
                    "returnType": "Observable<Content>",
                    "typeParameters": [],
                    "line": 23,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "file",
                            "type": "File",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "metadata",
                            "type": "literal type",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "progressCallback",
                            "type": "function",
                            "optional": true,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "function": [
                                {
                                    "name": "progress",
                                    "type": "number",
                                    "optional": false,
                                    "dotDotDotToken": false,
                                    "deprecated": false,
                                    "deprecationMessage": ""
                                }
                            ],
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "extractTags",
                    "args": [
                        {
                            "name": "text",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "string[]",
                    "typeParameters": [],
                    "line": 88,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        123
                    ],
                    "jsdoctags": [
                        {
                            "name": "text",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "getActiveChallenges",
                    "args": [],
                    "optional": false,
                    "returnType": "Observable<Challenge[]>",
                    "typeParameters": [],
                    "line": 292,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nRécupère la liste des défis actifs\n",
                    "description": "<p>Récupère la liste des défis actifs</p>\n",
                    "jsdoctags": [
                        {
                            "tagName": {
                                "pos": 9514,
                                "end": 9521,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "returns"
                            },
                            "comment": "<p>Observable&lt;Challenge[]&gt; Liste des défis actifs</p>\n"
                        }
                    ]
                },
                {
                    "name": "getChallengeById",
                    "args": [
                        {
                            "name": "id",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Observable<Challenge>",
                    "typeParameters": [],
                    "line": 318,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nRécupère un défi par son ID\n",
                    "description": "<p>Récupère un défi par son ID</p>\n",
                    "jsdoctags": [
                        {
                            "name": {
                                "pos": 10172,
                                "end": 10174,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "id"
                            },
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "pos": 10166,
                                "end": 10171,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "param"
                            },
                            "comment": "<p>ID du défi à récupérer</p>\n"
                        },
                        {
                            "tagName": {
                                "pos": 10204,
                                "end": 10211,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "returns"
                            },
                            "comment": "<p>Observable<Challenge> Le défi correspondant à l&#39;ID</p>\n"
                        }
                    ]
                },
                {
                    "name": "getChallengesByCreator",
                    "args": [
                        {
                            "name": "creatorId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Observable<Challenge[]>",
                    "typeParameters": [],
                    "line": 327,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nRécupère tous les défis créés par un utilisateur spécifique\n",
                    "description": "<p>Récupère tous les défis créés par un utilisateur spécifique</p>\n",
                    "jsdoctags": [
                        {
                            "name": {
                                "pos": 10481,
                                "end": 10490,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "creatorId"
                            },
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "pos": 10475,
                                "end": 10480,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "param"
                            },
                            "comment": "<p>ID du créateur des défis</p>\n"
                        },
                        {
                            "tagName": {
                                "pos": 10522,
                                "end": 10529,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "returns"
                            },
                            "comment": "<p>Observable&lt;Challenge[]&gt; Liste des défis créés par l&#39;utilisateur</p>\n"
                        }
                    ]
                },
                {
                    "name": "getContentById",
                    "args": [
                        {
                            "name": "id",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Observable<Content>",
                    "typeParameters": [],
                    "line": 120,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "id",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "getFeedContents",
                    "args": [
                        {
                            "name": "page",
                            "type": "number",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "defaultValue": "1"
                        },
                        {
                            "name": "limit",
                            "type": "number",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "defaultValue": "10"
                        }
                    ],
                    "optional": false,
                    "returnType": "Observable<Content[]>",
                    "typeParameters": [],
                    "line": 130,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nRécupère tous les contenus publiés pour le fil d'actualité global\n",
                    "description": "<p>Récupère tous les contenus publiés pour le fil d&#39;actualité global</p>\n",
                    "jsdoctags": [
                        {
                            "name": {
                                "pos": 3919,
                                "end": 3923,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "page"
                            },
                            "type": "number",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "defaultValue": "1",
                            "tagName": {
                                "pos": 3913,
                                "end": 3918,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "param"
                            },
                            "comment": "<p>Le numéro de la page (commence à 1 ou 0 selon ton API)</p>\n"
                        },
                        {
                            "name": {
                                "pos": 3989,
                                "end": 3994,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "limit"
                            },
                            "type": "number",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "defaultValue": "10",
                            "tagName": {
                                "pos": 3983,
                                "end": 3988,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "param"
                            },
                            "comment": "<p>Le nombre de contenus à charger par appel</p>\n"
                        },
                        {
                            "tagName": {
                                "pos": 4041,
                                "end": 4048,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "returns"
                            },
                            "comment": "<p>Observable&lt;Content[]&gt;</p>\n"
                        }
                    ]
                },
                {
                    "name": "getMostPopularActiveChallenge",
                    "args": [],
                    "optional": false,
                    "returnType": "Observable<Challenge | null>",
                    "typeParameters": [],
                    "line": 339,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nRécupère le challenge actif avec le plus grand nombre de participants\n",
                    "description": "<p>Récupère le challenge actif avec le plus grand nombre de participants</p>\n",
                    "jsdoctags": [
                        {
                            "tagName": {
                                "pos": 10912,
                                "end": 10919,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "returns"
                            },
                            "comment": "<p>Observable&lt;Challenge | null&gt; Le challenge actif le plus populaire ou null si aucun challenge actif</p>\n"
                        }
                    ]
                },
                {
                    "name": "getUserContents",
                    "args": [
                        {
                            "name": "userId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Observable<Content[]>",
                    "typeParameters": [],
                    "line": 99,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nRécupère les contenus d'un utilisateur spécifique\n",
                    "description": "<p>Récupère les contenus d&#39;un utilisateur spécifique</p>\n",
                    "jsdoctags": [
                        {
                            "name": {
                                "pos": 2832,
                                "end": 2838,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "userId"
                            },
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "pos": 2826,
                                "end": 2831,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "param"
                            },
                            "comment": "<p>ID de l&#39;utilisateur</p>\n"
                        },
                        {
                            "tagName": {
                                "pos": 2863,
                                "end": 2870,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "returns"
                            },
                            "comment": "<p>Observable&lt;Content[]&gt; Liste des contenus de l&#39;utilisateur triés par date de création décroissante</p>\n"
                        }
                    ]
                },
                {
                    "name": "hasLikedContent",
                    "args": [
                        {
                            "name": "contentId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "userId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Observable<boolean>",
                    "typeParameters": [],
                    "line": 218,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nVérifie si un utilisateur a aimé un contenu\n",
                    "description": "<p>Vérifie si un utilisateur a aimé un contenu</p>\n",
                    "jsdoctags": [
                        {
                            "name": "contentId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "userId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "likeContent",
                    "args": [
                        {
                            "name": "contentId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "userId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Observable<Content>",
                    "typeParameters": [],
                    "line": 158,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nAjoute un like à un contenu\n",
                    "description": "<p>Ajoute un like à un contenu</p>\n",
                    "jsdoctags": [
                        {
                            "name": "contentId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "userId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "unlikeContent",
                    "args": [
                        {
                            "name": "contentId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "userId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Observable<Content>",
                    "typeParameters": [],
                    "line": 199,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nRetire un like d'un contenu\n",
                    "description": "<p>Retire un like d&#39;un contenu</p>\n",
                    "jsdoctags": [
                        {
                            "name": "contentId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "userId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "updateChallenge",
                    "args": [
                        {
                            "name": "id",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "updates",
                            "type": "Partial<Challenge>",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Observable<Challenge>",
                    "typeParameters": [],
                    "line": 309,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nDésactive un défi\n",
                    "description": "<p>Désactive un défi</p>\n",
                    "jsdoctags": [
                        {
                            "name": {
                                "pos": 9878,
                                "end": 9880,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "id"
                            },
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "pos": 9872,
                                "end": 9877,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "param"
                            },
                            "comment": "<p>ID du défi à désactiver</p>\n"
                        },
                        {
                            "name": "updates",
                            "type": "Partial<Challenge>",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "tagName": {
                                "pos": 9909,
                                "end": 9916,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "returns"
                            },
                            "comment": "<p>Observable<Challenge> Le défi mis à jour</p>\n"
                        }
                    ]
                }
            ],
            "deprecated": false,
            "deprecationMessage": "",
            "description": "",
            "rawdescription": "\n",
            "sourceCode": "import { Injectable } from '@angular/core';\nimport { BehaviorSubject, catchError, EMPTY, map, Observable, of, switchMap, tap, throwError } from 'rxjs';\nimport { ApiJSON } from '../API/LOCAL/api-json';\nimport { Content, ContentSource, ContentStatus } from '../../models/Content';\nimport { Challenge } from '../../models/Challenge';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class CreationService {\n  private readonly contentResource = 'contents';\n  private readonly challengeResource = 'challenges';\n  private readonly uploadResource = 'api/upload'\n  private newContentSubject = new BehaviorSubject<Content | null>(null);\nnewContent$ = this.newContentSubject.asObservable();\n\n  constructor(private api: ApiJSON) {}\n\n  // =====================\n  // MÉTHODES POUR LES CONTENUS\n  // =====================\n// Dans la méthode createContentWithFile, après le succès de la création\ncreateContentWithFile(\n  file: File,\n  metadata: {\n    title: string;\n    userId: string;\n    description?: string;\n    isPublic: boolean;\n    allowDownloads: boolean;\n    allowComments: boolean;\n    commentIds:[],\n    likedIds:[],\n    challengeId?: string;\n    source: ContentSource;\n  },\n  progressCallback?: (progress: number) => void\n): Observable<Content> {\n\n \n \n  return this.api.upload<{ file: { path: string } }>(\n    this.uploadResource, \n    file, \n    'file',\n    !!progressCallback\n  ).pipe(\n    switchMap((event: any) => {\n  // Handle progress events\n  if (event.type) {\n    if (progressCallback && event.loaded !== undefined && event.total) {\n      const progress = Math.round((100 * event.loaded) / event.total);\n      progressCallback(progress);\n    }\n    // Return an empty observable that doesn't emit any values\n    return EMPTY;\n  }\n\n  // Handle the final response\n  const uploadResponse = event.body || event;\n  \n  // Create content data\n  const contentData: Omit<Content, 'id'> = {\n    ...metadata,\n    fileUrl: uploadResponse.file.path,\n    mimeType: file.type,\n    fileSize: file.size,\n    status: ContentStatus.PUBLISHED,\n    challengeId: metadata.challengeId || '',\n    viewCount: 0,\n    likeCount: 0,\n    commentCount: 0,\n    downloadCount: 0,\n    createdAt: new Date().toISOString(),\n    tags: this.extractTags(metadata.description || '')\n  };\n\n  // Return the API call that creates the content\n  return this.api.create<Content>(this.contentResource, contentData);\n}),\n    catchError(error => {\n      console.error('Erreur lors de la création du contenu:', error);\n      return throwError(() => error);\n    })\n  );\n}\n  // Extrait les tags du texte (ex: #tag)\n  private extractTags(text: string): string[] {\n    const tagRegex = /#(\\w+)/g;\n    const matches = text.match(tagRegex) || [];\n    return matches.map(tag => tag.substring(1)); // Enlève le #\n  }\n\n  /**\n * Récupère les contenus d'un utilisateur spécifique\n * @param userId ID de l'utilisateur\n * @returns Observable<Content[]> Liste des contenus de l'utilisateur triés par date de création décroissante\n */\ngetUserContents(userId: string): Observable<Content[]> {\n  return this.api.getAll<Content>(this.contentResource).pipe(  // Supprimez les crochets ici\n    map((contents: Content[]) => {  // Typez explicitement le paramètre contents\n      // Filtre les contenus par userId\n      const filteredContents = contents.filter(content => \n        content.userId === userId\n      );\n      \n      // Trie par date de création décroissante\n      return filteredContents.sort((a, b) => \n        new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()\n      );\n    }),\n    catchError(error => {\n      console.error('Erreur lors de la récupération des contenus:', error);\n      return of([]); // Retourne un tableau vide en cas d'erreur\n    })\n  );\n}\n\n\ngetContentById(id: string): Observable<Content> {\n  return this.api.getById<Content>(this.contentResource, id);\n}\n\n/**\n * Récupère tous les contenus publiés pour le fil d'actualité global\n * @param page Le numéro de la page (commence à 1 ou 0 selon ton API)\n * @param limit Le nombre de contenus à charger par appel\n * @returns Observable<Content[]>\n */\ngetFeedContents(page: number = 1, limit: number = 10): Observable<Content[]> {\n  const params = {\n    'status': ContentStatus.PUBLISHED, // Sécurité : on ne prend que le publier\n    '_sort': 'createdAt:desc',         // Plus récent en premier\n    '_page': page.toString(),          // Pagination\n    '_limit': limit.toString()         // Limitation\n  };\n\n  return this.api.getAll<Content>(this.contentResource, params).pipe(\n    map(contents => contents.map(content => ({\n      ...content,\n      // Optionnel : on peut forcer la sécurisation de l'URL ici si besoin\n      safeUrl: content.fileUrl \n    }))),\n    catchError(error => {\n      console.error('Erreur lors de la récupération du flux:', error);\n      return throwError(() => new Error('Impossible de charger le fil d\\'actualité.'));\n    })\n  );\n}\n\n  // Dans creation-service.ts\n\n// ...\n\n  /**\n   * Ajoute un like à un contenu\n   */\n likeContent(contentId: string, userId: string): Observable<Content> {\n  console.log('likeContent appelé avec:', { contentId, userId });\n  \n  return this.api.getById<Content>(this.contentResource, contentId).pipe(\n    tap(content => console.log('Contenu récupéré:', content)),\n    switchMap(content => {\n      const currentLikes = [...(content.likedIds || [])];\n      console.log('Likes actuels:', currentLikes);\n      \n      const userHasLiked = currentLikes.includes(userId);\n      console.log('L\\'utilisateur a déjà aimé?', userHasLiked);\n      \n      const updatedLikes = userHasLiked\n        ? currentLikes.filter(id => id !== userId)\n        : [...currentLikes, userId];\n      \n      console.log('Nouveaux likes:', updatedLikes);\n      \n      return this.api.patch<Content>(this.contentResource, contentId, {\n        likedIds: updatedLikes,\n        likeCount: updatedLikes.length\n      }).pipe(\n        tap(updatedContent => console.log('Contenu mis à jour avec succès:', updatedContent))\n      );\n    }),\n    catchError(error => {\n      console.error('Erreur complète:', {\n        error,\n        message: error.message,\n        status: error.status,\n        url: error.url,\n        headers: error.headers\n      });\n      return throwError(() => new Error('Impossible de mettre à jour le like. Veuillez réessayer.'));\n    })\n  );\n}\n\n  /**\n   * Retire un like d'un contenu\n   */\n  unlikeContent(contentId: string, userId: string): Observable<Content> {\n    return this.api.getById<Content>(this.contentResource, contentId).pipe(\n      switchMap(content => {\n        const updatedLikes = (content.likedIds || []).filter(id => id !== userId);\n        return this.api.patch<Content>(this.contentResource, contentId, {\n          likedIds: updatedLikes,\n          likeCount: updatedLikes.length\n        });\n      }),\n      catchError(error => {\n        console.error('Erreur lors de la suppression du like:', error);\n        return throwError(() => error);\n      })\n    );\n  }\n\n  /**\n   * Vérifie si un utilisateur a aimé un contenu\n   */\n  hasLikedContent(contentId: string, userId: string): Observable<boolean> {\n    return this.api.getById<Content>(this.contentResource, contentId).pipe(\n      map(content => (content.likedIds || []).includes(userId)),\n      catchError(error => {\n        console.error('Erreur lors de la vérification du like:', error);\n        return of(false);\n      })\n    );\n  }\n  // =====================\n  // MÉTHODES POUR LES DÉFIS\n  // =====================\n\n  createChallenge(challengeData: Omit<Challenge, 'id' | 'created_at' | 'is_active'>): Observable<Challenge> {\n    const challenge = {\n      ...challengeData,\n      created_at: new Date(Date.now()),\n      is_active: true\n    };\n    return this.api.create<Challenge>(this.challengeResource, challenge);\n  }\n\ncreateChallengeWithCoverImage(\n  coverImage: File,\n  challengeData: Omit<Challenge, 'id' | 'created_at' | 'is_active' | 'cover_image_url'>,\n  progressCallback?: (progress: number) => void\n): Observable<Challenge> {\n  return new Observable(observer => {\n    this.api.upload<{ file: { path: string } }>(\n      this.uploadResource,\n      coverImage,  // Envoyer directement le fichier\n      'file',      // Nom du champ pour le fichier\n      !!progressCallback\n    ).subscribe({\n      next: (event: any) => {\n        if (event.type === 1 && event.loaded && event.total && progressCallback) {\n          const progress = Math.round((100 * event.loaded) / event.total);\n          progressCallback(progress);\n        } else if (event.type === 4) {\n          // Gestion de la réponse\n          let coverImageUrl: string;\n          \n          if (typeof event.body === 'string') {\n            coverImageUrl = event.body;\n          } else if (event.body?.file?.path) {\n            coverImageUrl = event.body.file.path;\n          } else if (event.body?.path) {\n            coverImageUrl = event.body.path;\n          } else {\n            observer.error(new Error('Format de réponse inattendu'));\n            return;\n          }\n\n          // Créer le challenge avec l'URL de l'image\n          const challengeWithImage = {\n            ...challengeData,\n            cover_image_url: coverImageUrl\n          };\n\n          this.api.create<Challenge>(this.challengeResource, challengeWithImage)\n            .subscribe({\n              next: (challenge) => observer.next(challenge),\n              error: (err) => observer.error(err)\n            });\n        }\n      },\n      error: (err) => observer.error(err)\n    });\n  });\n}\n  /**\n * Récupère la liste des défis actifs\n * @returns Observable<Challenge[]> Liste des défis actifs\n */\ngetActiveChallenges(): Observable<Challenge[]> {\n  return this.api.getAll<Challenge>(this.challengeResource, {\n    is_active: 'true',\n    _sort: 'created_at',\n    _order: 'desc'\n  });\n}\n\n  // =====================\n  // MÉTHODES UTILITAIRES\n  // =====================\n\n  /**\n * Désactive un défi\n * @param id ID du défi à désactiver\n * @returns Observable<Challenge> Le défi mis à jour\n */\nupdateChallenge(id: string, updates: Partial<Challenge>): Observable<Challenge> {\n  return this.api.update<Challenge>(this.challengeResource, id, updates);\n}\n\n  /**\n   * Récupère un défi par son ID\n   * @param id ID du défi à récupérer\n   * @returns Observable<Challenge> Le défi correspondant à l'ID\n   */\n  getChallengeById(id: string): Observable<Challenge> {\n    return this.api.getById<Challenge>(this.challengeResource, id);\n  }\n\n  /**\n   * Récupère tous les défis créés par un utilisateur spécifique\n   * @param creatorId ID du créateur des défis\n   * @returns Observable<Challenge[]> Liste des défis créés par l'utilisateur\n   */\n  getChallengesByCreator(creatorId: string): Observable<Challenge[]> {\n    return this.api.getAll<Challenge>(this.challengeResource, {\n      creator_id: creatorId,\n      _sort: 'created_at',\n      _order: 'desc'\n    });\n  }\n\n  /**\n   * Récupère le challenge actif avec le plus grand nombre de participants\n   * @returns Observable<Challenge | null> Le challenge actif le plus populaire ou null si aucun challenge actif\n   */\n  getMostPopularActiveChallenge(): Observable<Challenge | null> {\n    return this.getActiveChallenges().pipe(\n      map(challenges => {\n        if (!challenges || challenges.length === 0) {\n          return null;\n        }\n        \n        // Trier les challenges par participants_count décroissant\n        const sortedChallenges = [...challenges].sort((a, b) => {\n          const aCount = a.participants_count || 0;\n          const bCount = b.participants_count || 0;\n          return bCount - aCount;\n        });\n\n        // Retourner le premier élément (celui avec le plus de participants)\n        return sortedChallenges[0];\n      }),\n      catchError(error => {\n        console.error('Erreur lors de la récupération du challenge le plus populaire:', error);\n        return of(null);\n      })\n    );\n  }\n\n}",
            "constructorObj": {
                "name": "constructor",
                "description": "",
                "deprecated": false,
                "deprecationMessage": "",
                "args": [
                    {
                        "name": "api",
                        "type": "ApiJSON",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    }
                ],
                "line": 15,
                "jsdoctags": [
                    {
                        "name": "api",
                        "type": "ApiJSON",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            },
            "extends": [],
            "type": "injectable"
        },
        {
            "name": "MediaService",
            "id": "injectable-MediaService-5909d658528480c286716e9d3da150ba1f52375c76cca5a85b1e4efd5f083acf9b50e985e3d7ef933bdc7072b214ce3d628de92d4ffc4c6ea9856c894089e150",
            "file": "src/services/MEDIA/media.ts",
            "properties": [],
            "methods": [
                {
                    "name": "getImageURL",
                    "args": [
                        {
                            "name": "path",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Observable<string>",
                    "typeParameters": [],
                    "line": 13,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "path",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "revokeImageURL",
                    "args": [
                        {
                            "name": "url",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 27,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "url",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                }
            ],
            "deprecated": false,
            "deprecationMessage": "",
            "description": "",
            "rawdescription": "\n",
            "sourceCode": "import { Injectable } from '@angular/core';\nimport { ApiJSON } from '../API/LOCAL/api-json';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class MediaService {\n  constructor(private apiJSON: ApiJSON) {}\n\n  getImageURL(path: string): Observable<string> {\n    if (!path) {\n      return new Observable(subscriber => {\n        subscriber.error(new Error('Image path is required'));\n      });\n    }\n\n    return this.apiJSON.getFile(path).pipe(\n      map((blob: Blob) => {\n        return URL.createObjectURL(blob);\n      })\n    );\n  }\n\n  revokeImageURL(url: string): void {\n    if (url && url.startsWith('blob:')) {\n      URL.revokeObjectURL(url);\n    }\n  }\n}",
            "constructorObj": {
                "name": "constructor",
                "description": "",
                "deprecated": false,
                "deprecationMessage": "",
                "args": [
                    {
                        "name": "apiJSON",
                        "type": "ApiJSON",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    }
                ],
                "line": 10,
                "jsdoctags": [
                    {
                        "name": "apiJSON",
                        "type": "ApiJSON",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            },
            "extends": [],
            "type": "injectable"
        },
        {
            "name": "ProfileService",
            "id": "injectable-ProfileService-d78110618bdb742baff16ae63bf81d99fa5d29ac4d30dd5b77b8b09dfe4f96b2c4a77b0d67f1c99a8261637f2f79652d33cac412479e06b4e5cc09c7d3307b25",
            "file": "src/services/PROFILE_SERVICE/profile-service.ts",
            "properties": [
                {
                    "name": "resource",
                    "defaultValue": "'profiles'",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 12,
                    "modifierKind": [
                        123
                    ]
                }
            ],
            "methods": [
                {
                    "name": "createProfile",
                    "args": [
                        {
                            "name": "profile",
                            "type": "Omit<UserProfile | id>",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Observable<UserProfile>",
                    "typeParameters": [],
                    "line": 20,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "profile",
                            "type": "Omit<UserProfile | id>",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "deleteProfile",
                    "args": [
                        {
                            "name": "id",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Observable<void>",
                    "typeParameters": [],
                    "line": 47,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "id",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "followProfile",
                    "args": [
                        {
                            "name": "userId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "profileIdToFollow",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Promise<any>",
                    "typeParameters": [],
                    "line": 56,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        134
                    ],
                    "jsdoctags": [
                        {
                            "name": "userId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "profileIdToFollow",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "getProfileById",
                    "args": [
                        {
                            "name": "id",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Observable<UserProfile>",
                    "typeParameters": [],
                    "line": 31,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "id",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "getProfiles",
                    "args": [],
                    "optional": false,
                    "returnType": "Observable<UserProfile[]>",
                    "typeParameters": [],
                    "line": 27,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "getTopArtists",
                    "args": [
                        {
                            "name": "limit",
                            "type": "number",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "defaultValue": "12"
                        }
                    ],
                    "optional": false,
                    "returnType": "Observable<UserProfile[]>",
                    "typeParameters": [],
                    "line": 126,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nRécupère les 12 profils d'artistes avec le plus grand nombre de fans\n",
                    "description": "<p>Récupère les 12 profils d&#39;artistes avec le plus grand nombre de fans</p>\n",
                    "jsdoctags": [
                        {
                            "name": "limit",
                            "type": "number",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "defaultValue": "12",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "tagName": {
                                "pos": 4216,
                                "end": 4223,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "returns"
                            },
                            "comment": "<p>Un Observable contenant un tableau des 12 profils d&#39;artistes les plus populaires</p>\n"
                        }
                    ]
                },
                {
                    "name": "getTopCreators",
                    "args": [
                        {
                            "name": "limit",
                            "type": "number",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "defaultValue": "12"
                        }
                    ],
                    "optional": false,
                    "returnType": "Observable<UserProfile[]>",
                    "typeParameters": [],
                    "line": 149,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nRécupère les profils de créateurs avec le plus grand nombre de publications\n",
                    "description": "<p>Récupère les profils de créateurs avec le plus grand nombre de publications</p>\n",
                    "jsdoctags": [
                        {
                            "name": {
                                "pos": 5009,
                                "end": 5014,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "limit"
                            },
                            "type": "number",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "defaultValue": "12",
                            "tagName": {
                                "pos": 5003,
                                "end": 5008,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "param"
                            },
                            "comment": "<p>Nombre maximum de créateurs à retourner (par défaut 12)</p>\n"
                        },
                        {
                            "tagName": {
                                "pos": 5077,
                                "end": 5084,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "returns"
                            },
                            "comment": "<p>Un Observable contenant un tableau des profils de créateurs les plus actifs</p>\n"
                        }
                    ]
                },
                {
                    "name": "getTopFans",
                    "args": [
                        {
                            "name": "limit",
                            "type": "number",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "defaultValue": "10"
                        }
                    ],
                    "optional": false,
                    "returnType": "Observable<UserProfile[]>",
                    "typeParameters": [],
                    "line": 172,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nRécupère les meilleurs fans basés sur plusieurs critères\n",
                    "description": "<p>Récupère les meilleurs fans basés sur plusieurs critères</p>\n",
                    "jsdoctags": [
                        {
                            "name": {
                                "pos": 5861,
                                "end": 5866,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "limit"
                            },
                            "type": "number",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "defaultValue": "10",
                            "tagName": {
                                "pos": 5855,
                                "end": 5860,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "param"
                            },
                            "comment": "<p>Nombre maximum de fans à retourner (par défaut 10)</p>\n"
                        },
                        {
                            "tagName": {
                                "pos": 5922,
                                "end": 5929,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "returns"
                            },
                            "comment": "<p>Un Observable contenant un tableau des profils des meilleurs fans</p>\n"
                        }
                    ]
                },
                {
                    "name": "isFollowing",
                    "args": [
                        {
                            "name": "userId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "profileId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Observable<boolean>",
                    "typeParameters": [],
                    "line": 206,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "userId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "profileId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "unfollowProfile",
                    "args": [
                        {
                            "name": "userId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "profileIdToUnfollow",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Promise<any>",
                    "typeParameters": [],
                    "line": 91,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        134
                    ],
                    "jsdoctags": [
                        {
                            "name": "userId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "profileIdToUnfollow",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "updateProfile",
                    "args": [
                        {
                            "name": "id",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "updates",
                            "type": "Partial<UserProfile>",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Observable<UserProfile>",
                    "typeParameters": [],
                    "line": 40,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "id",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "updates",
                            "type": "Partial<UserProfile>",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                }
            ],
            "deprecated": false,
            "deprecationMessage": "",
            "description": "",
            "rawdescription": "\n",
            "sourceCode": "import { Injectable } from '@angular/core';\nimport { Observable, of } from 'rxjs';\nimport { map, switchMap } from 'rxjs/operators';\nimport { ApiJSON} from '../API/LOCAL/api-json';\nimport { UserProfile } from '../../models/User';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ProfileService {\n  private resource = 'profiles';\n\n  constructor(private api: ApiJSON) {}\n\n  \n  /* =====================\n     CREATE\n     ===================== */\n  createProfile(profile: Omit<UserProfile, 'id'>): Observable<UserProfile> {\n    return this.api.create<UserProfile>(this.resource, profile);\n  }\n\n  /* =====================\n     READ\n     ===================== */\n  getProfiles(): Observable<UserProfile[]> {\n    return this.api.getAll<UserProfile>(this.resource);\n  }\n\n  getProfileById(id: string): Observable<UserProfile> {\n    return this.api.getById<UserProfile>(this.resource, id);\n  }\n\n\n\n  /* =====================\n     UPDATE\n     ===================== */\n  updateProfile(id: string, updates: Partial<UserProfile>): Observable<UserProfile> {\n    return this.api.update<UserProfile>(this.resource, id, updates);\n  }\n\n  /* =====================\n     DELETE\n     ===================== */\n  deleteProfile(id: string): Observable<void> {\n    return this.api.delete(this.resource, id);\n  }\n\n  /* ====================\n     FOLLOW/UNFOLLOW\n     ==================== */\n  // Dans profile.service.ts\n\nasync followProfile(userId: string, profileIdToFollow: string): Promise<any> {\n  try {\n    // 1. Récupérer l'utilisateur qui suit\n    const user = await this.api.getById<UserProfile>(this.resource, userId).toPromise();\n    if (!user) throw new Error('Utilisateur non trouvé');\n\n    // 2. Récupérer le profil à suivre\n    const profileToFollow = await this.api.getById<UserProfile>(this.resource, profileIdToFollow).toPromise();\n    if (!profileToFollow) throw new Error('Profil à suivre non trouvé');\n\n    const myFollows = Array.isArray(user.myFollows) ? user.myFollows : [];\n    \n    if (!myFollows.includes(profileIdToFollow)) {\n      // 3. Mettre à jour la liste des follows de l'utilisateur\n      user.myFollows = [...myFollows, profileIdToFollow];\n      \n      // 4. Incrémenter le compteur de followers du profil suivi\n      profileToFollow.stats = profileToFollow.stats || { fans: 0, following: 0 };\n      profileToFollow.stats.fans = (profileToFollow.stats.fans || 0) + 1;\n\n      // 5. Mettre à jour les deux profils en parallèle\n      await Promise.all([\n        this.api.update(this.resource, userId, user).toPromise(),\n        this.api.update(this.resource, profileIdToFollow, profileToFollow).toPromise()\n      ]);\n\n      return { user, profile: profileToFollow };\n    }\n    return { user, profile: profileToFollow };\n  } catch (error) {\n    console.error('Erreur followProfile:', error);\n    throw error;\n  }\n}\n\nasync unfollowProfile(userId: string, profileIdToUnfollow: string): Promise<any> {\n  try {\n    // 1. Récupérer l'utilisateur qui se désabonne\n    const user = await this.api.getById<UserProfile>(this.resource, userId).toPromise();\n    if (!user) throw new Error('Utilisateur non trouvé');\n\n    // 2. Récupérer le profil à ne plus suivre\n    const profileToUnfollow = await this.api.getById<UserProfile>(this.resource, profileIdToUnfollow).toPromise();\n    if (!profileToUnfollow) throw new Error('Profil à ne plus suivre non trouvé');\n\n    const myFollows = Array.isArray(user.myFollows) ? user.myFollows : [];\n    user.myFollows = myFollows.filter(id => id !== profileIdToUnfollow);\n    \n    // 3. Décrémenter le compteur de followers du profil\n    if (profileToUnfollow.stats?.fans && profileToUnfollow.stats.fans > 0) {\n      profileToUnfollow.stats.fans -= 1;\n    }\n\n    // 4. Mettre à jour les deux profils en parallèle\n    await Promise.all([\n      this.api.update(this.resource, userId, user).toPromise(),\n      this.api.update(this.resource, profileIdToUnfollow, profileToUnfollow).toPromise()\n    ]);\n\n    return { user, profile: profileToUnfollow };\n  } catch (error) {\n    console.error('Erreur unfollowProfile:', error);\n    throw error;\n  }\n}\n\n  /**\n   * Récupère les 12 profils d'artistes avec le plus grand nombre de fans\n   * @returns Un Observable contenant un tableau des 12 profils d'artistes les plus populaires\n   */\n  getTopArtists(limit: number = 12): Observable<UserProfile[]> {\n    return this.api.getAll<UserProfile>(this.resource).pipe(\n      map(profiles => {\n        // Filtrer pour ne garder que les artistes\n        const artists = profiles.filter(profile => profile.userType === 'artist');\n        \n        // Trier par nombre de fans décroissant\n        return artists.sort((a, b) => {\n          const fansA = a.stats?.fans || 0;\n          const fansB = b.stats?.fans || 0;\n          return fansB - fansA;\n        })\n        // Prendre les 'limit' premiers\n        .slice(0, limit);\n      })\n    );\n  }\n\n  /**\n   * Récupère les profils de créateurs avec le plus grand nombre de publications\n   * @param limit Nombre maximum de créateurs à retourner (par défaut 12)\n   * @returns Un Observable contenant un tableau des profils de créateurs les plus actifs\n   */\n  getTopCreators(limit: number = 12): Observable<UserProfile[]> {\n    return this.api.getAll<UserProfile>(this.resource).pipe(\n      map(profiles => {\n        // Filtrer pour ne garder que les créateurs\n        const creators = profiles.filter(profile => profile.userType === 'creator');\n        \n        // Trier par nombre de publications décroissant\n        return creators.sort((a, b) => {\n          const postsA = a.stats?.posts || 0;\n          const postsB = b.stats?.posts || 0;\n          return postsB - postsA;\n        })\n        // Prendre les 'limit' premiers\n        .slice(0, limit);\n      })\n    );\n  }\n\n  /**\n * Récupère les meilleurs fans basés sur plusieurs critères\n * @param limit Nombre maximum de fans à retourner (par défaut 10)\n * @returns Un Observable contenant un tableau des profils des meilleurs fans\n */\ngetTopFans(limit: number = 10): Observable<UserProfile[]> {\n  return this.api.getAll<UserProfile>(this.resource).pipe(\n    map(profiles => {\n      // Filtrer pour ne garder que les fans (pas les artistes)\n      const fans = profiles.filter(profile => \n        profile.userType === 'fan' || !profile.userType\n      );\n\n      // Trier selon plusieurs critères\n      return fans\n        .map(profile => {\n          // Calculer un score basé sur plusieurs facteurs\n          const followsScore = (profile.myFollows?.length || 0) * 1.5; // Poids plus important pour les follows\n          const votesScore = (profile.stats?.votes || 0) * 1.2; // Poids moyen pour les votes\n          const starsScore = (profile.stats?.stars || 0); // Poids normal pour les étoiles\n          \n          // Score total pondéré\n          const totalScore = followsScore + votesScore + starsScore;\n          \n          return {\n            ...profile,\n            _score: totalScore\n          };\n        })\n        // Trier par score décroissant\n        .sort((a, b) => b._score - a._score)\n        // Prendre les 'limit' premiers\n        .slice(0, limit)\n        // Retirer le score temporaire\n        .map(({ _score, ...profile }) => profile);\n    })\n  );\n}\n\n  isFollowing(userId: string, profileId: string): Observable<boolean> {\n    return this.api.getById<UserProfile>(this.resource, userId).pipe(\n      map(user => {\n        // Assurez-vous que myFollows est un tableau\n      const myFollows = Array.isArray(user.myFollows) ? user.myFollows : [];\n      return myFollows.includes(profileId);\n    })\n  );\n}\n\n}",
            "constructorObj": {
                "name": "constructor",
                "description": "",
                "deprecated": false,
                "deprecationMessage": "",
                "args": [
                    {
                        "name": "api",
                        "type": "ApiJSON",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    }
                ],
                "line": 12,
                "jsdoctags": [
                    {
                        "name": "api",
                        "type": "ApiJSON",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            },
            "extends": [],
            "type": "injectable"
        },
        {
            "name": "SubscriptionService",
            "id": "injectable-SubscriptionService-aee387985dc4b3129afa8ecbea6db6fbc8e0ce9e61cbda94efd0cbaaea6b4dc96aa41e2b209da036a2ce763760b974a720656f19abbc6f337aee0ecee22904d6",
            "file": "src/services/SUBSCRIPTION/subscription-service.ts",
            "properties": [
                {
                    "name": "resource",
                    "defaultValue": "'plans'",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 10,
                    "modifierKind": [
                        123,
                        148
                    ]
                }
            ],
            "methods": [
                {
                    "name": "getAvailablePlans",
                    "args": [],
                    "optional": false,
                    "returnType": "Observable<Plan[]>",
                    "typeParameters": [],
                    "line": 15,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "getPlanById",
                    "args": [
                        {
                            "name": "planId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Observable<Plan>",
                    "typeParameters": [],
                    "line": 28,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "planId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "updateUserPlan",
                    "args": [
                        {
                            "name": "userId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "planId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Observable<any>",
                    "typeParameters": [],
                    "line": 20,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "userId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "planId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                }
            ],
            "deprecated": false,
            "deprecationMessage": "",
            "description": "",
            "rawdescription": "\n",
            "sourceCode": "import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { ApiJSON } from '../API/LOCAL/api-json';\nimport { Plan } from 'src/models/Plan';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class SubscriptionService {\n  private readonly resource = 'plans'; // Même ressource que dans votre API\n\n  constructor(private api: ApiJSON) {}\n\n  // Récupérer tous les plans depuis l'API\n  getAvailablePlans(): Observable<Plan[]> {\n    return this.api.getAll<Plan>(this.resource);\n  }\n\n  // Mettre à jour le plan de l'utilisateur\n  updateUserPlan(userId: string, planId: string): Observable<any> {\n    return this.api.update('users', userId, { \n      myPlan: planId,\n      planUpdatedAt: new Date().toISOString()\n    });\n  }\n\n  // Récupérer un plan spécifique\n  getPlanById(planId: string): Observable<Plan> {\n    return this.api.getById<Plan>(this.resource, planId);\n  }\n}",
            "constructorObj": {
                "name": "constructor",
                "description": "",
                "deprecated": false,
                "deprecationMessage": "",
                "args": [
                    {
                        "name": "api",
                        "type": "ApiJSON",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    }
                ],
                "line": 10,
                "jsdoctags": [
                    {
                        "name": "api",
                        "type": "ApiJSON",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            },
            "extends": [],
            "type": "injectable"
        },
        {
            "name": "UserService",
            "id": "injectable-UserService-61f5aadfcddb3cf22f4b5d350041a6b508f53af21aee982f4a032b1d4f8e3395c1aca72397630eade274c3c898983f5afb06c4eae47b8d79de86935212cc2814",
            "file": "src/services/USER_SERVICE/user-service.ts",
            "properties": [
                {
                    "name": "resource",
                    "defaultValue": "'users'",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 12,
                    "modifierKind": [
                        123,
                        148
                    ]
                }
            ],
            "methods": [
                {
                    "name": "createUser",
                    "args": [
                        {
                            "name": "user",
                            "type": "Omit<User | id>",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Observable<User>",
                    "typeParameters": [],
                    "line": 20,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "user",
                            "type": "Omit<User | id>",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "deleteUser",
                    "args": [
                        {
                            "name": "id",
                            "type": "number",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Observable<void>",
                    "typeParameters": [],
                    "line": 80,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "id",
                            "type": "number",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "getUserByEmail",
                    "args": [
                        {
                            "name": "email",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Observable<User>",
                    "typeParameters": [],
                    "line": 36,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "email",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "getUserById",
                    "args": [
                        {
                            "name": "id",
                            "type": "string | number",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Observable<User>",
                    "typeParameters": [],
                    "line": 32,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "id",
                            "type": "string | number",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "getUsers",
                    "args": [],
                    "optional": false,
                    "returnType": "Observable<User[]>",
                    "typeParameters": [],
                    "line": 28,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "updateRole",
                    "args": [
                        {
                            "name": "id",
                            "type": "number",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "role",
                            "type": "User",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Observable<User>",
                    "typeParameters": [],
                    "line": 67,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "id",
                            "type": "number",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "role",
                            "type": "User",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "updateStatus",
                    "args": [
                        {
                            "name": "id",
                            "type": "number",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "status",
                            "type": "User",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Observable<User>",
                    "typeParameters": [],
                    "line": 60,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "id",
                            "type": "number",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "status",
                            "type": "User",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "updateUser",
                    "args": [
                        {
                            "name": "id",
                            "type": "number",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "data",
                            "type": "Partial<Omit<User, id>>",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Observable<User>",
                    "typeParameters": [],
                    "line": 53,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "id",
                            "type": "number",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "data",
                            "type": "Partial<Omit<User, id>>",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                }
            ],
            "deprecated": false,
            "deprecationMessage": "",
            "description": "",
            "rawdescription": "\n",
            "sourceCode": "import { Injectable } from '@angular/core';\nimport { map, Observable, of, switchMap } from 'rxjs';\nimport { ApiJSON } from '../API/LOCAL/api-json';\nimport { User } from '../../models/User';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class UserService {\n\n  private readonly resource = 'users';\n\n  constructor(private api: ApiJSON) {}\n\n  /* =====================\n     CREATE\n     ===================== */\n\n  createUser(user: Omit<User, 'id'>): Observable<User> {\n    return this.api.create<User>(this.resource, user);\n  }\n\n  /* =====================\n     READ\n     ===================== */\n\n  getUsers(): Observable<User[]> {\n    return this.api.getAll<User>(this.resource);\n  }\n\n  getUserById(id: string | number): Observable<User> {\n    return this.api.getById<User>(this.resource, id);\n  }\n\n  getUserByEmail(email: string): Observable<User> {\n  return this.api\n    .getAll<User>(this.resource, { email })\n    .pipe(\n      map(users => {\n        if (!users.length) {\n          throw new Error('USER_NOT_FOUND');\n        }\n        return users[0];\n      })\n    );\n}\n\n  /* =====================\n     UPDATE\n     ===================== */\n\n  updateUser(\n    id: number,\n    data: Partial<Omit<User, 'id'>>\n  ): Observable<User> {\n    return this.api.update<User>(this.resource, id, data);\n  }\n\n  updateStatus(\n    id: number,\n    status: User['status']\n  ): Observable<User> {\n    return this.api.patch<User>(this.resource, id, { status });\n  }\n\n  updateRole(\n    id: number,\n    role: User['user_type']\n  ): Observable<User> {\n    return this.api.patch<User>(this.resource, id, {\n      user_type: role,\n    });\n  }\n\n  /* =====================\n     DELETE\n     ===================== */\n\n  deleteUser(id: number): Observable<void> {\n    return this.api.delete(this.resource, id);\n  }\n\n  \n\n\n  \n}\n",
            "constructorObj": {
                "name": "constructor",
                "description": "",
                "deprecated": false,
                "deprecationMessage": "",
                "args": [
                    {
                        "name": "api",
                        "type": "ApiJSON",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    }
                ],
                "line": 12,
                "jsdoctags": [
                    {
                        "name": "api",
                        "type": "ApiJSON",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            },
            "extends": [],
            "type": "injectable"
        },
        {
            "name": "VoteService",
            "id": "injectable-VoteService-5ca9e87652461fb2dc940a548ed45b15601a98c74a064964b5bd925d648150e6b10ae10cf4403eb9f5c7f69474c7fce23c4bba71783e7066def28d39e3029ee8",
            "file": "src/services/VOTE_SERVICE/vote-service.ts",
            "properties": [
                {
                    "name": "BASE_URL",
                    "defaultValue": "'votes'",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 12,
                    "modifierKind": [
                        123,
                        148
                    ]
                },
                {
                    "name": "voteRule",
                    "defaultValue": "VoteRule.ONE_VOTE_PER_USER",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "VoteRule",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 13,
                    "modifierKind": [
                        123
                    ]
                }
            ],
            "methods": [
                {
                    "name": "addVote",
                    "args": [
                        {
                            "name": "userId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "contentId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "voteValue",
                            "type": "number",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "defaultValue": "1"
                        }
                    ],
                    "optional": false,
                    "returnType": "Observable<Vote>",
                    "typeParameters": [],
                    "line": 46,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nAjoute un vote pour un contenu\n",
                    "description": "<p>Ajoute un vote pour un contenu</p>\n",
                    "jsdoctags": [
                        {
                            "name": {
                                "pos": 1131,
                                "end": 1137,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "userId"
                            },
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "pos": 1125,
                                "end": 1130,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "param"
                            },
                            "comment": "<p>ID de l&#39;utilisateur qui vote</p>\n"
                        },
                        {
                            "name": {
                                "pos": 1179,
                                "end": 1188,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "contentId"
                            },
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "pos": 1173,
                                "end": 1178,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "param"
                            },
                            "comment": "<p>ID du contenu à voter</p>\n"
                        },
                        {
                            "name": {
                                "pos": 1223,
                                "end": 1232,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "voteValue"
                            },
                            "type": "number",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "defaultValue": "1",
                            "tagName": {
                                "pos": 1217,
                                "end": 1222,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "param"
                            },
                            "comment": "<p>Valeur du vote (par défaut: 1)</p>\n"
                        }
                    ]
                },
                {
                    "name": "getTotalVotesForContent",
                    "args": [
                        {
                            "name": "contentId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Observable<number>",
                    "typeParameters": [],
                    "line": 130,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nCalcule le nombre total de votes pour un contenu\n",
                    "description": "<p>Calcule le nombre total de votes pour un contenu</p>\n",
                    "jsdoctags": [
                        {
                            "name": {
                                "pos": 4264,
                                "end": 4273,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "contentId"
                            },
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "pos": 4258,
                                "end": 4263,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "param"
                            },
                            "comment": "<p>ID du contenu</p>\n"
                        }
                    ]
                },
                {
                    "name": "getUserVoteForContent",
                    "args": [
                        {
                            "name": "userId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "contentId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Observable<Vote | undefined>",
                    "typeParameters": [],
                    "line": 103,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nRécupère le vote d'un utilisateur pour un contenu spécifique\n",
                    "description": "<p>Récupère le vote d&#39;un utilisateur pour un contenu spécifique</p>\n",
                    "jsdoctags": [
                        {
                            "name": {
                                "pos": 3311,
                                "end": 3317,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "userId"
                            },
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "pos": 3305,
                                "end": 3310,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "param"
                            },
                            "comment": "<p>ID de l&#39;utilisateur</p>\n"
                        },
                        {
                            "name": {
                                "pos": 3350,
                                "end": 3359,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "contentId"
                            },
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "pos": 3344,
                                "end": 3349,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "param"
                            },
                            "comment": "<p>ID du contenu</p>\n"
                        }
                    ]
                },
                {
                    "name": "getVoteRule",
                    "args": [],
                    "optional": false,
                    "returnType": "VoteRule",
                    "typeParameters": [],
                    "line": 36,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nRécupère la règle de vote actuelle\n",
                    "description": "<p>Récupère la règle de vote actuelle</p>\n"
                },
                {
                    "name": "getVotesForContent",
                    "args": [
                        {
                            "name": "contentId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Observable<Vote[]>",
                    "typeParameters": [],
                    "line": 94,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nRécupère les votes pour un contenu spécifique\n",
                    "description": "<p>Récupère les votes pour un contenu spécifique</p>\n",
                    "jsdoctags": [
                        {
                            "name": {
                                "pos": 3038,
                                "end": 3047,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "contentId"
                            },
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "pos": 3032,
                                "end": 3037,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "param"
                            },
                            "comment": "<p>ID du contenu</p>\n"
                        }
                    ]
                },
                {
                    "name": "getVotesParams",
                    "args": [
                        {
                            "name": "userId",
                            "type": "string",
                            "optional": true,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "contentId",
                            "type": "string",
                            "optional": true,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "any",
                    "typeParameters": [],
                    "line": 16,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        123
                    ],
                    "jsdoctags": [
                        {
                            "name": "userId",
                            "type": "string",
                            "optional": true,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "contentId",
                            "type": "string",
                            "optional": true,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "removeVote",
                    "args": [
                        {
                            "name": "userId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "contentId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Observable<void>",
                    "typeParameters": [],
                    "line": 114,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nSupprime le vote d'un utilisateur pour un contenu spécifique\n",
                    "description": "<p>Supprime le vote d&#39;un utilisateur pour un contenu spécifique</p>\n",
                    "jsdoctags": [
                        {
                            "name": {
                                "pos": 3710,
                                "end": 3716,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "userId"
                            },
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "pos": 3704,
                                "end": 3709,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "param"
                            },
                            "comment": "<p>ID de l&#39;utilisateur</p>\n"
                        },
                        {
                            "name": {
                                "pos": 3749,
                                "end": 3758,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "contentId"
                            },
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "pos": 3743,
                                "end": 3748,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "param"
                            },
                            "comment": "<p>ID du contenu</p>\n"
                        }
                    ]
                },
                {
                    "name": "setVoteRule",
                    "args": [
                        {
                            "name": "rule",
                            "type": "VoteRule",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 29,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nDéfinit la règle de vote\n",
                    "description": "<p>Définit la règle de vote</p>\n",
                    "jsdoctags": [
                        {
                            "name": {
                                "pos": 833,
                                "end": 837,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "rule"
                            },
                            "type": "VoteRule",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "pos": 827,
                                "end": 832,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "param"
                            },
                            "comment": "<p>Règle de vote (ONE_VOTE_PER_USER ou UNLIMITED_VOTES)</p>\n"
                        }
                    ]
                },
                {
                    "name": "updateVote",
                    "args": [
                        {
                            "name": "voteId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "newVoteValue",
                            "type": "number",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Observable<Vote>",
                    "typeParameters": [],
                    "line": 141,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nMet à jour un vote existant (uniquement en mode MULTIPLE)\n",
                    "description": "<p>Met à jour un vote existant (uniquement en mode MULTIPLE)</p>\n",
                    "jsdoctags": [
                        {
                            "name": {
                                "pos": 4581,
                                "end": 4587,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "voteId"
                            },
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "pos": 4575,
                                "end": 4580,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "param"
                            },
                            "comment": "<p>ID du vote à mettre à jour</p>\n"
                        },
                        {
                            "name": {
                                "pos": 4627,
                                "end": 4639,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "newVoteValue"
                            },
                            "type": "number",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "pos": 4621,
                                "end": 4626,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "param"
                            },
                            "comment": "<p>Nouvelle valeur du vote</p>\n"
                        }
                    ]
                }
            ],
            "deprecated": false,
            "deprecationMessage": "",
            "description": "",
            "rawdescription": "\n",
            "sourceCode": "import { Injectable } from '@angular/core';\nimport { ApiJSON } from '../API/LOCAL/api-json';\nimport { Vote } from '../../models/Vote';\nimport { VoteRule } from '../../models/Challenge';\nimport { Observable, of, throwError } from 'rxjs';\nimport { map, switchMap, catchError } from 'rxjs/operators';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class VoteService {\n  private readonly BASE_URL = 'votes';\n  private voteRule: VoteRule = VoteRule.ONE_VOTE_PER_USER; // Règle de vote par défaut\n  \n  // Type pour les paramètres de requête\n  private getVotesParams(userId?: string, contentId?: string): any {\n    const params: any = {};\n    if (userId) params.userId = userId;\n    if (contentId) params.contentId = contentId;\n    return params;\n  }\n\n  constructor(private api: ApiJSON) {}\n\n  /**\n   * Définit la règle de vote\n   * @param rule Règle de vote (ONE_VOTE_PER_USER ou UNLIMITED_VOTES)\n   */\n  setVoteRule(rule: VoteRule): void {\n    this.voteRule = rule;\n  }\n\n  /**\n   * Récupère la règle de vote actuelle\n   */\n  getVoteRule(): VoteRule {\n    return this.voteRule;\n  }\n\n  /**\n   * Ajoute un vote pour un contenu\n   * @param userId ID de l'utilisateur qui vote\n   * @param contentId ID du contenu à voter\n   * @param voteValue Valeur du vote (par défaut: 1)\n   */\n  addVote(userId: string, contentId: string, voteValue: number = 1): Observable<Vote> {\n    // Si la règle est ONE_VOTE_PER_USER, on vérifie si l'utilisateur a déjà voté\n    if (this.voteRule === VoteRule.ONE_VOTE_PER_USER) {\n      return this.api.getAll<Vote>(this.BASE_URL, this.getVotesParams(userId, contentId)).pipe(\n        switchMap((votes: any) => {\n          if (votes && votes.length > 0) {\n            return throwError(() => new Error('Vous avez déjà voté pour ce contenu'));\n          }\n          \n          const newVote: Omit<Vote, 'id' | 'createdAt'> = {\n            userId,\n            contentId,\n            nbVotes: voteValue\n          };\n          \n          return this.api.create<Vote>(this.BASE_URL, newVote);\n        })\n      );\n    } else {\n      // En mode UNLIMITED_VOTES, on incrémente le vote existant ou on en crée un nouveau\n      return this.api.getAll<Vote>(this.BASE_URL, this.getVotesParams(userId, contentId)).pipe(\n        switchMap((votes: any) => {\n          if (votes && votes.length > 0) {\n            // Mise à jour du vote existant en incrémentant nbVotes\n            const existingVote = votes[0];\n            const updatedVote = {\n              ...existingVote,\n              nbVotes: (existingVote.nbVotes || 0) + voteValue\n            };\n            return this.api.update<Vote>(this.BASE_URL, existingVote.id, updatedVote);\n          } else {\n            // Création d'un nouveau vote\n            const newVote: Omit<Vote, 'id' | 'createdAt'> = {\n              userId,\n              contentId,\n              nbVotes: voteValue\n            };\n            return this.api.create<Vote>(this.BASE_URL, newVote);\n          }\n        })\n      );\n    }\n  }\n\n  /**\n   * Récupère les votes pour un contenu spécifique\n   * @param contentId ID du contenu\n   */\n  getVotesForContent(contentId: string): Observable<Vote[]> {\n    return this.api.getAll<Vote>(this.BASE_URL, this.getVotesParams(undefined, contentId));\n  }\n\n  /**\n   * Récupère le vote d'un utilisateur pour un contenu spécifique\n   * @param userId ID de l'utilisateur\n   * @param contentId ID du contenu\n   */\n  getUserVoteForContent(userId: string, contentId: string): Observable<Vote | undefined> {\n    return this.api.getAll<Vote>(this.BASE_URL, this.getVotesParams(userId, contentId)).pipe(\n      map((votes: any) => votes[0] || undefined)\n    );\n  }\n\n  /**\n   * Supprime le vote d'un utilisateur pour un contenu spécifique\n   * @param userId ID de l'utilisateur\n   * @param contentId ID du contenu\n   */\n  removeVote(userId: string, contentId: string): Observable<void> {\n    return this.api.getAll<Vote>(this.BASE_URL, this.getVotesParams(userId, contentId)).pipe(\n      switchMap((votes: any) => {\n        if (!votes || votes.length === 0) {\n          return of(undefined);\n        }\n        // Suppression du vote avec l'ID spécifié\n        return this.api.delete(this.BASE_URL, votes[0].id);\n      })\n    );\n  }\n\n  /**\n   * Calcule le nombre total de votes pour un contenu\n   * @param contentId ID du contenu\n   */\n  getTotalVotesForContent(contentId: string): Observable<number> {\n    return this.getVotesForContent(contentId).pipe(\n      map(votes => votes.reduce((total, vote) => total + vote.nbVotes, 0))\n    );\n  }\n\n  /**\n   * Met à jour un vote existant (uniquement en mode MULTIPLE)\n   * @param voteId ID du vote à mettre à jour\n   * @param newVoteValue Nouvelle valeur du vote\n   */\n  updateVote(voteId: string, newVoteValue: number): Observable<Vote> {\n    if (this.voteRule === VoteRule.ONE_VOTE_PER_USER) {\n      return throwError(() => new Error('La mise à jour des votes n\\'est pas autorisée avec la règle ONE_VOTE_PER_USER'));\n    }\n\n    return this.api.update<Vote>(\n      this.BASE_URL, \n      voteId, \n      { nbVotes: newVoteValue }\n    );\n  }\n}\n",
            "constructorObj": {
                "name": "constructor",
                "description": "",
                "deprecated": false,
                "deprecationMessage": "",
                "args": [
                    {
                        "name": "api",
                        "type": "ApiJSON",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    }
                ],
                "line": 21,
                "jsdoctags": [
                    {
                        "name": "api",
                        "type": "ApiJSON",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            },
            "extends": [],
            "type": "injectable"
        }
    ],
    "guards": [],
    "interceptors": [],
    "classes": [],
    "directives": [],
    "components": [
        {
            "name": "AppComponent",
            "id": "component-AppComponent-038a42db3d5a7e21be5bc427ab4d570e71dee653bc23249eaa6e95599b7f0ce409cf496aa71574269d51b778471464255880615df2cb6dcc6d320dce12843012",
            "file": "src/app/app.component.ts",
            "encapsulation": [],
            "entryComponents": [],
            "inputs": [],
            "outputs": [],
            "providers": [],
            "selector": "app-root",
            "styleUrls": [],
            "styles": [],
            "templateUrl": [
                "app.component.html"
            ],
            "viewProviders": [],
            "hostDirectives": [],
            "inputsClass": [],
            "outputsClass": [],
            "propertiesClass": [],
            "methodsClass": [],
            "deprecated": false,
            "deprecationMessage": "",
            "hostBindings": [],
            "hostListeners": [],
            "standalone": false,
            "imports": [
                {
                    "name": "IonApp"
                },
                {
                    "name": "IonRouterOutlet"
                }
            ],
            "description": "",
            "rawdescription": "\n",
            "type": "component",
            "sourceCode": "import { Component } from '@angular/core';\nimport { IonApp, IonRouterOutlet } from '@ionic/angular/standalone';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: 'app.component.html',\n  imports: [IonApp, IonRouterOutlet],\n})\nexport class AppComponent {\n  constructor() {}\n}\n",
            "assetsDirs": [],
            "styleUrlsData": "",
            "stylesData": "",
            "constructorObj": {
                "name": "constructor",
                "description": "",
                "deprecated": false,
                "deprecationMessage": "",
                "args": [],
                "line": 9
            },
            "extends": [],
            "templateData": "<ion-app>\n  <ion-router-outlet></ion-router-outlet>\n</ion-app>\n"
        },
        {
            "name": "ButtonComponent",
            "id": "component-ButtonComponent-d7bf0323e6da130e2609e2af0117b4a8d7cd874132206af50bf43dfc37044485fe50f2867ea76525730dd195b9b95a43802a12dadc6ad5cd7bf2faa07f19f0da",
            "file": "src/stories/button.component.ts",
            "encapsulation": [],
            "entryComponents": [],
            "inputs": [],
            "outputs": [],
            "providers": [],
            "selector": "storybook-button",
            "styleUrls": [
                "./button.css"
            ],
            "styles": [],
            "template": " <button  type=\"button\"\n  (click)=\"onClick.emit($event)\"\n  [ngClass]=\"classes\"\n  [ngStyle]=\"{ 'background-color': backgroundColor }\"\n>\n  {{ label }}\n</button>",
            "templateUrl": [],
            "viewProviders": [],
            "hostDirectives": [],
            "inputsClass": [
                {
                    "name": "backgroundColor",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\nWhat background color to use",
                    "description": "<p>What background color to use</p>\n",
                    "line": 25,
                    "type": "string",
                    "decorators": []
                },
                {
                    "name": "label",
                    "defaultValue": "'Button'",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "pos": 760,
                            "end": 773,
                            "kind": 328,
                            "id": 0,
                            "flags": 16842752,
                            "modifierFlagsCache": 0,
                            "transformFlags": 0,
                            "tagName": {
                                "pos": 761,
                                "end": 769,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "required"
                            },
                            "comment": ""
                        }
                    ],
                    "rawdescription": "\n\nButton contents\n\n",
                    "description": "<p>Button contents</p>\n",
                    "line": 37,
                    "type": "string",
                    "decorators": []
                },
                {
                    "name": "primary",
                    "defaultValue": "false",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\nIs this the principal call to action on the page?",
                    "description": "<p>Is this the principal call to action on the page?</p>\n",
                    "line": 21,
                    "type": "boolean",
                    "decorators": []
                },
                {
                    "name": "size",
                    "defaultValue": "'medium'",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\nHow large should the button be?",
                    "description": "<p>How large should the button be?</p>\n",
                    "line": 29,
                    "type": "\"small\" | \"medium\" | \"large\"",
                    "decorators": []
                }
            ],
            "outputsClass": [
                {
                    "name": "onClick",
                    "defaultValue": "new EventEmitter<Event>()",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\nOptional click handler",
                    "description": "<p>Optional click handler</p>\n",
                    "line": 41,
                    "type": "EventEmitter"
                }
            ],
            "propertiesClass": [],
            "methodsClass": [],
            "deprecated": false,
            "deprecationMessage": "",
            "hostBindings": [],
            "hostListeners": [],
            "standalone": true,
            "imports": [
                {
                    "name": "CommonModule",
                    "type": "module"
                }
            ],
            "description": "",
            "rawdescription": "\n",
            "type": "component",
            "sourceCode": "import { CommonModule } from '@angular/common';\nimport { Component, Input, Output, EventEmitter } from '@angular/core';\n\n@Component({\n  selector: 'storybook-button',\n  standalone: true,\n  imports: [CommonModule],\n  template: ` <button\n  type=\"button\"\n  (click)=\"onClick.emit($event)\"\n  [ngClass]=\"classes\"\n  [ngStyle]=\"{ 'background-color': backgroundColor }\"\n>\n  {{ label }}\n</button>`,\n  styleUrls: ['./button.css'],\n})\nexport class ButtonComponent {\n  /** Is this the principal call to action on the page? */\n  @Input()\n  primary = false;\n\n  /** What background color to use */\n  @Input()\n  backgroundColor?: string;\n\n  /** How large should the button be? */\n  @Input()\n  size: 'small' | 'medium' | 'large' = 'medium';\n\n  /**\n   * Button contents\n   *\n   * @required\n   */\n  @Input()\n  label = 'Button';\n\n  /** Optional click handler */\n  @Output()\n  onClick = new EventEmitter<Event>();\n\n  public get classes(): string[] {\n    const mode = this.primary ? 'storybook-button--primary' : 'storybook-button--secondary';\n\n    return ['storybook-button', `storybook-button--${this.size}`, mode];\n  }\n}\n",
            "assetsDirs": [],
            "styleUrlsData": [
                {
                    "data": ".storybook-button {\n  display: inline-block;\n  cursor: pointer;\n  border: 0;\n  border-radius: 3em;\n  font-weight: 700;\n  line-height: 1;\n  font-family: 'Nunito Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif;\n}\n.storybook-button--primary {\n  background-color: #555ab9;\n  color: white;\n}\n.storybook-button--secondary {\n  box-shadow: rgba(0, 0, 0, 0.15) 0px 0px 0px 1px inset;\n  background-color: transparent;\n  color: #333;\n}\n.storybook-button--small {\n  padding: 10px 16px;\n  font-size: 12px;\n}\n.storybook-button--medium {\n  padding: 11px 20px;\n  font-size: 14px;\n}\n.storybook-button--large {\n  padding: 12px 24px;\n  font-size: 16px;\n}\n",
                    "styleUrl": "./button.css"
                }
            ],
            "stylesData": "",
            "extends": [],
            "accessors": {
                "classes": {
                    "name": "classes",
                    "getSignature": {
                        "name": "classes",
                        "type": "[]",
                        "returnType": "string[]",
                        "line": 43
                    }
                }
            }
        },
        {
            "name": "ChallengeFormComponent",
            "id": "component-ChallengeFormComponent-71497d9239cbd0b20795e1da2b371fbf8392a64c5fb9edf1644809309eee31fed70b310d559d0261394ab0b6e397a3094ed8dc20dd6943e0f5a7d2268a3b6f1c",
            "file": "src/app/components/challenge-form/challenge-form.component.ts",
            "encapsulation": [],
            "entryComponents": [],
            "inputs": [],
            "outputs": [],
            "providers": [],
            "selector": "app-challenge-form",
            "styleUrls": [
                "./challenge-form.component.scss"
            ],
            "styles": [],
            "templateUrl": [
                "./challenge-form.component.html"
            ],
            "viewProviders": [],
            "hostDirectives": [],
            "inputsClass": [
                {
                    "name": "challenge",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "line": 101,
                    "type": "Challenge",
                    "decorators": []
                }
            ],
            "outputsClass": [
                {
                    "name": "challengeSaved",
                    "defaultValue": "new EventEmitter<Challenge>()",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "line": 102,
                    "type": "EventEmitter"
                }
            ],
            "propertiesClass": [
                {
                    "name": "callToActionOptions",
                    "defaultValue": "[\n    'Participer',\n    'Voter',\n    'Soutenir',\n    'Voter l\\'artiste',\n    'J\\'approuve',\n    'Soutenir ce talent'\n  ]",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "[]",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 114
                },
                {
                    "name": "challengeForm",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "FormGroup",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 106
                },
                {
                    "name": "computedEndDate",
                    "defaultValue": "null",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "Date | null",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 111
                },
                {
                    "name": "coverImageFile",
                    "defaultValue": "null",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "File | null",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 108
                },
                {
                    "name": "coverImagePreview",
                    "defaultValue": "null",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string | ArrayBuffer | null",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 107
                },
                {
                    "name": "fileInput",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "ElementRef<HTMLInputElement>",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 103,
                    "decorators": [
                        {
                            "name": "ViewChild",
                            "stringifiedArguments": "'fileInput'"
                        }
                    ],
                    "modifierKind": [
                        171
                    ]
                },
                {
                    "name": "isEditMode",
                    "defaultValue": "false",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 109
                },
                {
                    "name": "isLoading",
                    "defaultValue": "false",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 105
                },
                {
                    "name": "subscriptions",
                    "defaultValue": "new Subscription()",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "Subscription",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 123,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "today",
                    "defaultValue": "new Date().toISOString()",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 110
                }
            ],
            "methodsClass": [
                {
                    "name": "addRule",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 240,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nAjoute une nouvelle règle vide\n",
                    "description": "<p>Ajoute une nouvelle règle vide</p>\n"
                },
                {
                    "name": "calculateEndDate",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 216,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nCalcule automatiquement la date de fin\n",
                    "description": "<p>Calcule automatiquement la date de fin</p>\n"
                },
                {
                    "name": "createForm",
                    "args": [],
                    "optional": false,
                    "returnType": "FormGroup",
                    "typeParameters": [],
                    "line": 188,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nCrée le formulaire - SANS end_date comme champ requis\n",
                    "description": "<p>Crée le formulaire - SANS end_date comme champ requis</p>\n"
                },
                {
                    "name": "markFormGroupTouched",
                    "args": [
                        {
                            "name": "formGroup",
                            "type": "FormGroup",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 494,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nMarque tous les champs comme \"touched\" pour afficher les erreurs\n",
                    "description": "<p>Marque tous les champs comme &quot;touched&quot; pour afficher les erreurs</p>\n",
                    "modifierKind": [
                        123
                    ],
                    "jsdoctags": [
                        {
                            "name": "formGroup",
                            "type": "FormGroup",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "ngOnDestroy",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 181,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "ngOnInit",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 134,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "onCancel",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 485,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nAnnule et ferme le modal\n",
                    "description": "<p>Annule et ferme le modal</p>\n"
                },
                {
                    "name": "onCoverImageChange",
                    "args": [
                        {
                            "name": "event",
                            "type": "Event",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 296,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nGère le changement de l'image de couverture\n",
                    "description": "<p>Gère le changement de l&#39;image de couverture</p>\n",
                    "jsdoctags": [
                        {
                            "name": "event",
                            "type": "Event",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "onSubmit",
                    "args": [],
                    "optional": false,
                    "returnType": "any",
                    "typeParameters": [],
                    "line": 339,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nSoumet le formulaire\n",
                    "description": "<p>Soumet le formulaire</p>\n",
                    "modifierKind": [
                        134
                    ]
                },
                {
                    "name": "patchFormValues",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 256,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nRemplit le formulaire avec les valeurs du challenge existant\n",
                    "description": "<p>Remplit le formulaire avec les valeurs du challenge existant</p>\n"
                },
                {
                    "name": "prepareFormData",
                    "args": [],
                    "optional": false,
                    "returnType": "Partial<Challenge>",
                    "typeParameters": [],
                    "line": 442,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nPrépare les données du formulaire pour l'API\n",
                    "description": "<p>Prépare les données du formulaire pour l&#39;API</p>\n"
                },
                {
                    "name": "removeCoverImage",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 328,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nSupprime l'image de couverture\n",
                    "description": "<p>Supprime l&#39;image de couverture</p>\n"
                },
                {
                    "name": "removeRule",
                    "args": [
                        {
                            "name": "index",
                            "type": "number",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 247,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nSupprime une règle\n",
                    "description": "<p>Supprime une règle</p>\n",
                    "jsdoctags": [
                        {
                            "name": "index",
                            "type": "number",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "showError",
                    "args": [
                        {
                            "name": "message",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "any",
                    "typeParameters": [],
                    "line": 511,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nAffiche un message d'erreur\n",
                    "description": "<p>Affiche un message d&#39;erreur</p>\n",
                    "modifierKind": [
                        123,
                        134
                    ],
                    "jsdoctags": [
                        {
                            "name": "message",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "showSuccess",
                    "args": [
                        {
                            "name": "message",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "any",
                    "typeParameters": [],
                    "line": 530,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nAffiche un message de succès\n",
                    "description": "<p>Affiche un message de succès</p>\n",
                    "modifierKind": [
                        123,
                        134
                    ],
                    "jsdoctags": [
                        {
                            "name": "message",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "updateChallenge",
                    "args": [
                        {
                            "name": "challengeData",
                            "type": "Partial<Challenge>",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Promise<Challenge>",
                    "typeParameters": [],
                    "line": 423,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nMet à jour un challenge existant\n",
                    "description": "<p>Met à jour un challenge existant</p>\n",
                    "modifierKind": [
                        123,
                        134
                    ],
                    "jsdoctags": [
                        {
                            "name": "challengeData",
                            "type": "Partial<Challenge>",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                }
            ],
            "deprecated": false,
            "deprecationMessage": "",
            "hostBindings": [],
            "hostListeners": [],
            "standalone": true,
            "imports": [
                {
                    "name": "IonFabButton"
                },
                {
                    "name": "ReactiveFormsModule",
                    "type": "module"
                },
                {
                    "name": "NgIf"
                },
                {
                    "name": "NgFor"
                },
                {
                    "name": "IonContent"
                },
                {
                    "name": "IonIcon"
                },
                {
                    "name": "IonSelect"
                },
                {
                    "name": "IonSelectOption"
                },
                {
                    "name": "IonToggle"
                },
                {
                    "name": "IonDatetime"
                },
                {
                    "name": "ModalIonModal"
                },
                {
                    "name": "IonInput"
                },
                {
                    "name": "IonTextarea"
                },
                {
                    "name": "IonDatetimeButton"
                },
                {
                    "name": "IonButtons"
                },
                {
                    "name": "IonHeader"
                },
                {
                    "name": "IonToolbar"
                },
                {
                    "name": "IonButton"
                },
                {
                    "name": "IonTitle"
                },
                {
                    "name": "IonSpinner"
                },
                {
                    "name": "DatePipe",
                    "type": "pipe"
                }
            ],
            "description": "",
            "rawdescription": "\n",
            "type": "component",
            "sourceCode": "import { \n  Component, \n  EventEmitter, \n  Input, \n  Output, \n  OnInit, \n  ViewChild, \n  ElementRef,\n  OnDestroy \n} from '@angular/core';\nimport { \n  FormBuilder, \n  FormGroup, \n  Validators, \n  FormArray,\n  FormControl \n} from '@angular/forms';\nimport { \n  addIcons \n} from 'ionicons';\nimport { \n  calendarOutline, \n  timeOutline, \n  closeCircle, \n  checkmarkCircle, \n  addCircle, \n  trash, \n  camera, \n  image, \n  pencil,\n  listOutline,\n  rocket,\n  optionsOutline,\n  flash,\n  arrowBack,\n  stopCircleOutline,\n  playCircleOutline,\n  giftOutline,\n  infinite,\n  thumbsUpOutline,\n  person,\n  informationCircleOutline\n} from 'ionicons/icons';\nimport { ModalController } from '@ionic/angular';\nimport { ToastController } from '@ionic/angular';\nimport { Challenge } from '../../../models/Challenge';\nimport { CreationService } from '../../../services/CREATION/creation-service';\nimport { \n  IonIcon, \n  IonSelect, \n  IonSelectOption, \n  IonButtons, \n  IonHeader, \n  IonToolbar, \n  IonButton, \n  IonTitle, \n  IonSpinner, \n  IonContent, \n  IonInput, \n  IonTextarea, \n  IonDatetimeButton, \n  IonDatetime, \n  IonToggle,\n  IonModal as ModalIonModal, \n  IonFabButton \n} from \"@ionic/angular/standalone\";\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { NgIf, NgFor, DatePipe } from '@angular/common';\nimport { firstValueFrom, Subscription } from 'rxjs';\n\n@Component({\n  selector: 'app-challenge-form',\n  templateUrl: './challenge-form.component.html',\n  styleUrls: ['./challenge-form.component.scss'],\n  standalone: true,\n  imports: [\n    IonFabButton, \n    ReactiveFormsModule, \n    NgIf, \n    NgFor, \n    IonContent,\n    IonIcon, \n    IonSelect, \n    IonSelectOption, \n    IonToggle, \n    IonDatetime, \n    ModalIonModal,\n    IonInput, \n    IonTextarea, \n    IonDatetimeButton, \n    IonButtons, \n    IonHeader, \n    IonToolbar, \n    IonButton, \n    IonTitle, \n    IonSpinner,\n    DatePipe\n  ]\n})\nexport class ChallengeFormComponent implements OnInit, OnDestroy {\n  @Input() challenge?: Challenge;\n  @Output() challengeSaved = new EventEmitter<Challenge>();\n  @ViewChild('fileInput') fileInput!: ElementRef<HTMLInputElement>;\n  \n  isLoading = false;\n  challengeForm: FormGroup;\n  coverImagePreview: string | ArrayBuffer | null = null;\n  coverImageFile: File | null = null;\n  isEditMode = false;\n  today = new Date().toISOString();\n  computedEndDate: Date | null = null;\n  \n  // Options pour le call to action\n  callToActionOptions = [\n    'Participer',\n    'Voter',\n    'Soutenir',\n    'Voter l\\'artiste',\n    'J\\'approuve',\n    'Soutenir ce talent'\n  ];\n\n  private subscriptions: Subscription = new Subscription();\n\n  constructor(\n    private fb: FormBuilder,\n    private creationService: CreationService,\n    private modalCtrl: ModalController,\n    private toastCtrl: ToastController\n  ) {\n    this.challengeForm = this.createForm();\n  }\n\n  ngOnInit() {\n    addIcons({ \n      calendarOutline, \n      timeOutline, \n      closeCircle, \n      checkmarkCircle, \n      addCircle, \n      trash, \n      camera, \n      image, \n      pencil,\n      listOutline,\n      rocket,\n      optionsOutline,\n      flash,\n      arrowBack,\n      stopCircleOutline,\n      playCircleOutline,\n      giftOutline,\n      infinite,\n      thumbsUpOutline,\n      person,\n      informationCircleOutline\n    });\n\n    if (this.challenge) {\n      this.isEditMode = true;\n      this.patchFormValues();\n    }\n    \n    // Calculer la date de fin quand start_date ou duration_days change\n    this.subscriptions.add(\n      this.challengeForm.get('start_date')?.valueChanges.subscribe(() => {\n        this.calculateEndDate();\n      })\n    );\n    \n    this.subscriptions.add(\n      this.challengeForm.get('duration_days')?.valueChanges.subscribe(() => {\n        this.calculateEndDate();\n      })\n    );\n\n    // Calculer la date de fin initiale\n    this.calculateEndDate();\n  }\n\n  ngOnDestroy() {\n    this.subscriptions.unsubscribe();\n  }\n\n  /**\n   * Crée le formulaire - SANS end_date comme champ requis\n   */\n  createForm(): FormGroup {\n    return this.fb.group({\n      // Informations de base\n      name: ['', [Validators.required, Validators.maxLength(100)]],\n      description: ['', [Validators.required, Validators.maxLength(1000)]],\n      \n      // Configuration\n      duration_days: [7, [Validators.required, Validators.min(1), Validators.max(365)]],\n      vote_rule: ['one_vote_per_user', Validators.required],\n      call_to_action: ['Participer', Validators.required],\n      \n      // Date de début uniquement (end_date sera calculée)\n      start_date: [this.today, Validators.required],\n      \n      // Récompense\n      prize: [''],\n      \n      // Règles\n      rules: this.fb.array([this.fb.control('')]),\n      \n      // Statut\n      is_active: [true]\n    });\n  }\n\n  /**\n   * Calcule automatiquement la date de fin\n   */\n  calculateEndDate() {\n    const startDate = this.challengeForm.get('start_date')?.value;\n    const durationDays = this.challengeForm.get('duration_days')?.value;\n    \n    if (startDate && durationDays && durationDays > 0) {\n      const start = new Date(startDate);\n      const end = new Date(start);\n      end.setDate(end.getDate() + parseInt(durationDays));\n      this.computedEndDate = end;\n    } else {\n      this.computedEndDate = null;\n    }\n  }\n\n  /**\n   * Getter pour les règles (FormArray)\n   */\n  get rules(): FormArray {\n    return this.challengeForm.get('rules') as FormArray;\n  }\n\n  /**\n   * Ajoute une nouvelle règle vide\n   */\n  addRule() {\n    this.rules.push(this.fb.control(''));\n  }\n\n  /**\n   * Supprime une règle\n   */\n  removeRule(index: number) {\n    if (this.rules.length > 1) {\n      this.rules.removeAt(index);\n    }\n  }\n\n  /**\n   * Remplit le formulaire avec les valeurs du challenge existant\n   */\n  patchFormValues() {\n    if (!this.challenge) return;\n\n    // Réinitialiser les règles\n    while (this.rules.length) {\n      this.rules.removeAt(0);\n    }\n\n    // Ajouter les règles existantes\n    if (this.challenge.rules && this.challenge.rules.length > 0) {\n      this.challenge.rules.forEach(rule => {\n        this.rules.push(this.fb.control(rule));\n      });\n    } else {\n      this.rules.push(this.fb.control(''));\n    }\n\n    // Mettre à jour les autres champs\n    this.challengeForm.patchValue({\n      name: this.challenge.name,\n      description: this.challenge.description,\n      duration_days: this.challenge.duration_days,\n      vote_rule: this.challenge.vote_rule,\n      call_to_action: this.challenge.call_to_action,\n      prize: this.challenge.prize || '',\n      start_date: this.challenge.start_date \n        ? new Date(this.challenge.start_date).toISOString() \n        : this.today,\n      is_active: this.challenge.is_active !== false\n    });\n\n    // Mettre à jour l'aperçu de l'image si elle existe\n    if (this.challenge.cover_image_url) {\n      this.coverImagePreview = this.challenge.cover_image_url;\n    }\n  }\n\n  /**\n   * Gère le changement de l'image de couverture\n   */\n  onCoverImageChange(event: Event) {\n    const input = event.target as HTMLInputElement;\n    if (input.files && input.files[0]) {\n      const file = input.files[0];\n      \n      // Vérifier le type de fichier\n      const validTypes = ['image/jpeg', 'image/png', 'image/gif', 'image/webp'];\n      if (!validTypes.includes(file.type)) {\n        this.showError('Veuillez sélectionner une image valide (JPEG, PNG, GIF, WebP)');\n        return;\n      }\n      \n      // Vérifier la taille du fichier (max 5MB)\n      if (file.size > 5 * 1024 * 1024) {\n        this.showError('L\\'image ne doit pas dépasser 5MB');\n        return;\n      }\n      \n      this.coverImageFile = file;\n      \n      // Aperçu de l'image\n      const reader = new FileReader();\n      reader.onload = () => {\n        this.coverImagePreview = reader.result;\n      };\n      reader.readAsDataURL(file);\n    }\n  }\n\n  /**\n   * Supprime l'image de couverture\n   */\n  removeCoverImage() {\n    this.coverImageFile = null;\n    this.coverImagePreview = null;\n    if (this.fileInput) {\n      this.fileInput.nativeElement.value = '';\n    }\n  }\n\n  /**\n   * Soumet le formulaire\n   */\n async onSubmit() {\n  if (this.challengeForm.invalid) {\n    this.markFormGroupTouched(this.challengeForm);\n    await this.showError('Veuillez corriger les erreurs dans le formulaire');\n    return;\n  }\n\n  try {\n    this.isLoading = true;\n    const formData = this.prepareFormData();\n    \n    let result: Challenge;\n    \n    if (this.isEditMode && this.challenge) {\n      // Mise à jour du défi existant\n      if (this.coverImageFile) {\n        result = await firstValueFrom(\n          this.creationService.createChallengeWithCoverImage(\n            this.coverImageFile,\n            formData as Omit<Challenge, 'id' | 'created_at' | 'is_active' | 'cover_image_url'>,\n            (progress) => {\n              console.log(`Progression de l'upload: ${progress}%`);\n            }\n          )\n        );\n      } else {\n        const updateData = { \n          ...formData,\n          id: this.challenge.id \n        };\n        result = await this.updateChallenge(updateData);\n      }\n    } else {\n      // Création d'un nouveau défi\n      if (this.coverImageFile) {\n        result = await firstValueFrom(\n          this.creationService.createChallengeWithCoverImage(\n            this.coverImageFile,\n            formData as Omit<Challenge, 'id' | 'created_at' | 'is_active' | 'cover_image_url'>,\n            (progress) => {\n              console.log(`Progression de l'upload: ${progress}%`);\n            }\n          )\n        );\n      } else {\n        result = await firstValueFrom(\n          this.creationService.createChallenge(\n            formData as Omit<Challenge, 'id' | 'created_at' | 'is_active'>\n          )\n        );\n      }\n    }\n\n    this.challengeSaved.emit(result);\n    \n    await this.modalCtrl.dismiss({ \n      success: true, \n      challenge: result,\n      isEdit: this.isEditMode\n    });\n\n    await this.showSuccess(\n      this.isEditMode \n        ? 'Défi mis à jour avec succès !' \n        : 'Défi créé avec succès !'\n    );\n\n  } catch (error: any) {\n    console.error('Erreur lors de la sauvegarde du défi', error);\n    \n    let errorMessage = 'Erreur lors de la sauvegarde du défi';\n    if (error.message?.includes('Échec de l\\'upload')) {\n      errorMessage = 'Échec de l\\'upload de l\\'image. Veuillez réessayer.';\n    }\n    \n    await this.showError(errorMessage);\n  } finally {\n    this.isLoading = false;\n  }\n}\n\n  /**\n   * Met à jour un challenge existant\n   */\n  private async updateChallenge(challengeData: Partial<Challenge>): Promise<Challenge> {\n    return new Promise((resolve, reject) => {\n      setTimeout(() => {\n        if (this.challenge) {\n          const updatedChallenge: Challenge = {\n            ...this.challenge,\n            ...challengeData\n          };\n          resolve(updatedChallenge);\n        } else {\n          reject(new Error('Challenge non défini'));\n        }\n      }, 500);\n    });\n  }\n\n  /**\n   * Prépare les données du formulaire pour l'API\n   */\n  prepareFormData(): Partial<Challenge> {\n  const formValue = this.challengeForm.value;\n  \n  // Filtrer les règles vides\n  const filteredRules = formValue.rules\n    .filter((rule: string) => rule && rule.trim() !== '')\n    .map((rule: string) => rule.trim());\n  \n  // Calculer la date de fin automatiquement\n  let endDate: Date | undefined;\n  if (formValue.start_date && formValue.duration_days) {\n    const startDate = new Date(formValue.start_date);\n    endDate = new Date(startDate);\n    endDate.setDate(endDate.getDate() + formValue.duration_days);\n  }\n\n  // Créer l'objet de données avec tous les champs\n  const formData: any = {\n    name: formValue.name?.trim(),\n    description: formValue.description?.trim(),\n    duration_days: formValue.duration_days,\n    vote_rule: formValue.vote_rule,\n    call_to_action: formValue.call_to_action,\n    start_date: formValue.start_date ? new Date(formValue.start_date) : undefined,\n    end_date: endDate,\n    is_active: formValue.is_active\n  };\n\n  // Ajouter les champs optionnels s'ils ont une valeur\n  if (formValue.prize?.trim()) {\n    formData.prize = formValue.prize.trim();\n  }\n\n  if (filteredRules.length > 0) {\n    formData.rules = filteredRules;\n  }\n\n  return formData;\n}\n\n  /**\n   * Annule et ferme le modal\n   */\n  onCancel() {\n    this.modalCtrl.dismiss({ \n      cancelled: true \n    });\n  }\n\n  /**\n   * Marque tous les champs comme \"touched\" pour afficher les erreurs\n   */\n  private markFormGroupTouched(formGroup: FormGroup) {\n    Object.values(formGroup.controls).forEach(control => {\n      control.markAsTouched();\n      \n      if (control instanceof FormGroup) {\n        this.markFormGroupTouched(control);\n      } else if (control instanceof FormArray) {\n        control.controls.forEach(arrayControl => {\n          arrayControl.markAsTouched();\n        });\n      }\n    });\n  }\n\n  /**\n   * Affiche un message d'erreur\n   */\n  private async showError(message: string) {\n    const toast = await this.toastCtrl.create({\n      message: message,\n      duration: 3000,\n      color: 'danger',\n      position: 'top',\n      buttons: [\n        {\n          icon: 'close',\n          role: 'cancel'\n        }\n      ]\n    });\n    await toast.present();\n  }\n\n  /**\n   * Affiche un message de succès\n   */\n  private async showSuccess(message: string) {\n    const toast = await this.toastCtrl.create({\n      message: message,\n      duration: 2000,\n      color: 'success',\n      position: 'top'\n    });\n    await toast.present();\n  }\n}",
            "assetsDirs": [],
            "styleUrlsData": [
                {
                    "data": "// challenge-form.component.scss (Design Mobile Moderne)\n\n// Variables - Dark Theme\n$primary: #e67200;\n$primary-light: #ff8c1a;\n$secondary: #000033;\n$success: #10b981;\n$danger: #ef4444;\n$dark: #000033;\n$dark-light: #1a1a4d;\n$gray: #8e8ea0;\n$gray-dark: #16162e;\n$background: #0a0a1f;\n$card-bg: #16162e;\n$white: #ffffff;\n$border-radius: 16px;\n$border-radius-sm: 12px;\n$spacing: 16px;\n$transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n\n.required {\n  color: #ff3b30;  // Rouge iOS\n  font-weight: bold;\n  margin-left: 2px;\n}\n\n// Header moderne\n.modern-header {\n  ion-toolbar {\n    --background: #{$secondary};\n    --border-width: 0;\n    --padding-top: 8px;\n    --padding-bottom: 8px;\n    \n    ion-title {\n      font-size: 18px;\n      font-weight: 700;\n      color: $white;\n    }\n  }\n  \n  .back-button {\n    --color: #{$white};\n    --padding-start: 8px;\n    --padding-end: 8px;\n  }\n  \n  .save-button {\n    --color: #{$primary};\n    font-weight: 600;\n    font-size: 15px;\n    --padding-start: 16px;\n    --padding-end: 16px;\n  }\n}\n\n// Content\n.modern-content {\n  --background: #{$background};\n  --padding-bottom: 100px;\n}\n\n.modern-form {\n  min-height: 100%;\n}\n\n// Section de couverture\n.cover-section {\n  margin-bottom: $spacing;\n}\n\n.cover-wrapper {\n  position: relative;\n  height: 220px;\n  background: linear-gradient(135deg, $dark 0%, $primary 100%);\n  overflow: hidden;\n  \n  &.has-image {\n    background: $dark;\n  }\n}\n\n.cover-img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n\n.cover-placeholder {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  color: rgba($white, 0.8);\n  \n  ion-icon {\n    font-size: 56px;\n    margin-bottom: 12px;\n    opacity: 0.6;\n  }\n  \n  p {\n    font-size: 15px;\n    font-weight: 500;\n    margin: 0;\n  }\n}\n\n.cover-actions {\n  position: absolute;\n  bottom: 16px;\n  right: 16px;\n  display: flex;\n  gap: 8px;\n  \n  .fab-action {\n    --background: #{$card-bg};\n    --color: #{$primary};\n    --box-shadow: 0 4px 12px rgba(230, 114, 0, 0.3);\n    \n    &:hover {\n      transform: scale(1.05);\n    }\n  }\n}\n\n// Contenu du formulaire\n.form-content {\n  padding: $spacing;\n  padding-bottom: 0;\n}\n\n// Titres de section\n.section-title {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-size: 15px;\n  font-weight: 700;\n  color: $white;\n  margin: 24px 0 16px;\n  \n  ion-icon {\n    font-size: 20px;\n    color: $primary;\n  }\n  \n  ion-button {\n    margin-left: auto;\n    --color: #{$primary};\n  }\n}\n\n// Groupes d'input\n.input-group {\n  margin-bottom: 20px;\n}\n\n.input-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 8px;\n}\n\n.input-label {\n  font-size: 14px;\n  font-weight: 600;\n  color: $white;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  \n  ion-icon {\n    font-size: 16px;\n    color: $gray;\n  }\n}\n\n.char-counter {\n  font-size: 12px;\n  color: $gray;\n  font-weight: 500;\n}\n\n// Inputs modernes\n.modern-input,\n.modern-textarea,\n.modern-select {\n  --background: #{$card-bg};\n  --color: #{$white};\n  --placeholder-color: #{$gray};\n  --padding-start: 16px;\n  --padding-end: 16px;\n  --padding-top: 12px;\n  --padding-bottom: 12px;\n  --border-radius: #{$border-radius-sm};\n  border: 2px solid rgba($primary, 0.2);\n  border-radius: $border-radius-sm;\n  font-size: 15px;\n  transition: $transition;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);\n  \n  &:focus-within {\n    border-color: $primary;\n    box-shadow: 0 0 0 4px rgba($primary, 0.15);\n  }\n  \n  &.error {\n    border-color: $danger;\n    \n    &:focus-within {\n      box-shadow: 0 0 0 4px rgba($danger, 0.15);\n    }\n  }\n}\n\n.modern-textarea {\n  --padding-top: 12px;\n  --padding-bottom: 12px;\n  min-height: 100px;\n}\n\n.error-message {\n  font-size: 12px;\n  color: $danger;\n  margin-top: 6px;\n  font-weight: 500;\n  padding-left: 4px;\n}\n\n// Durée\n.duration-selector {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  \n  .duration-input {\n    flex: 1;\n  }\n  \n  .duration-text {\n    font-size: 15px;\n    font-weight: 600;\n    color: $gray;\n    min-width: 60px;\n  }\n}\n\n.duration-display {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  background: $card-bg;\n  padding: 12px 16px;\n  border-radius: $border-radius-sm;\n  border: 2px solid rgba($primary, 0.2);\n  \n  .duration-input-compact {\n    flex: 1;\n    --background: transparent;\n    --padding-start: 0;\n    --padding-end: 0;\n    border: none;\n    box-shadow: none;\n  }\n  \n  .duration-label {\n    font-size: 14px;\n    font-weight: 600;\n    color: $gray;\n    white-space: nowrap;\n  }\n}\n\n// Date calculée\n.computed-date {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 12px 16px;\n  background: rgba($primary, 0.1);\n  border: 1px solid rgba($primary, 0.3);\n  border-radius: $border-radius-sm;\n  margin: 12px 0 20px;\n  \n  ion-icon {\n    font-size: 20px;\n    color: $primary;\n    flex-shrink: 0;\n  }\n  \n  span {\n    font-size: 14px;\n    font-weight: 500;\n    color: $white;\n  }\n}\n\n// Sélecteurs de date\n.date-selectors {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 12px;\n  margin-bottom: 20px;\n}\n\n.date-item {\n  .input-label {\n    margin-bottom: 8px;\n    font-size: 13px;\n  }\n  \n  .date-button {\n    width: 100%;\n    \n    &::part(native) {\n      background: $card-bg;\n      border-radius: $border-radius-sm;\n      padding: 12px;\n      border: 2px solid rgba($primary, 0.2);\n      transition: $transition;\n      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);\n      color: $white;\n      \n      &:hover {\n        border-color: $primary;\n      }\n    }\n  }\n}\n\n// Options de vote\n.vote-options {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n  margin-bottom: 20px;\n}\n\n.vote-card {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  background: $card-bg;\n  padding: 16px;\n  border-radius: $border-radius-sm;\n  border: 2px solid rgba($primary, 0.2);\n  cursor: pointer;\n  transition: $transition;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);\n  \n  > ion-icon {\n    font-size: 28px;\n    color: $gray;\n    min-width: 28px;\n  }\n  \n  .vote-info {\n    flex: 1;\n    \n    h4 {\n      margin: 0 0 4px;\n      font-size: 15px;\n      font-weight: 600;\n      color: $white;\n    }\n    \n    p {\n      margin: 0;\n      font-size: 13px;\n      color: $gray;\n    }\n  }\n  \n  .vote-check {\n    ion-icon {\n      font-size: 24px;\n      color: $primary;\n    }\n  }\n  \n  &.selected {\n    border-color: $primary;\n    background: linear-gradient(135deg, rgba($primary, 0.15) 0%, rgba($dark, 0.8) 100%);\n    box-shadow: 0 4px 16px rgba($primary, 0.3);\n    \n    > ion-icon {\n      color: $primary;\n    }\n    \n    .vote-info h4 {\n      color: $primary;\n    }\n  }\n  \n  &:active {\n    transform: scale(0.98);\n  }\n}\n\n// Liste de règles\n.rules-list {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n  margin-bottom: 20px;\n}\n\n.rule-row {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.rule-number {\n  min-width: 32px;\n  height: 32px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: linear-gradient(135deg, $primary 0%, $primary-light 100%);\n  color: $white;\n  border-radius: 50%;\n  font-weight: 700;\n  font-size: 13px;\n  box-shadow: 0 2px 8px rgba($primary, 0.4);\n}\n\n.rule-input {\n  flex: 1;\n}\n\n.remove-rule {\n  --color: #{$danger};\n  --padding-start: 8px;\n  --padding-end: 8px;\n}\n\n// Toggle card\n.toggle-card {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  background: $card-bg;\n  padding: 16px;\n  border-radius: $border-radius-sm;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);\n  border: 2px solid rgba($primary, 0.2);\n  margin-bottom: 20px;\n}\n\n.toggle-content {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  flex: 1;\n}\n\n.toggle-icon {\n  width: 44px;\n  height: 44px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: linear-gradient(135deg, rgba($primary, 0.2) 0%, rgba($primary, 0.05) 100%);\n  border-radius: 12px;\n  \n  ion-icon {\n    font-size: 24px;\n    color: $primary;\n  }\n}\n\n.toggle-info {\n  h4 {\n    margin: 0 0 4px;\n    font-size: 15px;\n    font-weight: 600;\n    color: $white;\n  }\n  \n  p {\n    margin: 0;\n    font-size: 13px;\n    color: $gray;\n  }\n}\n\n.modern-toggle {\n  --background: #{$gray-dark};\n  --background-checked: #{$primary};\n  --handle-background: #{$white};\n  --handle-background-checked: #{$white};\n}\n\n// Footer de soumission\n.submit-footer {\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  padding: 12px $spacing 20px;\n  background: linear-gradient(180deg, transparent 0%, rgba($background, 0.95) 20%, $background 100%);\n  z-index: 10;\n}\n\n.submit-btn {\n  --background: linear-gradient(135deg, #{$primary} 0%, #{$primary-light} 100%);\n  --border-radius: #{$border-radius};\n  --box-shadow: 0 8px 24px rgba(230, 114, 0, 0.4);\n  height: 54px;\n  font-size: 16px;\n  font-weight: 700;\n  letter-spacing: 0.3px;\n  text-transform: none;\n  \n  &:active {\n    transform: translateY(2px);\n  }\n  \n  ion-icon {\n    font-size: 22px;\n  }\n}\n\n// Responsive\n@media (max-width: 576px) {\n  .date-selectors {\n    grid-template-columns: 1fr;\n  }\n  \n  .cover-wrapper {\n    height: 180px;\n  }\n}\n\n// Animations\n@keyframes slideUp {\n  from {\n    opacity: 0;\n    transform: translateY(20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n.input-group,\n.vote-card,\n.rule-row,\n.toggle-card {\n  animation: slideUp 0.3s ease-out backwards;\n  \n  @for $i from 1 through 10 {\n    &:nth-child(#{$i}) {\n      animation-delay: #{$i * 0.05}s;\n    }\n  }\n}",
                    "styleUrl": "./challenge-form.component.scss"
                }
            ],
            "stylesData": "",
            "constructorObj": {
                "name": "constructor",
                "description": "",
                "deprecated": false,
                "deprecationMessage": "",
                "args": [
                    {
                        "name": "fb",
                        "type": "FormBuilder",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "creationService",
                        "type": "CreationService",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "modalCtrl",
                        "type": "ModalController",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "toastCtrl",
                        "type": "ToastController",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    }
                ],
                "line": 123,
                "jsdoctags": [
                    {
                        "name": "fb",
                        "type": "FormBuilder",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "creationService",
                        "type": "CreationService",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "modalCtrl",
                        "type": "ModalController",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "toastCtrl",
                        "type": "ToastController",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            },
            "extends": [],
            "implements": [
                "OnInit",
                "OnDestroy"
            ],
            "accessors": {
                "rules": {
                    "name": "rules",
                    "getSignature": {
                        "name": "rules",
                        "type": "unknown",
                        "returnType": "FormArray",
                        "line": 233,
                        "rawdescription": "\n\nGetter pour les règles (FormArray)\n",
                        "description": "<p>Getter pour les règles (FormArray)</p>\n"
                    }
                }
            },
            "templateData": "<!-- challenge-form.component.html (Design Mobile Moderne) -->\n<ion-header [translucent]=\"true\" class=\"modern-header\">\n  <ion-toolbar>\n    <ion-buttons slot=\"start\">\n      <ion-button (click)=\"onCancel()\" class=\"back-button\">\n        <ion-icon name=\"arrow-back\" slot=\"icon-only\"></ion-icon>\n      </ion-button>\n    </ion-buttons>\n    <ion-title>{{ isEditMode ? 'Modifier' : 'Nouveau défi' }}</ion-title>\n    <ion-buttons slot=\"end\">\n      <ion-button \n        (click)=\"onSubmit()\" \n        [disabled]=\"challengeForm.invalid || isLoading\"\n        class=\"save-button\">\n        <ion-spinner *ngIf=\"isLoading\" name=\"crescent\"></ion-spinner>\n        <span *ngIf=\"!isLoading\">{{ isEditMode ? 'Sauver' : 'Créer' }}</span>\n      </ion-button>\n    </ion-buttons>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content [fullscreen]=\"true\" class=\"modern-content\">\n  <form [formGroup]=\"challengeForm\" class=\"modern-form\">\n    \n    <!-- Image de couverture -->\n    <div class=\"cover-section\">\n      <div class=\"cover-wrapper\" [class.has-image]=\"coverImagePreview\">\n        <img *ngIf=\"coverImagePreview\" [src]=\"coverImagePreview\" alt=\"Cover\" class=\"cover-img\" />\n        <div class=\"cover-placeholder\" *ngIf=\"!coverImagePreview\">\n          <ion-icon name=\"image\"></ion-icon>\n          <p>Ajouter une image</p>\n        </div>\n        <div class=\"cover-actions\">\n          <ion-fab-button size=\"small\" (click)=\"fileInput.click()\" class=\"fab-action\">\n            <ion-icon [name]=\"coverImagePreview ? 'pencil' : 'camera'\"></ion-icon>\n          </ion-fab-button>\n          <ion-fab-button \n            *ngIf=\"coverImagePreview\" \n            size=\"small\" \n            color=\"danger\" \n            (click)=\"removeCoverImage()\"\n            class=\"fab-action\">\n            <ion-icon name=\"trash\"></ion-icon>\n          </ion-fab-button>\n        </div>\n        <input \n          type=\"file\" \n          accept=\"image/*\" \n          (change)=\"onCoverImageChange($event)\"\n          style=\"display: none\"\n          #fileInput>\n      </div>\n    </div>\n\n    <!-- Contenu du formulaire -->\n    <div class=\"form-content\">\n      \n      <!-- Nom du défi -->\n      <div class=\"input-group\">\n        <div class=\"input-header\">\n          <label class=\"input-label\">Nom du défi <span class=\"required\">*</span></label>\n          <span class=\"char-counter\">{{ challengeForm.get('name')?.value?.length || 0 }}/100</span>\n        </div>\n        <ion-input \n          formControlName=\"name\"\n          placeholder=\"Ex: Concours photo d'été\"\n          class=\"modern-input\"\n          [class.error]=\"challengeForm.get('name')?.invalid && challengeForm.get('name')?.touched\">\n        </ion-input>\n        <div class=\"error-message\" *ngIf=\"challengeForm.get('name')?.hasError('required') && challengeForm.get('name')?.touched\">\n          Ce champ est requis\n        </div>\n      </div>\n\n      <!-- Description -->\n      <div class=\"input-group\">\n        <div class=\"input-header\">\n          <label class=\"input-label\">Description<span class=\"required\">*</span></label>\n          <span class=\"char-counter\">{{ challengeForm.get('description')?.value?.length || 0 }}/1000</span>\n        </div>\n        <ion-textarea \n          formControlName=\"description\"\n          placeholder=\"Décrivez votre défi...\"\n          [autoGrow]=\"true\"\n          rows=\"4\"\n          class=\"modern-textarea\"\n          [class.error]=\"challengeForm.get('description')?.invalid && challengeForm.get('description')?.touched\">\n        </ion-textarea>\n        <div class=\"error-message\" *ngIf=\"challengeForm.get('description')?.hasError('required') && challengeForm.get('description')?.touched\">\n          Une description est requise\n        </div>\n      </div>\n\n      <!-- Durée et dates -->\n      <div class=\"section-title\">\n        <ion-icon name=\"calendar-outline\"></ion-icon>\n        <span>Période</span>\n      </div>\n\n      <div class=\"date-selectors\">\n        <div class=\"date-item\">\n          <label class=\"input-label\">\n            <ion-icon name=\"play-circle-outline\"></ion-icon>\n            Début<span class=\"required\">*</span>\n          </label>\n          <ion-datetime-button datetime=\"startDate\" class=\"date-button\"></ion-datetime-button>\n          <ion-modal [keepContentsMounted]=\"true\">\n            <ng-template>\n              <ion-datetime \n                id=\"startDate\" \n                formControlName=\"start_date\" \n                presentation=\"date\"\n                [min]=\"today\"\n                [showDefaultButtons]=\"true\">\n              </ion-datetime>\n            </ng-template>\n          </ion-modal>\n        </div>\n\n        <div class=\"date-item\">\n          <label class=\"input-label\">\n            <ion-icon name=\"stop-circle-outline\"></ion-icon>\n            Durée\n          </label>\n          <div class=\"duration-display\">\n            <ion-input \n              formControlName=\"duration_days\"\n              type=\"number\"\n              min=\"1\"\n              max=\"365\"\n              placeholder=\"7\"\n              class=\"modern-input duration-input-compact\">\n            </ion-input>\n            <span class=\"duration-label\">jours</span>\n          </div>\n        </div>\n      </div>\n\n      <!-- Affichage de la date de fin calculée -->\n      <div class=\"computed-date\" *ngIf=\"computedEndDate\">\n        <ion-icon name=\"information-circle-outline\"></ion-icon>\n        <span>Se termine le {{ computedEndDate | date:'dd/MM/yyyy' }}</span>\n      </div>\n\n      <!-- Règle de vote -->\n      <div class=\"section-title\">\n        <ion-icon name=\"thumbs-up-outline\"></ion-icon>\n        <span>Vote</span>\n      </div>\n\n      <div class=\"vote-options\">\n        <div \n          class=\"vote-card\"\n          [class.selected]=\"challengeForm.get('vote_rule')?.value === 'one_vote_per_user'\"\n          (click)=\"challengeForm.patchValue({vote_rule: 'one_vote_per_user'})\">\n          <ion-icon name=\"person\"></ion-icon>\n          <div class=\"vote-info\">\n            <h4>Un vote par personne</h4>\n            <p>Chaque utilisateur vote une fois</p>\n          </div>\n          <div class=\"vote-check\">\n            <ion-icon name=\"checkmark-circle\" *ngIf=\"challengeForm.get('vote_rule')?.value === 'one_vote_per_user'\"></ion-icon>\n          </div>\n        </div>\n\n        <div \n          class=\"vote-card\"\n          [class.selected]=\"challengeForm.get('vote_rule')?.value === 'unlimited_votes'\"\n          (click)=\"challengeForm.patchValue({vote_rule: 'unlimited_votes'})\">\n          <ion-icon name=\"infinite\"></ion-icon>\n          <div class=\"vote-info\">\n            <h4>Votes illimités</h4>\n            <p>Les utilisateurs peuvent voter plusieurs fois</p>\n          </div>\n          <div class=\"vote-check\">\n            <ion-icon name=\"checkmark-circle\" *ngIf=\"challengeForm.get('vote_rule')?.value === 'unlimited_votes'\"></ion-icon>\n          </div>\n        </div>\n      </div>\n\n      <!-- Action principale -->\n      <div class=\"input-group\">\n        <label class=\"input-label\">Bouton d'action</label>\n        <ion-select \n          formControlName=\"call_to_action\"\n          placeholder=\"Choisir une action\"\n          interface=\"action-sheet\"\n          class=\"modern-select\">\n          <ion-select-option *ngFor=\"let action of callToActionOptions\" [value]=\"action\">\n            {{ action }}\n          </ion-select-option>\n        </ion-select>\n      </div>\n\n      <!-- Récompense -->\n      <div class=\"section-title\">\n        <ion-icon name=\"gift-outline\"></ion-icon>\n        <span>Récompense</span>\n      </div>\n\n      <div class=\"input-group\">\n        <ion-input \n          formControlName=\"prize\"\n          placeholder=\"Ex: 500€, iPhone, Formation...\"\n          class=\"modern-input\">\n        </ion-input>\n      </div>\n\n      <!-- Règles -->\n      <div class=\"section-title\">\n        <ion-icon name=\"list-outline\"></ion-icon>\n        <span>Règles du défi</span>\n        <ion-button fill=\"clear\" size=\"small\" (click)=\"addRule()\">\n          <ion-icon name=\"add-circle\" slot=\"icon-only\"></ion-icon>\n        </ion-button>\n      </div>\n\n      <div formArrayName=\"rules\" class=\"rules-list\">\n        <div *ngFor=\"let rule of rules.controls; let i = index\" class=\"rule-row\">\n          <div class=\"rule-number\">{{ i + 1 }}</div>\n          <ion-input \n            [formControlName]=\"i\"\n            placeholder=\"Règle du défi\"\n            class=\"modern-input rule-input\">\n          </ion-input>\n          <ion-button \n            fill=\"clear\" \n            color=\"medium\" \n            (click)=\"removeRule(i)\"\n            *ngIf=\"rules.length > 1\"\n            class=\"remove-rule\">\n            <ion-icon name=\"close-circle\" slot=\"icon-only\"></ion-icon>\n          </ion-button>\n        </div>\n      </div>\n\n      <!-- Options -->\n      <div class=\"section-title\">\n        <ion-icon name=\"options-outline\"></ion-icon>\n        <span>Options</span>\n      </div>\n\n      <div class=\"toggle-card\">\n        <div class=\"toggle-content\">\n          <div class=\"toggle-icon\">\n            <ion-icon name=\"flash\"></ion-icon>\n          </div>\n          <div class=\"toggle-info\">\n            <h4>Défi actif</h4>\n            <p>Visible par tous les utilisateurs</p>\n          </div>\n        </div>\n        <ion-toggle \n          formControlName=\"is_active\"\n          class=\"modern-toggle\">\n        </ion-toggle>\n      </div>\n\n    </div>\n\n    <!-- Bouton flottant de soumission -->\n    <div class=\"submit-footer\">\n      <ion-button \n        expand=\"block\" \n        (click)=\"onSubmit()\"\n        [disabled]=\"challengeForm.invalid || isLoading\"\n        class=\"submit-btn\">\n        <ion-spinner *ngIf=\"isLoading\" name=\"crescent\" slot=\"start\"></ion-spinner>\n        <ion-icon *ngIf=\"!isLoading\" name=\"rocket\" slot=\"start\"></ion-icon>\n        {{ isEditMode ? 'Mettre à jour' : 'Lancer le défi' }}\n      </ion-button>\n    </div>\n\n  </form>\n</ion-content>"
        },
        {
            "name": "ContentCommentsPage",
            "id": "component-ContentCommentsPage-517869e8f302cb75e981021fbe9aa8549e1231710908ad7eb940f01ad8a6601b90a4c055b89b18688e07c6534c20706ed8b33d7fd1ae7a571d91b7d437ab14c5",
            "file": "src/app/content-comments/content-comments.page.ts",
            "encapsulation": [],
            "entryComponents": [],
            "inputs": [],
            "outputs": [],
            "providers": [],
            "selector": "app-content-comments",
            "styleUrls": [
                "./content-comments.page.scss"
            ],
            "styles": [],
            "templateUrl": [
                "./content-comments.page.html"
            ],
            "viewProviders": [],
            "hostDirectives": [],
            "inputsClass": [],
            "outputsClass": [],
            "propertiesClass": [
                {
                    "name": "comments",
                    "defaultValue": "[]",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "Comment[]",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 35
                },
                {
                    "name": "contentId",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 33
                },
                {
                    "name": "currentUser",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "UserProfile",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 34
                },
                {
                    "name": "isLoading",
                    "defaultValue": "false",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 37
                },
                {
                    "name": "isPosting",
                    "defaultValue": "false",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 38
                },
                {
                    "name": "newComment",
                    "defaultValue": "''",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 36
                }
            ],
            "methodsClass": [
                {
                    "name": "addComment",
                    "args": [],
                    "optional": false,
                    "returnType": "any",
                    "typeParameters": [],
                    "line": 80,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        134
                    ]
                },
                {
                    "name": "goBack",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 129,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "loadComments",
                    "args": [],
                    "optional": false,
                    "returnType": "unknown",
                    "typeParameters": [],
                    "line": 68,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        134
                    ]
                },
                {
                    "name": "ngOnInit",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 60,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "onImageError",
                    "args": [
                        {
                            "name": "event",
                            "type": "any",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 133,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "event",
                            "type": "any",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "toggleLike",
                    "args": [
                        {
                            "name": "comment",
                            "type": "Comment",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "any",
                    "typeParameters": [],
                    "line": 106,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        134
                    ],
                    "jsdoctags": [
                        {
                            "name": "comment",
                            "type": "Comment",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                }
            ],
            "deprecated": false,
            "deprecationMessage": "",
            "hostBindings": [],
            "hostListeners": [],
            "standalone": true,
            "imports": [
                {
                    "name": "IonSpinner"
                },
                {
                    "name": "IonFooter"
                },
                {
                    "name": "IonLabel"
                },
                {
                    "name": "IonAvatar"
                },
                {
                    "name": "IonList"
                },
                {
                    "name": "IonButtons"
                },
                {
                    "name": "IonIcon"
                },
                {
                    "name": "IonItem"
                },
                {
                    "name": "IonButton"
                },
                {
                    "name": "IonContent"
                },
                {
                    "name": "IonHeader"
                },
                {
                    "name": "IonTitle"
                },
                {
                    "name": "IonToolbar"
                },
                {
                    "name": "CommonModule",
                    "type": "module"
                },
                {
                    "name": "FormsModule",
                    "type": "module"
                },
                {
                    "name": "IonTextarea"
                },
                {
                    "name": "IonBackButton"
                }
            ],
            "description": "",
            "rawdescription": "\n",
            "type": "component",
            "sourceCode": "import { Component, OnInit } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { addIcons } from 'ionicons';\nimport { send,chatbubbleOutline } from 'ionicons/icons';\nimport { \n  IonContent, IonHeader, IonTitle, IonToolbar, IonButton, IonItem, \n  IonIcon, IonButtons, IonList, IonAvatar, IonLabel, IonFooter, \n  IonSpinner, IonTextarea, IonBackButton\n} from '@ionic/angular/standalone';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { switchMap } from 'rxjs/operators';\nimport { of } from 'rxjs';\nimport { CommentService } from '../../services/COMMENTS_SERVICE/comment-service';\nimport { Comment } from '../../models/Comment';\nimport { UserProfile } from '../../models/User';\n\n\n@Component({\n  selector: 'app-content-comments',\n  templateUrl: './content-comments.page.html',\n  styleUrls: ['./content-comments.page.scss'],\n  standalone: true,\n  imports: [\n    IonSpinner, IonFooter, IonLabel, IonAvatar, IonList, \n    IonButtons, IonIcon, IonItem, IonButton, IonContent, \n    IonHeader, IonTitle, IonToolbar, CommonModule, FormsModule,\n    IonTextarea, IonBackButton\n  ]\n})\nexport class ContentCommentsPage implements OnInit {\n  contentId!: string;\n  currentUser!: UserProfile;\n  comments: Comment[] = [];\n  newComment = '';\n  isLoading = false;\n  isPosting = false;\n\n constructor(\n    private route: ActivatedRoute,\n    private router: Router,\n    private commentService: CommentService\n  ) {\n    // Récupérer l'ID du contenu depuis l'URL\n    this.contentId = this.route.snapshot.paramMap.get('id') || '';\n    \n    // Récupérer l'utilisateur depuis les extras de navigation\n    const navigation = this.router.getCurrentNavigation();\n    const state = navigation?.extras.state as { currentUser: UserProfile };\n    \n    if (state?.currentUser) {\n      this.currentUser = state.currentUser;\n    } else {\n      // Rediriger si l'utilisateur n'est pas défini\n      this.router.navigate(['/tabs/home']);\n    }\n  }\n\n  ngOnInit() {\n    addIcons({\n      send,\n      chatbubbleOutline\n    });\n    this.loadComments();\n  }\n\n  async loadComments() {\n    this.isLoading = true;\n    try {\n      this.comments = await this.commentService.getComments(this.contentId).toPromise() || [];\n    } catch (error) {\n      console.error('Erreur lors du chargement des commentaires', error);\n    } finally {\n      this.isLoading = false;\n    }\n    return of(null);\n  }\n\n  async addComment() {\n    if (!this.newComment.trim() || !this.currentUser?.id) return;\n\n    this.isPosting = true;\n    try {\n      const comment: Omit<Comment, 'id' | 'createdAt' | 'likes'> = {\n        contentId: this.contentId,\n        userId: this.currentUser.id,\n        username: this.currentUser.username || 'Utilisateur',\n        userAvatar: this.currentUser.avatar,\n        text: this.newComment,\n        parentId: undefined\n      };\n\n      const newComment = await this.commentService.addComment(comment).toPromise();\n      if (newComment) {\n        this.comments = [newComment, ...this.comments];\n        this.newComment = '';\n      }\n    } catch (error) {\n      console.error('Erreur lors de l\\'ajout du commentaire', error);\n    } finally {\n      this.isPosting = false;\n    }\n  }\n\n  async toggleLike(comment: Comment) {\n  if (!this.currentUser?.id) return;\n\n  try {\n    const wasLiked = comment.isLiked ?? false; // Utilisation de l'opérateur de coalescence nulle\n    comment.isLiked = !wasLiked;\n    comment.likes = wasLiked ? (comment.likes - 1) : (comment.likes + 1);\n    \n    await this.commentService.toggleLike(\n      comment.id!,\n      this.currentUser.id,\n      wasLiked\n    ).toPromise();\n  } catch (error) {\n    console.error('Erreur lors du like', error);\n    // Revert UI on error\n    if (comment.isLiked !== undefined) {\n      comment.isLiked = !comment.isLiked;\n      comment.likes += comment.isLiked ? 1 : -1;\n    }\n  }\n}\n\n  goBack() {\n    this.router.navigate(['/tabs/home']);\n  }\n\n  onImageError(event: any) {\n    event.target.src = 'assets/avatar-default.png';\n  }\n}",
            "assetsDirs": [],
            "styleUrlsData": [
                {
                    "data": "/* src/app/pages/comments/comments.page.scss */\nion-content {\n  --padding-bottom: 80px; /* Pour éviter que le champ de saisie ne cache pas le contenu */\n}\n\n.comment-actions {\n  margin-top: 8px;\n  \n  ion-button {\n    --padding-start: 0;\n    --padding-end: 0;\n    margin: 0 8px 0 0;\n    height: auto;\n    \n    ion-icon {\n      margin-right: 4px;\n    }\n  }\n}\n\n.comment-input {\n  position: fixed;\n  bottom: 0;\n  width: 100%;\n  background: var(--ion-background-color);\n  box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);\n  \n  ion-textarea {\n    --padding-start: 0;\n    --padding-end: 0;\n    font-size: 14px;\n  }\n}\n\n.loading-container {\n  display: flex;\n  justify-content: center;\n  padding: 20px;\n}\n\n.no-comments {\n  text-align: center;\n  padding: 2rem;\n  color: var(--ion-color-medium);\n  \n  ion-icon {\n    font-size: 3rem;\n    opacity: 0.5;\n    margin-bottom: 1rem;\n  }\n\n  .hint {\n    font-size: 0.9rem;\n    color: var(--ion-color-medium);\n    margin-top: 0.5rem;\n  }\n}",
                    "styleUrl": "./content-comments.page.scss"
                }
            ],
            "stylesData": "",
            "constructorObj": {
                "name": "constructor",
                "description": "",
                "deprecated": false,
                "deprecationMessage": "",
                "args": [
                    {
                        "name": "route",
                        "type": "ActivatedRoute",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "router",
                        "type": "Router",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "commentService",
                        "type": "CommentService",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    }
                ],
                "line": 38,
                "jsdoctags": [
                    {
                        "name": "route",
                        "type": "ActivatedRoute",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "router",
                        "type": "Router",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "commentService",
                        "type": "CommentService",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            },
            "extends": [],
            "implements": [
                "OnInit"
            ],
            "templateData": "<ion-header>\n  <ion-toolbar>\n    <ion-buttons slot=\"start\">\n      <ion-back-button defaultHref=\"/tabs/home\"></ion-back-button>\n    </ion-buttons>\n    <ion-title>Commentaires</ion-title>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content class=\"ion-padding\">\n  <!-- Liste des commentaires -->\n  <div *ngIf=\"!isLoading; else loading\">\n    <div *ngIf=\"!comments || comments.length === 0\" class=\"no-comments\">\n      <ion-icon name=\"chatbubble-outline\"></ion-icon>\n      <p>Aucun commentaire pour le moment</p>\n      <p class=\"hint\">Soyez le premier à commenter !</p>\n    </div>\n    \n    <ion-list>\n      <ion-item *ngFor=\"let comment of comments\" lines=\"full\">\n        <ion-avatar slot=\"start\">\n          <img [src]=\"comment.userAvatar || 'assets/avatar-default.png'\" (error)=\"onImageError($event)\">\n        </ion-avatar>\n        \n        <ion-label>\n          <h3>{{ comment.username }}</h3>\n          <p>{{ comment.text }}</p>\n          <div class=\"comment-actions\">\n            <ion-button fill=\"clear\" size=\"small\" (click)=\"toggleLike(comment)\">\n              <ion-icon \n                [name]=\"comment.isLiked ? 'heart' : 'heart-outline'\" \n                [color]=\"comment.isLiked ? 'danger' : 'medium'\">\n              </ion-icon>\n              <span *ngIf=\"comment.likes > 0\">{{ comment.likes }}</span>\n            </ion-button>\n          </div>\n        </ion-label>\n      </ion-item>\n    </ion-list>\n\n    <!-- Champ de saisie du commentaire -->\n    <ion-footer class=\"comment-input\">\n      <ion-item>\n        <ion-textarea \n          [(ngModel)]=\"newComment\" \n          placeholder=\"Ajouter un commentaire...\"\n          rows=\"1\"\n          autoGrow=\"true\">\n        </ion-textarea>\n        <ion-buttons slot=\"end\">\n          <ion-button (click)=\"addComment()\" [disabled]=\"!newComment.trim() || isPosting\">\n            <ion-icon name=\"send\" [color]=\"newComment.trim() ? 'primary' : 'medium'\"></ion-icon>\n          </ion-button>\n        </ion-buttons>\n      </ion-item>\n    </ion-footer>\n  </div>\n\n  <ng-template #loading>\n    <div class=\"loading-container\">\n      <ion-spinner></ion-spinner>\n    </div>\n  </ng-template>\n</ion-content>"
        },
        {
            "name": "ContentDetailPage",
            "id": "component-ContentDetailPage-bfe032a939991abada90b2700409eb8dcbc22800a3ca2291eb5faf650c3b00a06f23aa80ccef2c566475c07613d6a6caa0e820906ed2441bed71842eba5a792b",
            "file": "src/app/content-detail/content-detail.page.ts",
            "encapsulation": [],
            "entryComponents": [],
            "inputs": [],
            "outputs": [],
            "providers": [],
            "selector": "app-content-detail",
            "styleUrls": [
                "./content-detail.page.scss"
            ],
            "styles": [],
            "templateUrl": [
                "./content-detail.page.html"
            ],
            "viewProviders": [],
            "hostDirectives": [],
            "inputsClass": [],
            "outputsClass": [],
            "propertiesClass": [
                {
                    "name": "commentInput",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "ElementRef<HTMLIonInputElement>",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 30,
                    "decorators": [
                        {
                            "name": "ViewChild",
                            "stringifiedArguments": "'commentInput'"
                        }
                    ],
                    "modifierKind": [
                        171
                    ]
                },
                {
                    "name": "comments",
                    "defaultValue": "[]",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "Comment[]",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 39
                },
                {
                    "name": "commentsSection",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "ElementRef<HTMLDivElement>",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 31,
                    "decorators": [
                        {
                            "name": "ViewChild",
                            "stringifiedArguments": "'commentsSection'"
                        }
                    ],
                    "modifierKind": [
                        171
                    ]
                },
                {
                    "name": "content",
                    "defaultValue": "null",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "Content | null",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 33
                },
                {
                    "name": "currentUser",
                    "defaultValue": "null",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "AuthUser | null",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 40
                },
                {
                    "name": "error",
                    "defaultValue": "null",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string | null",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 35
                },
                {
                    "name": "isLiked",
                    "defaultValue": "false",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 36
                },
                {
                    "name": "isLoading",
                    "defaultValue": "true",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 34
                },
                {
                    "name": "isSaved",
                    "defaultValue": "false",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 37
                },
                {
                    "name": "newComment",
                    "defaultValue": "''",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 38
                }
            ],
            "methodsClass": [
                {
                    "name": "addComment",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 125,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "focusCommentInput",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 119,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "getFullFileUrl",
                    "args": [
                        {
                            "name": "relativePath",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "string",
                    "typeParameters": [],
                    "line": 61,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "relativePath",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "likeComment",
                    "args": [
                        {
                            "name": "commentId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 153,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "commentId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "loadComments",
                    "args": [
                        {
                            "name": "contentId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 86,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        123
                    ],
                    "jsdoctags": [
                        {
                            "name": "contentId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "loadContent",
                    "args": [
                        {
                            "name": "id",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 67,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        123
                    ],
                    "jsdoctags": [
                        {
                            "name": "id",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "ngOnInit",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 49,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "scrollToComments",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 162,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "sharePost",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 170,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "toggleLike",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 94,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "toggleMedia",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 166,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "toggleSave",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 114,
                    "deprecated": false,
                    "deprecationMessage": ""
                }
            ],
            "deprecated": false,
            "deprecationMessage": "",
            "hostBindings": [],
            "hostListeners": [],
            "standalone": true,
            "imports": [
                {
                    "name": "IonFooter"
                },
                {
                    "name": "IonButton"
                },
                {
                    "name": "IonAvatar"
                },
                {
                    "name": "IonIcon"
                },
                {
                    "name": "IonSpinner"
                },
                {
                    "name": "IonBackButton"
                },
                {
                    "name": "IonButtons"
                },
                {
                    "name": "IonContent"
                },
                {
                    "name": "IonHeader"
                },
                {
                    "name": "IonTitle"
                },
                {
                    "name": "IonToolbar"
                },
                {
                    "name": "CommonModule",
                    "type": "module"
                },
                {
                    "name": "FormsModule",
                    "type": "module"
                }
            ],
            "description": "",
            "rawdescription": "\n",
            "type": "component",
            "sourceCode": "import { Component, ElementRef, OnInit, ViewChild } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { IonContent, IonHeader, IonTitle, IonToolbar, IonButtons, IonBackButton, IonSpinner, IonIcon, IonAvatar, IonButton, IonFooter } from '@ionic/angular/standalone';\nimport { Content } from 'src/models/Content';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { CreationService } from 'src/services/CREATION/creation-service';\nimport { Auth, AuthUser } from 'src/services/AUTH/auth';\nimport { User } from 'src/models/User';\ninterface Comment {\n  id?: string;\n  text: string;\n  userId: string;\n  user: {\n    id: string;\n    username: string;\n    avatar?: string;\n  };\n  timestamp: Date;\n  likes: number;\n}\n@Component({\n  selector: 'app-content-detail',\n  templateUrl: './content-detail.page.html',\n  styleUrls: ['./content-detail.page.scss'],\n  standalone: true,\n  imports: [IonFooter, IonButton, IonAvatar, IonIcon, IonSpinner, IonBackButton, IonButtons, IonContent, IonHeader, IonTitle, IonToolbar, CommonModule, FormsModule]\n})\nexport class ContentDetailPage implements OnInit {\n  @ViewChild('commentInput') commentInput!: ElementRef<HTMLIonInputElement>;\n  @ViewChild('commentsSection') commentsSection!: ElementRef<HTMLDivElement>;\n\n  content: Content | null = null;\n  isLoading = true;\n  error: string | null = null;\n  isLiked = false;\n  isSaved = false;\n  newComment = '';\n  comments: Comment[] = [];\n  currentUser: AuthUser | null = null;\n\n  constructor(\n    private route: ActivatedRoute,\n    private router: Router,\n    private creationService: CreationService,\n    private authService: Auth\n  ) {}\n\n  ngOnInit() {\n    this.currentUser = this.authService.getCurrentUser();\n    const contentId = this.route.snapshot.paramMap.get('id');\n    if (contentId) {\n      this.loadContent(contentId);\n      this.loadComments(contentId);\n    } else {\n      this.error = 'Aucun contenu spécifié';\n      this.isLoading = false;\n    }\n  }\n\n  getFullFileUrl(relativePath: string): string {\n    const apiUrl = 'http://localhost:3000'; \n    const cleanPath = relativePath.startsWith('/') ? relativePath.substring(1) : relativePath;\n    return `${apiUrl}/${cleanPath}`;\n  }\n\n  private loadContent(id: string) {\n    this.isLoading = true;\n    this.creationService.getContentById(id).subscribe({\n      next: (content) => {\n        this.content = content;\n        this.isLoading = false;\n        // Vérifier si l'utilisateur actuel a aimé ce contenu\n        if (content.likeCount && this.currentUser) {\n          this.isLiked = false; //content.likeCount.some(like => like.userId === this.currentUser?.id);\n        }\n      },\n      error: (err) => {\n        console.error('Erreur lors du chargement du contenu:', err);\n        this.error = 'Impossible de charger le contenu';\n        this.isLoading = false;\n      }\n    });\n  }\n\n  private loadComments(contentId: string) {\n    // Implémentez le chargement des commentaires depuis votre service\n    // Exemple:\n    // this.creationService.getComments(contentId).subscribe(comments => {\n    //   this.comments = comments;\n    // });\n  }\n\n  toggleLike() {\n    if (!this.content || !this.currentUser) return;\n\n    this.isLiked = !this.isLiked;\n    \n    if (this.isLiked) {\n      // Ajouter un like\n      if (this.content.likeCount !== undefined) {\n        this.content.likeCount++;\n      }\n      // this.creationService.likeContent(this.content.id).subscribe();\n    } else {\n      // Retirer le like\n      if (this.content.likeCount && this.content.likeCount > 0) {\n        this.content.likeCount--;\n      }\n      // this.creationService.unlikeContent(this.content.id).subscribe();\n    }\n  }\n\n  toggleSave() {\n    this.isSaved = !this.isSaved;\n    // Implémentez la logique de sauvegarde\n  }\n\n  focusCommentInput() {\n    setTimeout(() => {\n      this.commentInput.nativeElement.setFocus();\n    }, 100);\n  }\n\n  addComment() {\n    if (!this.newComment.trim() || !this.content || !this.currentUser) return;\n\n    const newComment: Comment = {\n      id: Date.now().toString(),\n      userId: this.currentUser.id as string,\n      user: {\n        id: this.currentUser.id as string,\n        username: this.currentUser.email || 'Utilisateur',\n        avatar: this.currentUser.user_type\n      },\n      text: this.newComment,\n      timestamp: new Date(),\n      likes: 0\n    };\n\n    this.comments.push(newComment);\n    this.newComment = '';\n\n    // Faire défiler vers le bas pour voir le nouveau commentaire\n    setTimeout(() => {\n      this.commentsSection.nativeElement.scrollTop = this.commentsSection.nativeElement.scrollHeight;\n    }, 100);\n\n    // Envoyer le commentaire au serveur\n    // this.creationService.addComment(this.content.id, newComment).subscribe();\n  }\n\n  likeComment(commentId: string) {\n    // Implémentez la logique pour aimer un commentaire\n    //const comment = this.comments.find(c => c.id === commentId);\n    //if (comment) {\n      //comment.likeCount++;\n      // this.creationService.likeComment(commentId).subscribe();\n    //}\n  }\n\n  scrollToComments() {\n    this.commentsSection.nativeElement.scrollIntoView({ behavior: 'smooth' });\n  }\n\n  toggleMedia() {\n    // Implémentez la logique pour afficher le média en plein écran\n  }\n\n  sharePost() {\n    // Implémentez la logique de partage\n    if (this.content) {\n      const shareData = {\n        title: this.content.title,\n        text: this.content.description,\n        url: window.location.href\n      };\n      \n      if (navigator.share) {\n        navigator.share(shareData).catch(console.error);\n      } else {\n        // Fallback pour les navigateurs qui ne supportent pas l'API Web Share\n        console.log('Partage non supporté sur ce navigateur');\n      }\n    }\n  }\n}\n",
            "assetsDirs": [],
            "styleUrlsData": [
                {
                    "data": ":host {\n  --background: var(--ion-color-light);\n}\n\nion-content {\n  --padding-bottom: 60px; // Pour éviter que le champ de commentaire ne cache le contenu\n}\n\n.loading-container {\n  display: flex;\n  justify-content: center;\n  padding: 20px;\n}\n\n.error-message {\n  color: var(--ion-color-danger);\n  padding: 20px;\n  text-align: center;\n}\n\n.post-container {\n  background: white;\n  margin-bottom: 10px;\n  border-radius: 8px;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n}\n\n.post-header {\n  display: flex;\n  align-items: center;\n  padding: 12px;\n  \n  .post-avatar {\n    width: 32px;\n    height: 32px;\n    margin-right: 10px;\n  }\n\n  .post-user-info {\n    flex: 1;\n    \n    h3 {\n      margin: 0;\n      font-size: 14px;\n      font-weight: 600;\n    }\n\n    p {\n      margin: 2px 0 0;\n      font-size: 12px;\n      color: var(--ion-color-medium);\n    }\n  }\n\n  .post-options {\n    --padding-start: 8px;\n    --padding-end: 8px;\n    --color: var(--ion-color-dark);\n  }\n}\n\n.post-content {\n  .post-media {\n    width: 100%;\n    max-height: 600px;\n    overflow: hidden;\n    \n    img {\n      width: 100%;\n      height: 100%;\n      object-fit: cover;\n    }\n  }\n\n  .post-caption {\n    padding: 10px 15px;\n    \n    p {\n      margin: 0;\n      font-size: 14px;\n      line-height: 1.4;\n    }\n  }\n}\n\n.post-actions {\n  display: flex;\n  justify-content: space-between;\n  padding: 5px 10px;\n  border-bottom: 1px solid var(--ion-color-light-shade);\n\n  .action-buttons {\n    display: flex;\n    gap: 5px;\n  }\n\n  ion-button {\n    --padding-start: 8px;\n    --padding-end: 8px;\n    --color: var(--ion-color-dark);\n    font-size: 24px;\n  }\n}\n\n.post-stats {\n  padding: 5px 15px;\n\n  .likes-count {\n    font-weight: 600;\n    font-size: 14px;\n    margin: 5px 0;\n  }\n\n  .comments-count {\n    color: var(--ion-color-medium);\n    font-size: 14px;\n    margin: 5px 0;\n  }\n}\n\n.comments-section {\n  padding: 0 15px 10px;\n\n  .comment {\n    display: flex;\n    margin-bottom: 10px;\n\n    .comment-avatar {\n      width: 32px;\n      height: 32px;\n      margin-right: 10px;\n    }\n\n    .comment-content {\n      flex: 1;\n\n      p {\n        margin: 0 0 3px;\n        font-size: 14px;\n        line-height: 1.3;\n      }\n\n      .comment-actions {\n        display: flex;\n        align-items: center;\n        gap: 10px;\n        font-size: 12px;\n        color: var(--ion-color-medium);\n\n        .like-comment {\n          color: var(--ion-color-dark);\n          font-weight: 500;\n        }\n\n        .comment-likes {\n          color: var(--ion-color-dark);\n        }\n      }\n    }\n  }\n}\n\n.comment-input-container {\n  display: flex;\n  align-items: center;\n  padding: 8px 10px;\n  background: white;\n  border-top: 1px solid var(--ion-color-light-shade);\n\n  .current-user-avatar {\n    width: 32px;\n    height: 32px;\n    margin-right: 10px;\n  }\n\n  ion-input {\n    --background: var(--ion-color-light);\n    --padding-start: 12px;\n    --padding-end: 12px;\n    --border-radius: 20px;\n    --placeholder-color: var(--ion-color-medium);\n    --placeholder-opacity: 0.8;\n    font-size: 14px;\n    height: 40px;\n  }\n\n  ion-button {\n    --padding-start: 8px;\n    --padding-end: 8px;\n    --color: var(--ion-color-primary);\n  }\n}",
                    "styleUrl": "./content-detail.page.scss"
                }
            ],
            "stylesData": "",
            "constructorObj": {
                "name": "constructor",
                "description": "",
                "deprecated": false,
                "deprecationMessage": "",
                "args": [
                    {
                        "name": "route",
                        "type": "ActivatedRoute",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "router",
                        "type": "Router",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "creationService",
                        "type": "CreationService",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "authService",
                        "type": "Auth",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    }
                ],
                "line": 40,
                "jsdoctags": [
                    {
                        "name": "route",
                        "type": "ActivatedRoute",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "router",
                        "type": "Router",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "creationService",
                        "type": "CreationService",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "authService",
                        "type": "Auth",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            },
            "extends": [],
            "implements": [
                "OnInit"
            ],
            "templateData": "<ion-header [translucent]=\"true\">\n  <ion-toolbar>\n    <ion-buttons slot=\"start\">\n      <ion-back-button defaultHref=\"/tabs/profile\"></ion-back-button>\n    </ion-buttons>\n    <ion-title>Publication</ion-title>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content [fullscreen]=\"true\" *ngIf=\"content\">\n  <div *ngIf=\"isLoading\" class=\"loading-container\">\n    <ion-spinner></ion-spinner>\n  </div>\n\n  <div *ngIf=\"error\" class=\"error-message\">\n    {{ error }}\n  </div>\n\n  <div *ngIf=\"content\" class=\"post-container\">\n    <!-- En-tête du post -->\n    <div class=\"post-header\">\n      <ion-avatar class=\"post-avatar\">\n        <img [src]=\"content.duration\" alt=\"Profile\">\n      </ion-avatar>\n      <div class=\"post-user-info\">\n        <h3>{{ content.challengeId }}</h3>\n        <p>{{ content.createdAt | date:'dd/MM/yyyy' }}</p>\n      </div>\n      <ion-button fill=\"clear\" class=\"post-options\">\n        <ion-icon name=\"ellipsis-horizontal\"></ion-icon>\n      </ion-button>\n    </div>\n\n    <!-- Contenu du post -->\n    <div class=\"post-content\">\n      <div class=\"post-media\" *ngIf=\"content.fileUrl\">\n        <img [src]=\"getFullFileUrl(content.fileUrl)\" [alt]=\"content.title\" (click)=\"toggleMedia()\">\n      </div>\n      <div class=\"post-caption\">\n        <p><strong>{{ content.allowComments }}</strong> {{ content.description }}</p>\n      </div>\n    </div>\n\n    <!-- Actions du post -->\n    <div class=\"post-actions\">\n      <div class=\"action-buttons\">\n        <ion-button fill=\"clear\" (click)=\"toggleLike()\">\n          <ion-icon [name]=\"isLiked ? 'heart' : 'heart-outline'\" [color]=\"isLiked ? 'danger' : ''\"></ion-icon>\n        </ion-button>\n        <ion-button fill=\"clear\" (click)=\"focusCommentInput()\">\n          <ion-icon name=\"chatbubble-outline\"></ion-icon>\n        </ion-button>\n        <ion-button fill=\"clear\" (click)=\"sharePost()\">\n          <ion-icon name=\"paper-plane-outline\"></ion-icon>\n        </ion-button>\n      </div>\n      <ion-button fill=\"clear\" (click)=\"toggleSave()\">\n        <ion-icon [name]=\"isSaved ? 'bookmark' : 'bookmark-outline'\"></ion-icon>\n      </ion-button>\n    </div>\n\n    <!-- Likes et commentaires -->\n    <div class=\"post-stats\">\n      <p *ngIf=\"content.likeCount > 0\" class=\"likes-count\">{{ content.likeCount }} j'aime</p>\n      <p *ngIf=\"content.commentCount > 0\" class=\"comments-count\" (click)=\"scrollToComments()\">Voir les {{ content.commentCount }} commentaires</p>\n    </div>\n\n    <!-- Section commentaires -->\n    <div class=\"comments-section\" #commentsSection>\n      <div class=\"comment\" *ngFor=\"let comment of comments\">\n        <ion-avatar class=\"comment-avatar\">\n          <img [src]=\"comment.user.avatar || 'assets/avatar-default.png'\" alt=\"Profile\">\n        </ion-avatar>\n        <div class=\"comment-content\">\n          <p><strong>{{ comment.user.username }}</strong> {{ comment.text }}</p>\n          <div class=\"comment-actions\">\n            <span>{{ comment.timestamp | date:'dd/MM/yyyy' }}</span>\n            <span class=\"like-comment\" (click)=\"likeComment('10')\">J'aime</span>\n            <span *ngIf=\"comment.likes > 0\" class=\"comment-likes\">{{ comment.likes }} j'aime</span>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <!-- Champ de commentaire -->\n  <ion-footer class=\"comment-input-container\">\n    <ion-avatar class=\"current-user-avatar\">\n      <img [src]=\"currentUser?.email\" alt=\"You\">\n    </ion-avatar>\n    <ion-input \n      #commentInput\n      placeholder=\"Ajouter un commentaire...\" \n      [(ngModel)]=\"newComment\"\n      (keyup.enter)=\"addComment()\"\n    ></ion-input>\n    <ion-button fill=\"clear\" [disabled]=\"!newComment\" (click)=\"addComment()\">\n      <ion-icon name=\"send\" [color]=\"newComment ? 'primary' : 'medium'\"></ion-icon>\n    </ion-button>\n  </ion-footer>\n</ion-content>"
        },
        {
            "name": "DiscoveryViewComponent",
            "id": "component-DiscoveryViewComponent-5cd690b5c0ac378acd1c4e93ab844702e2cfea6550f39a2c4413b5306816fb5c6457a823aeb0364f8589cec094de636b9851d6a70918299b0d57782ca1f4e563",
            "file": "src/app/components/discovery-view/discovery-view.component.ts",
            "encapsulation": [],
            "entryComponents": [],
            "inputs": [],
            "outputs": [],
            "providers": [],
            "selector": "app-discovery-view",
            "styleUrls": [
                "./discovery-view.component.scss"
            ],
            "styles": [],
            "templateUrl": [
                "./discovery-view.component.html"
            ],
            "viewProviders": [],
            "hostDirectives": [],
            "inputsClass": [
                {
                    "name": "currentUserProfile",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "line": 32,
                    "type": "any",
                    "decorators": []
                }
            ],
            "outputsClass": [],
            "propertiesClass": [
                {
                    "name": "artistContents",
                    "defaultValue": "{}",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "literal type",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 37
                },
                {
                    "name": "destroy$",
                    "defaultValue": "new Subject<void>()",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 47,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "heroStats",
                    "defaultValue": "{\n    totalArtists: 0,\n    activeChallenges: 0,\n    totalVotes: 0\n  }",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "object",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 42
                },
                {
                    "name": "isFollowingUser",
                    "defaultValue": "{}",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "literal type",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 48
                },
                {
                    "name": "isLoadingArtists",
                    "defaultValue": "false",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 39
                },
                {
                    "name": "isLoadingCreators",
                    "defaultValue": "false",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 40
                },
                {
                    "name": "isLoadingFans",
                    "defaultValue": "false",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 41
                },
                {
                    "name": "isLoadingPopularChallenge",
                    "defaultValue": "false",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 38
                },
                {
                    "name": "mostPopularChallenge",
                    "defaultValue": "null",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "Challenge | null",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 33
                },
                {
                    "name": "topArtists",
                    "defaultValue": "[]",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "UserProfile[]",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 34
                },
                {
                    "name": "topCreators",
                    "defaultValue": "[]",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "UserProfile[]",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 35
                },
                {
                    "name": "topFans",
                    "defaultValue": "[]",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "UserProfile[]",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 36
                }
            ],
            "methodsClass": [
                {
                    "name": "calculateDaysLeft",
                    "args": [
                        {
                            "name": "endDate",
                            "type": "Date | string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "number",
                    "typeParameters": [],
                    "line": 263,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nCalcule le nombre de jours restants avant la fin du challenge\n",
                    "description": "<p>Calcule le nombre de jours restants avant la fin du challenge</p>\n",
                    "jsdoctags": [
                        {
                            "name": {
                                "pos": 7924,
                                "end": 7931,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "endDate"
                            },
                            "type": "Date | string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "pos": 7918,
                                "end": 7923,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "param"
                            },
                            "comment": "<p>Date de fin du challenge</p>\n"
                        },
                        {
                            "tagName": {
                                "pos": 7963,
                                "end": 7970,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "returns"
                            },
                            "comment": "<p>Nombre de jours restants (arrondi à l&#39;entier supérieur)</p>\n"
                        }
                    ]
                },
                {
                    "name": "formatWithCounter",
                    "args": [
                        {
                            "name": "value",
                            "type": "number",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "string",
                    "typeParameters": [],
                    "line": 360,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "value",
                            "type": "number",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "getFanLevel",
                    "args": [
                        {
                            "name": "fan",
                            "type": "UserProfile",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "string",
                    "typeParameters": [],
                    "line": 351,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "fan",
                            "type": "UserProfile",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "getFansCount",
                    "args": [
                        {
                            "name": "count",
                            "type": "number",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "string",
                    "typeParameters": [],
                    "line": 229,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "count",
                            "type": "number",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "getGlobalStats",
                    "args": [],
                    "optional": false,
                    "returnType": "Observable<literal type>",
                    "typeParameters": [],
                    "line": 74,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "getMediaUrl",
                    "args": [
                        {
                            "name": "relativePath",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "string",
                    "typeParameters": [],
                    "line": 293,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "relativePath",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "getVoteParticipation",
                    "args": [
                        {
                            "name": "fan",
                            "type": "UserProfile",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "number",
                    "typeParameters": [],
                    "line": 367,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "fan",
                            "type": "UserProfile",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "goTo",
                    "args": [
                        {
                            "name": "profileId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 343,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "profileId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "handleExploreClick",
                    "args": [],
                    "optional": false,
                    "returnType": "any",
                    "typeParameters": [],
                    "line": 373,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        134
                    ]
                },
                {
                    "name": "loadArtistFirstContent",
                    "args": [
                        {
                            "name": "artistId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 158,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nCharge le premier contenu d'un artiste\n",
                    "description": "<p>Charge le premier contenu d&#39;un artiste</p>\n",
                    "jsdoctags": [
                        {
                            "name": {
                                "pos": 4936,
                                "end": 4944,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "artistId"
                            },
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "pos": 4930,
                                "end": 4935,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "param"
                            },
                            "comment": "<p>ID de l&#39;artiste</p>\n"
                        }
                    ]
                },
                {
                    "name": "loadHeroStats",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 99,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "loadMostPopularActiveChallenge",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 238,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "loadTopArtists",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 118,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "loadTopCreators",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 175,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "loadTopFans",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 208,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "ngOnDestroy",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 68,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "ngOnInit",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 61,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "onImageAvatarError",
                    "args": [
                        {
                            "name": "event",
                            "type": "any",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 274,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "event",
                            "type": "any",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "onImageContentError",
                    "args": [
                        {
                            "name": "event",
                            "type": "any",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 283,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "event",
                            "type": "any",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "subscribeTo",
                    "args": [
                        {
                            "name": "profileId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "any",
                    "typeParameters": [],
                    "line": 307,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        134
                    ],
                    "jsdoctags": [
                        {
                            "name": "profileId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "viewChallenge",
                    "args": [
                        {
                            "name": "challengeId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 300,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nRedirige vers la page de détail d'un challenge\n",
                    "description": "<p>Redirige vers la page de détail d&#39;un challenge</p>\n",
                    "jsdoctags": [
                        {
                            "name": {
                                "pos": 9452,
                                "end": 9463,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "challengeId"
                            },
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "pos": 9446,
                                "end": 9451,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "param"
                            },
                            "comment": "<p>ID du challenge à afficher</p>\n"
                        }
                    ]
                }
            ],
            "deprecated": false,
            "deprecationMessage": "",
            "hostBindings": [],
            "hostListeners": [],
            "standalone": true,
            "imports": [
                {
                    "name": "CommonModule",
                    "type": "module"
                },
                {
                    "name": "DecimalPipe",
                    "type": "pipe"
                },
                {
                    "name": "IonButton"
                },
                {
                    "name": "IonIcon"
                },
                {
                    "name": "IonSkeletonText"
                },
                {
                    "name": "RouterLink"
                }
            ],
            "description": "",
            "rawdescription": "\n",
            "type": "component",
            "sourceCode": "import { Component, OnInit, ChangeDetectionStrategy, ChangeDetectorRef } from '@angular/core';\nimport { Router, RouterLink, RouterLinkActive } from '@angular/router';\nimport { CommonModule, DatePipe, DecimalPipe, SlicePipe } from '@angular/common';\nimport { finalize, takeUntil, Subject, map, Observable, forkJoin } from 'rxjs';\nimport { Challenge } from 'src/models/Challenge';\nimport { CreationService } from 'src/services/CREATION/creation-service';\nimport { IonButton, IonIcon, IonSkeletonText } from \"@ionic/angular/standalone\";\nimport { getMediaUrl} from 'src/app/utils/media.utils';\nimport { ProfileService } from 'src/services/PROFILE_SERVICE/profile-service';\nimport { UserProfile } from 'src/models/User';\nimport { Input } from '@angular/core';\nimport { ToastController, AlertController} from '@ionic/angular';\nimport { addIcons } from 'ionicons';\nimport { add, checkmark, peopleOutline, people, timeOutline, playCircle, heart, trophy, thumbsUp, star } from 'ionicons/icons';\n\n\n@Component({\n  selector: 'app-discovery-view',\n  templateUrl: './discovery-view.component.html',\n  styleUrls: ['./discovery-view.component.scss'],\n  standalone: true,\n  imports: [\n    CommonModule,\n    DecimalPipe,\n    IonButton,\n    IonIcon,\n    IonSkeletonText,\n    RouterLink\n  ]\n})\nexport class DiscoveryViewComponent implements OnInit {\n  @Input() currentUserProfile: any; \n  mostPopularChallenge: Challenge | null = null;\n  topArtists: UserProfile[] = [];\n  topCreators: UserProfile[] = [];\n  topFans: UserProfile[] = [];\n  artistContents: { [key: string]: string } = {}; // Pour stocker les premiers contenus des artistes\n  isLoadingPopularChallenge = false;\n  isLoadingArtists = false;\n  isLoadingCreators = false;\n  isLoadingFans = false;\n  heroStats = {\n    totalArtists: 0,\n    activeChallenges: 0,\n    totalVotes: 0\n  };\n  private destroy$ = new Subject<void>();\n  isFollowingUser: { [key: string]: boolean } = {};\n\n  constructor(\n    private creationService: CreationService,\n    private profileService: ProfileService,\n    private cdr: ChangeDetectorRef,\n    private toastController: ToastController,\n    private alertController: ToastController,\n    private router: Router\n  ) {  \n    addIcons({peopleOutline,timeOutline,playCircle,heart,people,add,trophy,thumbsUp,star,checkmark});\n  }\n\n  ngOnInit() {\n    this.loadHeroStats();\n    this.loadMostPopularActiveChallenge();\n    this.loadTopArtists();\n    this.loadTopCreators();\n  }\n\n  ngOnDestroy(): void {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  \ngetGlobalStats(): Observable<{\n  totalArtists: number;\n  activeChallenges: number;\n  totalVotes: number;\n}> {\n  return forkJoin({\n    artists: this.profileService.getProfiles().pipe(\n      map(profiles => profiles.filter(p => p.userType === 'artist').length)\n    ),\n    challenges: this.creationService.getActiveChallenges().pipe(\n      map(challenges => challenges.length)\n    ),\n    votes: this.profileService.getProfiles().pipe(\n      map(profiles => profiles.reduce((sum, profile) => sum + (profile.stats?.votes || 0), 0))\n    )\n  }).pipe(\n    map(({artists, challenges, votes}) => ({\n      totalArtists: artists,\n      activeChallenges: challenges,\n      totalVotes: votes\n    }))\n  );\n}\n\n\nloadHeroStats(): void {\n  this.getGlobalStats()\n    .pipe(takeUntil(this.destroy$))\n    .subscribe({\n      next: (stats) => {\n        this.heroStats = stats;\n      },\n      error: (error) => {\n        console.error('Erreur lors du chargement des statistiques:', error);\n        // Valeurs par défaut en cas d'erreur\n        this.heroStats = {\n          totalArtists: 1000,\n          activeChallenges: 50,\n          totalVotes: 50000\n        };\n      }\n    });\n}\n\n  loadTopArtists(): void {\n    this.isLoadingArtists = true;\n    this.cdr.markForCheck();\n\n    this.profileService.getTopArtists()\n      .pipe(\n        takeUntil(this.destroy$),\n        map(artists => {\n          // Filtrer pour exclure le profil de l'utilisateur connecté\n          return artists.filter(artist => artist.id !== this.currentUserProfile?.id);\n        }),\n        finalize(() => {\n          this.isLoadingArtists = false;\n          this.cdr.markForCheck();\n        })\n      )\n      .subscribe({\n        next: (filteredArtists) => {\n          this.topArtists = filteredArtists;\n          // Initialiser l'état de suivi et charger le contenu pour chaque artiste\n          filteredArtists.forEach(artist => {\n            if (artist.id && this.currentUserProfile?.myFollows?.includes(artist.id)) {\n              this.isFollowingUser[artist.id] = true;\n            }\n            // Charger le premier contenu de l'artiste\n            if (artist.id) {\n              this.loadArtistFirstContent(artist.id);\n            }\n          });\n        },\n        error: (error) => {\n          console.error('Erreur lors du chargement des artistes populaires:', error);\n        }\n      });\n  }\n\n  /**\n   * Charge le premier contenu d'un artiste\n   * @param artistId ID de l'artiste\n   */\n  loadArtistFirstContent(artistId: string): void {\n    this.creationService.getUserContents(artistId)\n      .pipe(takeUntil(this.destroy$))\n      .subscribe({\n        next: (contents) => {\n          if (contents && contents.length > 0) {\n            // Stocke l'URL du premier contenu pour cet artiste\n            this.artistContents[artistId] = contents[0].fileUrl;\n            this.cdr.markForCheck();\n          }\n        },\n        error: (error) => {\n          console.error(`Erreur lors du chargement du contenu pour l'artiste ${artistId}:`, error);\n        }\n      });\n  }\n\n  loadTopCreators(): void {\n    this.isLoadingCreators = true;\n    this.cdr.markForCheck();\n\n    this.profileService.getTopCreators()\n      .pipe(\n        takeUntil(this.destroy$),\n        map(creators => {\n          // Filtrer pour exclure le profil de l'utilisateur connecté\n          return creators.filter(creator => creator.id !== this.currentUserProfile?.id);\n        }),\n        finalize(() => {\n          this.isLoadingCreators = false;\n          this.cdr.markForCheck();\n        })\n      )\n      .subscribe({\n        next: (filteredCreators) => {\n          this.topCreators = filteredCreators;\n          // Initialiser l'état de suivi\n          filteredCreators.forEach(creator => {\n            if (creator.id && this.currentUserProfile?.myFollows?.includes(creator.id)) {\n              this.isFollowingUser[creator.id] = true;\n            }\n          });\n        },\n        error: (error) => {\n          console.error('Erreur lors du chargement des créateurs populaires:', error);\n        }\n      });\n  }\n\n// Dans votre composant\nloadTopFans(): void {\n  this.isLoadingFans = true;\n  \n  this.profileService.getTopFans(10)\n    .pipe(\n      takeUntil(this.destroy$),\n      finalize(() => {\n        this.isLoadingFans = false;\n        this.cdr.markForCheck();\n      })\n    )\n    .subscribe({\n      next: (topFans) => {\n        this.topFans = topFans;\n      },\n      error: (error) => {\n        console.error('Erreur lors du chargement des meilleurs fans:', error);\n      }\n    });\n}\n\n  getFansCount(count: number): string {\n    if (count >= 1000000) {\n      return (count / 1000000).toFixed(1) + 'M';\n    } else if (count >= 1000) {\n      return (count / 1000).toFixed(1) + 'K';\n    }\n    return count.toString();\n  }\n\n  loadMostPopularActiveChallenge(): void {\n    this.isLoadingPopularChallenge = true;\n    this.creationService.getMostPopularActiveChallenge()\n      .pipe(\n        takeUntil(this.destroy$),\n        finalize(() => {\n          this.isLoadingPopularChallenge = false;\n          this.cdr.markForCheck();\n        })\n      )\n      .subscribe({\n        next: (challenge) => {\n          this.mostPopularChallenge = challenge;\n        },\n        error: (error) => {\n          console.error('Erreur lors du chargement du challenge populaire:', error);\n        }\n      });\n  }\n\n  /**\n   * Calcule le nombre de jours restants avant la fin du challenge\n   * @param endDate Date de fin du challenge\n   * @returns Nombre de jours restants (arrondi à l'entier supérieur)\n   */\n  calculateDaysLeft(endDate: Date | string): number {\n    if (!endDate) return 0;\n    \n    const end = typeof endDate === 'string' ? new Date(endDate) : endDate;\n    const now = new Date();\n    const diffTime = end.getTime() - now.getTime();\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n    \n    return Math.max(0, diffDays); // Retourne 0 si la date est déjà passée\n  }\n\n  onImageAvatarError(event: any) {\n      // On récupère l'élément HTML <img> qui a déclenché l'erreur\n      const imgElement = event.target as HTMLImageElement;\n     imgElement.onerror = null;\n      // On remplace la source par l'image locale\n      imgElement.src = 'assets/avatar-default.png';\n      // Optionnel : ajouter une classe pour styliser différemment l'avatar par défaut si besoin\n      imgElement.classList.add('is-default');\n    }\n onImageContentError(event: any) {\n    // On récupère l'élément HTML <img> qui a déclenché l'erreur\n    const imgElement = event.target as HTMLImageElement;\n   imgElement.onerror = null;\n    // On remplace la source par l'image locale\n    imgElement.src = 'assets/splash.png';\n    // Optionnel : ajouter une classe pour styliser différemment l'avatar par défaut si besoin\n    imgElement.classList.add('is-default');\n  }\n  \n  getMediaUrl(relativePath: string): string {\n    return getMediaUrl(relativePath);\n  }\n   /**\n   * Redirige vers la page de détail d'un challenge\n   * @param challengeId ID du challenge à afficher\n   */\n  viewChallenge(challengeId: string): void {\n    if (!challengeId) return;\n    this.router.navigate(['/challenge', challengeId]);\n  }\n\n  //Follow and unfollow \n\nasync subscribeTo(profileId: string) {\n  if (!this.currentUserProfile?.id) return;\n\n  const wasFollowing = this.isFollowingUser[profileId];\n  // Mise à jour optimiste de l'UI\n  this.isFollowingUser[profileId] = !wasFollowing;\n  this.cdr.detectChanges(); // Forcer la détection des changements\n\n  try {\n    const subscription = wasFollowing\n      ? await this.profileService.unfollowProfile(this.currentUserProfile.id, profileId)\n      : await this.profileService.followProfile(this.currentUserProfile.id, profileId);\n\n   const toast = await this.toastController.create({\n      message: wasFollowing ? 'Vous ne suivez plus cet utilisateur' : 'Vous suivez maintenant cet utilisateur',\n      duration: 2000,\n      position: 'bottom',\n      color: 'success',\n      icon: wasFollowing ? 'person-remove' : 'person-add',\n      buttons: [\n        {\n          icon: 'close',\n          role: 'cancel'\n        }\n      ]\n    });\n    \n    await toast.present();\n  } catch (error) {\n    console.error('Erreur:', error);\n    // En cas d'erreur, on remet l'état précédent\n    this.isFollowingUser[profileId] = wasFollowing;\n    this.cdr.detectChanges();\n    // Afficher le toast d'erreur...\n  }\n}\ngoTo(profileId: string): void {\n  if (!profileId) {\n    console.error('ID de profil non valide');\n    return;\n  }\n  this.router.navigate(['tabs/tabs/profile', profileId]);\n}\n\ngetFanLevel(fan: UserProfile): string {\n  const score = (fan.stats?.votes || 0) + (fan.stats?.stars || 0) * 10;\n  if (score > 1000) return 'Fan Ultime';\n  if (score > 500) return 'Fan Passionné';\n  if (score > 100) return 'Fan Actif';\n  return 'Nouveau Fan';\n}\n\n// Dans votre composant\nformatWithCounter(value: number): string {\n  if (value >= 1000) {\n    return (value / 1000).toFixed(1) + 'K+';\n  }\n  return value.toString();\n}\n// Pour calculer le pourcentage de participation\ngetVoteParticipation(fan: UserProfile): number {\n  // Ici, vous devriez avoir une logique pour calculer la participation\n  // Pour l'instant, on met une valeur aléatoire entre 80 et 100\n  return Math.floor(Math.random() * 21) + 80;\n}\n\nasync handleExploreClick() {\n  if (this.currentUserProfile?.myFollows?.length >= 2) {\n    window.location.reload();\n  } else {\n    const alert = await this.alertController.create({\n      cssClass: 'custom-alert', // Ajoutez une classe CSS personnalisée\n      header: 'Découverte requise',\n      message: 'Pour une expérience utilisateur optimale, nous vous recommandons de suivre au moins 2 personnes.',\n      buttons: [\n        {\n          text: 'Plus tard',\n          role: 'cancel',\n          \n        },\n        {\n          text: 'Découvrir',\n          handler: () => {\n            this.router.navigate(['/explore']);\n          }\n        }\n      ]\n    });\n\n    await alert.present();\n  }\n}\n\n}",
            "assetsDirs": [],
            "styleUrlsData": [
                {
                    "data": "\n// ========================================\n// DISCOVERY CONTAINER - COLD START\n// ========================================\n\n.discovery-container {\n  background: linear-gradient(180deg, #0a0a0a 0%, #1a1a1a 100%);\n  min-height: 100vh;\n  padding-bottom: 80px;\n}\n\n// Sections\n.section {\n  padding: 20px 16px;\n  margin-bottom: 16px;\n  background: rgba(255, 255, 255, 0.03);\n  border-radius: 16px;\n  margin: 16px;\n  \n  .section-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 16px;\n    \n    h2 {\n      margin: 0;\n      font-size: 1.2rem;\n      font-weight: 600;\n      color: #fff;\n      display: flex;\n      align-items: center;\n      gap: 8px;\n    }\n    \n    .see-more {\n      color: var(--ion-color-primary);\n      text-decoration: none;\n      font-size: 0.9rem;\n      font-weight: 500;\n      \n      &:hover {\n        text-decoration: underline;\n      }\n    }\n  }\n}\n\n// Profils horizontaux\n.horizontal-scroll {\n  display: flex;\n  gap: 16px;\n  overflow-x: auto;\n  padding: 8px 0 16px;\n  scrollbar-width: none; /* Firefox */\n  -ms-overflow-style: none; /* IE and Edge */\n  \n  &::-webkit-scrollbar {\n    display: none; /* Chrome, Safari, Opera */\n  }\n}\n\n// Carte de profil\n.profile-card {\n  flex: 0 0 140px;\n  background: rgba(255, 255, 255, 0.05);\n  border-radius: 12px;\n  overflow: hidden;\n  transition: transform 0.2s ease, box-shadow 0.2s ease;\n  border: 1px solid rgba(255, 255, 255, 0.08);\n  \n  &:active {\n    transform: scale(0.98);\n  }\n  \n  .avatar-container {\n    position: relative;\n    width: 100%;\n    padding-top: 100%;\n    background: #1a1a1a;\n    \n    .profile-avatar {\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      object-fit: cover;\n    }\n    \n    .fans-count, .posts-count {\n      position: absolute;\n      bottom: 8px;\n      left: 8px;\n      background: rgba(0, 0, 0, 0.7);\n      color: white;\n      padding: 4px 8px;\n      border-radius: 12px;\n      font-size: 0.7rem;\n      display: flex;\n      align-items: center;\n      gap: 4px;\n      \n      ion-icon {\n        font-size: 0.8rem;\n        color: var(--ion-color-primary);\n      }\n    }\n    \n    .posts-count ion-icon {\n      color: #4CAF50; // Vert pour les publications\n    }\n  }\n  \n  .profile-info {\n    padding: 10px 8px;\n    \n    .profile-name {\n      margin: 0 0 4px;\n      font-size: 0.9rem;\n      font-weight: 600;\n      color: #fff;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n    \n    .profile-school {\n      margin: 0;\n      font-size: 0.75rem;\n      color: rgba(255, 255, 255, 0.6);\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n  }\n  \n  &:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n  }\n}\n\n// État de chargement\n.loading-container {\n  display: flex;\n  gap: 16px;\n  padding: 8px 0 16px;\n  \n  .loading-card {\n    flex: 0 0 140px;\n    background: rgba(255, 255, 255, 0.05);\n    border-radius: 12px;\n    padding: 12px;\n    \n    ion-skeleton-text {\n      --background: rgba(255, 255, 255, 0.1);\n      --background-rgb: 255, 255, 255;\n    }\n  }\n}\n\n// Hero Section\n.hero-section {\n  padding: 40px 20px 30px;\n  background: linear-gradient(135deg, #000000 0%, #1a1a1a 50%, #ff7f00 100%);\n  position: relative;\n  overflow: hidden;\n\n  &::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: url('data:image/svg+xml,<svg width=\"100\" height=\"100\" xmlns=\"http://www.w3.org/2000/svg\"><defs><pattern id=\"grid\" width=\"20\" height=\"20\" patternUnits=\"userSpaceOnUse\"><path d=\"M 20 0 L 0 0 0 20\" fill=\"none\" stroke=\"rgba(255,127,0,0.15)\" stroke-width=\"1\"/></pattern></defs><rect width=\"100\" height=\"100\" fill=\"url(%23grid)\"/></svg>');\n    opacity: 0.4;\n  }\n\n  &::after {\n    content: '';\n    position: absolute;\n    bottom: -50%;\n    right: -20%;\n    width: 300px;\n    height: 300px;\n    background: radial-gradient(circle, rgba(255, 127, 0, 0.3) 0%, transparent 70%);\n    border-radius: 50%;\n  }\n}\n\n.hero-content {\n  position: relative;\n  z-index: 1;\n  text-align: center;\n  margin-bottom: 30px;\n}\n\n.hero-title {\n  font-size: 32px;\n  font-weight: 800;\n  color: #ffffff;\n  margin: 35px 0 12px 0;\n  line-height: 1.2;\n  text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);\n}\n\n.hero-subtitle {\n  font-size: 16px;\n  color: rgba(255, 255, 255, 0.9);\n  margin: 0;\n  line-height: 1.5;\n}\n\n.hero-stats {\n  display: flex;\n  justify-content: space-around;\n  gap: 16px;\n  position: relative;\n  z-index: 1;\n}\n\n.stat-item {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 4px;\n}\n\n.stat-number {\n  font-size: 24px;\n  font-weight: 700;\n  color: #ffffff;\n  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);\n}\n\n.stat-label {\n  font-size: 12px;\n  color: rgba(255, 255, 255, 0.8);\n  font-weight: 500;\n}\n\n// Featured Challenge\n.featured-challenge {\n  padding: 24px 20px;\n}\n\n.section-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 16px;\n}\n\n.section-title {\n  font-size: 20px;\n  font-weight: 700;\n  color: #ffffff;\n  margin: 0;\n}\n\n.section-subtitle {\n  font-size: 14px;\n  color: #9ca3af;\n  margin: 4px 0 0 0;\n}\n\n.see-all-btn {\n  --color: #ff7f00;\n  font-weight: 600;\n  font-size: 14px;\n}\n\n.challenge-card {\n  background: #1a1a1a;\n  background-size: cover;\n  background-position: center;\n  border-radius: 16px;\n  padding: 0;\n  position: relative;\n  overflow: hidden;\n  border: 1px solid rgba(255, 127, 0, 0.3);\n  min-height: 280px;\n}\n\n.challenge-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: linear-gradient(\n    180deg,\n    rgba(0, 0, 0, 0.3) 0%,\n    rgba(0, 0, 0, 0.7) 50%,\n    rgba(0, 0, 0, 0.95) 100%\n  );\n  z-index: 1;\n}\n\n.challenge-content {\n  position: relative;\n  z-index: 2;\n  padding: 20px;\n}\n\n.challenge-badge {\n  display: inline-block;\n  background: #10b981;\n  color: #ffffff;\n  font-size: 11px;\n  font-weight: 700;\n  padding: 4px 12px;\n  border-radius: 12px;\n  margin-bottom: 12px;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n.challenge-info {\n  margin-bottom: 16px;\n}\n\n.challenge-name {\n  font-size: 18px;\n  font-weight: 700;\n  color: #ffffff;\n  margin: 0 0 8px 0;\n}\n\n.challenge-description {\n  font-size: 14px;\n  color: #d1d5db;\n  margin: 0 0 12px 0;\n  line-height: 1.5;\n}\n\n.challenge-meta {\n  display: flex;\n  gap: 16px;\n  flex-wrap: wrap;\n}\n\n.meta-item {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  font-size: 13px;\n  color: #d1d5db;\n\n  ion-icon {\n    font-size: 16px;\n    color: #ff7f00;\n  }\n}\n\n.challenge-cta {\n  --background: linear-gradient(135deg, #ff7f00 0%, #ff9933 100%);\n  --border-radius: 12px;\n  height: 44px;\n  font-weight: 600;\n  text-transform: none;\n  letter-spacing: 0.3px;\n}\n\n// Categories\n.categories-section {\n  padding: 24px 20px;\n}\n\n.categories-grid {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 12px;\n}\n\n.category-card {\n  background: linear-gradient(135deg, #1f2937 0%, #111827 100%);\n  border-radius: 16px;\n  padding: 20px 16px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 8px;\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  transition: all 0.3s ease;\n  cursor: pointer;\n\n  &:active {\n    transform: scale(0.95);\n    border-color: #8b5cf6;\n  }\n}\n\n.category-icon {\n  font-size: 36px;\n  margin-bottom: 4px;\n}\n\n.category-name {\n  font-size: 14px;\n  font-weight: 600;\n  color: #ffffff;\n  text-align: center;\n}\n\n.category-count {\n  font-size: 12px;\n  color: #9ca3af;\n}\n\n// Slider Sections\n.slider-section {\n  padding: 24px 20px;\n}\n\n// Horizontal Scroll Container\n.horizontal-scroll {\n  display: flex;\n  gap: 16px;\n  overflow-x: auto;\n  padding: 4px 4px 20px 4px;\n  margin: 0 -4px;\n  \n  &::-webkit-scrollbar {\n    display: none;\n  }\n  \n  -ms-overflow-style: none;\n  scrollbar-width: none;\n  \n  // Hide scrollbar but keep functionality\n  scroll-behavior: smooth;\n  \n  // Add momentum scrolling for iOS\n  -webkit-overflow-scrolling: touch;\n}\n\n// Talent Slide Card\n.talent-slide-card {\n  background: #1f2937;\n  border-radius: 16px;\n  overflow: hidden;\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  width: 280px;\n  flex-shrink: 0;\n  display: flex;\n  flex-direction: column;\n}\n\n.talent-slide-media {\n  position: relative;\n  width: 100%;\n  height: 160px;\n  overflow: hidden;\n}\n\n.talent-slide-thumbnail {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n\n.play-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: rgba(0, 0, 0, 0.3);\n  transition: all 0.3s ease;\n\n  ion-icon {\n    font-size: 48px;\n    color: #ffffff;\n    opacity: 0.9;\n    filter: drop-shadow(0 2px 8px rgba(0, 0, 0, 0.5));\n  }\n\n  &:active {\n    background: rgba(0, 0, 0, 0.5);\n  }\n}\n\n.talent-slide-info {\n  padding: 16px;\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n}\n\n.talent-header {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin-bottom: 12px;\n}\n\n.talent-avatar {\n  width: 44px;\n  height: 44px;\n  border-radius: 50%;\n  border: 2px solid #8b5cf6;\n  object-fit: cover;\n  flex-shrink: 0;\n}\n\n.talent-name-wrapper {\n  flex: 1;\n  min-width: 0;\n}\n\n.talent-slide-name {\n  font-size: 16px;\n  font-weight: 700;\n  color: #ffffff;\n  margin: 0 0 4px 0;\n  line-height: 1.2;\n}\n\n.talent-slide-category {\n  font-size: 13px;\n  color: #9ca3af;\n  font-weight: 500;\n  display: block;\n}\n\n.talent-slide-description {\n  font-size: 13px;\n  color: #d1d5db;\n  margin: 0 0 12px 0;\n  line-height: 1.4;\n  flex: 1;\n}\n\n.talent-slide-stats {\n  display: flex;\n  gap: 16px;\n  margin-bottom: 12px;\n}\n\n.stat {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  font-size: 12px;\n  color: #9ca3af;\n  font-weight: 500;\n\n  ion-icon {\n    font-size: 14px;\n    color: #6b7280;\n  }\n}\n\n// Creator Slide Card\n.creator-slide-card {\n  background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);\n  border-radius: 16px;\n  padding: 16px;\n  border: 1px solid rgba(139, 92, 246, 0.3);\n  width: 300px;\n  flex-shrink: 0;\n  display: flex;\n  flex-direction: column;\n}\n\n.creator-slide-header {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin-bottom: 16px;\n}\n\n.creator-slide-avatar {\n  position: relative;\n  width: 60px;\n  height: 60px;\n  flex-shrink: 0;\n  \n  img {\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    object-fit: cover;\n    border: 2px solid #8b5cf6;\n  }\n}\n\n.creator-badge {\n  position: absolute;\n  top: -4px;\n  right: -4px;\n  background: #f59e0b;\n  color: #ffffff;\n  font-size: 16px;\n  width: 24px;\n  height: 24px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.creator-slide-info {\n  flex: 1;\n  min-width: 0;\n}\n\n.creator-slide-name {\n  font-size: 16px;\n  font-weight: 700;\n  color: #ffffff;\n  margin: 0 0 2px 0;\n}\n\n.creator-slide-role {\n  font-size: 13px;\n  color: #8b5cf6;\n  font-weight: 600;\n  margin-bottom: 6px;\n}\n\n.creator-slide-stats {\n  .stat {\n    font-size: 12px;\n    color: #9ca3af;\n    \n    ion-icon {\n      color: #f59e0b;\n    }\n  }\n}\n\n.creator-slide-content {\n  margin-bottom: 16px;\n}\n\n.creator-slide-bio {\n  font-size: 13px;\n  color: #d1d5db;\n  line-height: 1.4;\n  margin: 0 0 12px 0;\n}\n\n.creator-slide-tags {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 6px;\n}\n\n.tag {\n  background: rgba(139, 92, 246, 0.1);\n  color: #c4b5fd;\n  font-size: 11px;\n  padding: 4px 8px;\n  border-radius: 12px;\n  font-weight: 500;\n}\n\n// Fan Slide Card\n.fan-slide-card {\n  background: linear-gradient(135deg, #1e1b4b 0%, #312e81 100%);\n  border-radius: 16px;\n  padding: 20px 16px;\n  text-align: center;\n  border: 1px solid rgba(244, 114, 182, 0.3);\n  width: 220px;\n  flex-shrink: 0;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.fan-slide-rank {\n  font-size: 32px;\n  margin-bottom: 12px;\n}\n\n.fan-slide-avatar {\n  width: 80px;\n  height: 80px;\n  border-radius: 50%;\n  border: 3px solid #f472b6;\n  overflow: hidden;\n  margin-bottom: 12px;\n  \n  img {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n  }\n}\n\n.fan-slide-name {\n  font-size: 16px;\n  font-weight: 700;\n  color: #ffffff;\n  margin: 0 0 4px 0;\n}\n\n\n\n.fan-slide-level {\n  font-size: 12px;\n  color: #f472b6;\n  font-weight: 600;\n  margin-bottom: 16px;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n.fan-slide-stats {\n  display: flex;\n  gap: 20px;\n  margin-bottom: 12px;\n}\n\n.fan-stat {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 2px;\n  \n  ion-icon {\n    font-size: 20px;\n    color: #f472b6;\n    margin-bottom: 4px;\n  }\n}\n\n.fan-stat-number {\n  font-size: 14px;\n  font-weight: 700;\n  color: #ffffff;\n}\n\n.fan-stat-label {\n  font-size: 11px;\n  color: #c4b5fd;\n}\n\n.fan-slide-desc {\n  font-size: 12px;\n  color: #d1d5db;\n  text-align: center;\n  line-height: 1.4;\n  margin: 0;\n  flex: 1;\n}\n\n// Follow Button (commun)\n.follow-btn {\n  --background: #8b5cf6;\n  --border-radius: 12px;\n  height: 36px;\n  font-weight: 600;\n  font-size: 14px;\n  text-transform: none;\n  margin-top: auto;\n  \n  ion-icon {\n    font-size: 16px;\n  }\n}\n\n// CTA Section\n.cta-section {\n  padding: 32px 20px;\n  margin-top: 8px;\n}\n\n.cta-content {\n  background: linear-gradient(135deg, #0d47a1 0%, #1565c0 50%, #1976d2 100%);\n  border-radius: 20px;\n  padding: 32px 24px;\n  text-align: center;\n  border: 1px solid rgba(25, 118, 210, 0.4);\n  position: relative;\n  overflow: hidden;\n\n  &::before {\n    content: '';\n    position: absolute;\n    top: -50%;\n    left: -50%;\n    width: 200%;\n    height: 200%;\n    background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 50%);\n    animation: pulse 3s ease-in-out infinite;\n  }\n}\n\n@keyframes pulse {\n  0%, 100% {\n    transform: scale(1);\n    opacity: 0.5;\n  }\n  50% {\n    transform: scale(1.1);\n    opacity: 0.8;\n  }\n}\n\n.cta-title {\n  font-size: 24px;\n  font-weight: 700;\n  color: #ffffff;\n  margin: 0 0 8px 0;\n  position: relative;\n  z-index: 1;\n}\n\n.cta-description {\n  font-size: 15px;\n  color: rgba(255, 255, 255, 0.9);\n  margin: 0 0 24px 0;\n  line-height: 1.5;\n  position: relative;\n  z-index: 1;\n}\n\n.cta-button {\n  --background: #ffffff;\n  --color: #0d47a1;\n  --border-radius: 12px;\n  height: 50px;\n  font-weight: 700;\n  font-size: 16px;\n  text-transform: none;\n  letter-spacing: 0.3px;\n  position: relative;\n  z-index: 1;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\n}\n\n// Responsive adjustments\n@media (min-width: 768px) {\n  .discovery-container {\n    max-width: 600px;\n    margin: 0 auto;\n  }\n\n  .categories-grid {\n    grid-template-columns: repeat(4, 1fr);\n  }\n  \n  .talent-slide-card {\n    width: 300px;\n  }\n  \n  .creator-slide-card {\n    width: 320px;\n  }\n  \n  .fan-slide-card {\n    width: 240px;\n  }\n}\n\n// Scroll indicator hint (optional)\n.horizontal-scroll {\n  position: relative;\n  \n  &::after {\n    content: '→';\n    position: absolute;\n    right: 10px;\n    top: 50%;\n    transform: translateY(-50%);\n    color: rgba(255, 127, 0, 0.5);\n    font-size: 20px;\n    pointer-events: none;\n    animation: bounceRight 2s infinite;\n    display: none;\n  }\n  \n  &:hover::after {\n    display: block;\n  }\n}\n\n@keyframes bounceRight {\n  0%, 100% {\n    transform: translateY(-50%) translateX(0);\n  }\n  50% {\n    transform: translateY(-50%) translateX(5px);\n  }\n}\n\n.custom-alert {\n  --backdrop-opacity: 0.5;\n  --background: var(--ion-color-light);\n  --color: var(--ion-color-dark);\n  --border-radius: 16px;\n  --max-width: 90%;\n  --width: 100%;\n\n  .alert-wrapper {\n    border-radius: 16px;\n    max-width: 90%;\n    width: 100%;\n  }\n\n  .alert-head {\n    text-align: center;\n    padding: 16px;\n    \n    .alert-title {\n      font-size: 1.2rem;\n      font-weight: 600;\n      color: var(--ion-color-dark);\n    }\n  }\n\n  .alert-message {\n    text-align: center;\n    font-size: 1rem;\n    color: var(--ion-color-medium);\n    padding: 0 16px 16px;\n  }\n\n  .alert-button-group {\n    padding: 0;\n    flex-direction: row;\n    justify-content: space-around;\n    border-top: 1px solid var(--ion-color-light-shade);\n  }\n\n  .alert-button {\n    margin: 0;\n    flex: 1;\n    --background: transparent;\n    --color: var(--ion-color-primary);\n    --background-activated: var(--ion-color-light-shade);\n    --background-hover: var(--ion-color-light-shade);\n    --border-radius: 0;\n    height: 48px;\n    font-weight: 500;\n\n    &.alert-cancel {\n      --color: var(--ion-color-medium);\n      border-right: 1px solid var(--ion-color-light-shade);\n    }\n\n    &.alert-confirm {\n      --color: var(--ion-color-primary);\n      font-weight: 600;\n    }\n  }\n}",
                    "styleUrl": "./discovery-view.component.scss"
                }
            ],
            "stylesData": "",
            "constructorObj": {
                "name": "constructor",
                "description": "",
                "deprecated": false,
                "deprecationMessage": "",
                "args": [
                    {
                        "name": "creationService",
                        "type": "CreationService",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "profileService",
                        "type": "ProfileService",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "cdr",
                        "type": "ChangeDetectorRef",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "toastController",
                        "type": "ToastController",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "alertController",
                        "type": "ToastController",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "router",
                        "type": "Router",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    }
                ],
                "line": 48,
                "jsdoctags": [
                    {
                        "name": "creationService",
                        "type": "CreationService",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "profileService",
                        "type": "ProfileService",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "cdr",
                        "type": "ChangeDetectorRef",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "toastController",
                        "type": "ToastController",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "alertController",
                        "type": "ToastController",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "router",
                        "type": "Router",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            },
            "extends": [],
            "implements": [
                "OnInit"
            ],
            "templateData": "<!-- Vue Découverte pour Cold Start -->\n<div class=\"discovery-container\">\n  \n  <!-- Hero Section -->\n  <div class=\"hero-section\">\n    <div class=\"hero-content\">\n      <h1 class=\"hero-title\">Découvrez les meilleurs talents</h1>\n      <p class=\"hero-subtitle\">Rejoignez la communauté BEST et votez pour vos artistes préférés</p>\n    </div>\n    <div class=\"hero-stats\">\n  <div class=\"stat-item\">\n    <span class=\"stat-number\">{{ heroStats.totalArtists | number:'1.0-0' }}K+</span>\n    <span class=\"stat-label\">Artistes</span>\n  </div>\n  <div class=\"stat-item\">\n    <span class=\"stat-number\">{{ heroStats.activeChallenges }}+</span>\n    <span class=\"stat-label\">Challenges actifs</span>\n  </div>\n  <div class=\"stat-item\">\n    <span class=\"stat-number\">{{ heroStats.totalVotes | number:'1.0-0' }}+</span>\n    <span class=\"stat-label\">Votes</span>\n  </div>\n</div>\n  </div>\n\n  <!-- Challenge en vedette -->\n  <div class=\"featured-challenge\">\n    <div class=\"section-header\">\n      <h2 class=\"section-title\">🎯 Challenge de la semaine</h2>\n      <ion-button fill=\"clear\" size=\"small\" class=\"see-all-btn\" routerLink=\"/challenges\">Voir tous</ion-button>\n    </div>\n    \n    <!-- Chargeur pendant le chargement -->\n    <ng-container *ngIf=\"isLoadingPopularChallenge\">\n      <div class=\"challenge-card loading\">\n        <div class=\"challenge-overlay\"></div>\n        <ion-skeleton-text animated style=\"width: 100%; height: 100%;\"></ion-skeleton-text>\n      </div>\n    </ng-container>\n    \n    <!-- Carte du challenge populaire -->\n    <ng-container *ngIf=\"!isLoadingPopularChallenge && mostPopularChallenge\">\n      <div class=\"challenge-card\" \n           [style.background-image]=\"mostPopularChallenge.cover_image_url ? 'url(' + getMediaUrl(mostPopularChallenge.cover_image_url) || 'assets/splash.png' + ')' : 'none'\">\n        <div class=\"challenge-overlay\"></div>\n        <div class=\"challenge-content\">\n          <div class=\"challenge-badge\">ACTIF</div>\n          <div class=\"challenge-info\">\n            <h3 class=\"challenge-name\">{{ mostPopularChallenge.name }}</h3>\n            <p class=\"challenge-description\">{{ mostPopularChallenge.description || 'Participez à ce défi passionnant !' }}</p>\n            <div class=\"challenge-meta\">\n              <span class=\"meta-item\">\n                <ion-icon name=\"people-outline\"></ion-icon>\n                {{ (mostPopularChallenge.participants_count || 0) | number }} participants\n              </span>\n              <span class=\"meta-item\" *ngIf=\"mostPopularChallenge.end_date\">\n                <ion-icon name=\"time-outline\"></ion-icon>\n                {{ calculateDaysLeft(mostPopularChallenge.end_date) }} jours restants\n              </span>\n            </div>\n          </div>\n          <ion-button \n            expand=\"block\" \n            class=\"challenge-cta\"\n            (click)=\"viewChallenge(mostPopularChallenge.id)\">\n            {{ mostPopularChallenge.call_to_action || 'Découvrir le challenge' }}\n          </ion-button>\n        </div>\n      </div>\n    </ng-container>\n  </div>\n\n  <!-- Catégories populaires -->\n  <div class=\"categories-section\">\n    <div class=\"section-header\">\n      <h2 class=\"section-title\">Explorer par catégorie</h2>\n    </div>\n    <div class=\"categories-grid\">\n      <div class=\"category-card\">\n        <div class=\"category-icon\">🎤</div>\n        <span class=\"category-name\">Rap/Hip-Hop</span>\n        <span class=\"category-count\">12K artistes</span>\n      </div>\n      <div class=\"category-card\">\n        <div class=\"category-icon\">🎨</div>\n        <span class=\"category-name\">Arts Visuels</span>\n        <span class=\"category-count\">8K artistes</span>\n      </div>\n      <div class=\"category-card\">\n        <div class=\"category-icon\">💃</div>\n        <span class=\"category-name\">Danse</span>\n        <span class=\"category-count\">15K artistes</span>\n      </div>\n      <div class=\"category-card\">\n        <div class=\"category-icon\">🎸</div>\n        <span class=\"category-name\">Musique</span>\n        <span class=\"category-count\">20K artistes</span>\n      </div>\n    </div>\n  </div>\n\n  <!-- SECTION 1: Talents en vedette - Slider horizontal -->\n  <div class=\"slider-section\">\n    <div class=\"section-header\">\n      <div>\n        <h2 class=\"section-title\">⭐ Talents du moment</h2>\n        <p class=\"section-subtitle\">Commencez par suivre ces artistes populaires</p>\n      </div>\n      <ion-button fill=\"clear\" size=\"small\" class=\"see-all-btn\">Tout voir</ion-button>\n    </div>\n\n    <div class=\"horizontal-scroll\" *ngIf=\"!isLoadingArtists; else loadingArtists\">\n      <!-- Talent 1 -->\n      <div class=\"talent-slide-card\" *ngFor=\"let talent of topArtists\" >\n        <div class=\"talent-slide-media\">\n          <img [src]=\"artistContents[talent.id] || 'assets/sample-thumbnail-1.jpg'\" (error)=\"onImageContentError($event)\" class=\"talent-slide-thumbnail\" alt=\"Performance\">\n          <div class=\"play-overlay\">\n            <ion-icon name=\"play-circle\"></ion-icon>\n          </div>\n        </div>\n        <div class=\"talent-slide-info\" (click)=\"goTo(talent.id)\">\n          <div class=\"talent-header\">\n            <img [src]=\"getMediaUrl(talent.avatar)\" class=\"talent-avatar\" alt=\"Avatar\">\n            <div class=\"talent-name-wrapper\">\n              <h4 class=\"talent-slide-name\">{{talent.displayName}}</h4>\n              <span class=\"talent-slide-category\">🎤 Rap/Hip-Hop</span>\n            </div>\n          </div>\n          <p class=\"talent-slide-description\">{{talent.bio || \"En savoir plus sur son profil\"}}</p>\n          <div class=\"talent-slide-stats\">\n            <span class=\"stat\">\n              <ion-icon name=\"heart\"></ion-icon>\n              {{talent.stats.votes}}K\n            </span>\n            <span class=\"stat\">\n              <ion-icon name=\"people\"></ion-icon>\n              {{getFansCount(talent.stats.fans)}}K\n            </span>\n          </div>\n          <ion-button expand=\"block\" \n           (click)=\"subscribeTo(talent.id)\" \n          size=\"small\" class=\"follow-btn\">\n            <ion-icon  name=\"add\" slot=\"start\"></ion-icon>\n            {{isFollowingUser[talent.id] ?   'Suivre' : 'Desabonner'}}\n          </ion-button>\n        </div>\n      </div>\n\n      \n    </div>\n     <ng-template #loadingArtists>\n    <div class=\"loading-container\">\n      <ion-skeleton-text [animated]=\"true\" style=\"width: 100%; height: 200px;\"></ion-skeleton-text>\n    </div>\n  </ng-template>\n  </div>\n\n  <!-- SECTION 2: Créateurs Phare - Slider horizontal -->\n  <div class=\"slider-section\">\n    <div class=\"section-header\">\n      <div>\n        <h2 class=\"section-title\">🏆 Créateurs Phare</h2>\n        <p class=\"section-subtitle\">Les créateurs les plus engagés de la communauté</p>\n      </div>\n      <ion-button fill=\"clear\" size=\"small\" class=\"see-all-btn\">Tout voir</ion-button>\n    </div>\n\n    <div class=\"horizontal-scroll\" *ngIf=\"!isLoadingCreators; else loadingCreators\">\n      <!-- Créateur 1 -->\n      <div class=\"creator-slide-card\" *ngFor=\"let creator of topCreators\">\n        <div class=\"creator-slide-header\">\n          <div class=\"creator-slide-avatar\" (click)=\"goTo(creator.id)\">\n            <img [src]=\"getMediaUrl(creator.avatar) || 'assets/avatar-default.png'\" (error)=\"onImageAvatarError($event)\"  alt=\"Avatar\">\n            <div class=\"creator-badge\">👑</div>\n          </div>\n          <div class=\"creator-slide-info\" (click)=\"goTo(creator.id)\">\n            <h4 class=\"creator-slide-name\">{{creator.username}}</h4>\n            <span class=\"creator-slide-role\">Producteur musical</span>\n            <div class=\"creator-slide-stats\">\n              <span class=\"stat\">\n                <ion-icon name=\"trophy\"></ion-icon>\n                {{creator.stats.posts}} défis\n              </span>\n            </div>\n          </div>\n        </div>\n        <div class=\"creator-slide-content\">\n          <p class=\"creator-slide-bio\">{{creator.bio || 'Aucune information de bio'}}</p>\n          <div class=\"creator-slide-tags\">\n            <span class=\"tag\">#Beatmaking</span>\n            <span class=\"tag\">#HipHop</span>\n            <span class=\"tag\">#Producer</span>\n          </div>\n        </div>\n        <ion-button expand=\"block\"\n  (click)=\"subscribeTo(creator.id)\"\n  size=\"small\" \n  class=\"follow-btn\">\n  <ion-icon [name]=\"isFollowingUser[creator.id] ? 'checkmark' : 'add'\" slot=\"start\"></ion-icon>\n  {{isFollowingUser[creator.id] ? 'Abonné' : 'Suivre'}}\n</ion-button>\n      </div>\n\n      \n    </div>\n    <ng-template #loadingCreators>\n    <div class=\"loading-container\">\n      <ion-skeleton-text [animated]=\"true\" style=\"width: 100%; height: 200px;\"></ion-skeleton-text>\n    </div>\n  </ng-template>\n  </div>\n\n  <!-- SECTION 3: Top Fans - Slider horizontal -->\n  <div class=\"slider-section\">\n    <div class=\"section-header\">\n      <div>\n        <h2 class=\"section-title\">💖 Top Fans</h2>\n        <p class=\"section-subtitle\">Les supporters les plus actifs de la plateforme</p>\n      </div>\n      <ion-button fill=\"clear\" size=\"small\" class=\"see-all-btn\">Tout voir</ion-button>\n    </div>\n\n    <div class=\"horizontal-scroll\" *ngIf=\"!isLoadingFans; else loadingFans\">\n      <!-- Fan 1 -->\n      <div class=\"fan-slide-card\" *ngFor=\"let fan of topFans; let i = index\">\n  <!-- Afficher la médaille uniquement pour les 3 premiers -->\n  <div class=\"fan-slide-rank\" *ngIf=\"i < 3\">\n    <span *ngIf=\"i === 0\">🥇</span>\n    <span *ngIf=\"i === 1\">🥈</span>\n    <span *ngIf=\"i === 2\">🥉</span>\n  </div>\n  <!-- Afficher un espace vide pour l'alignement pour les autres -->\n  <div class=\"fan-slide-rank\" *ngIf=\"i >= 3\"></div>\n  \n  <div class=\"fan-slide-avatar\" (click)=\"goTo(fan.id)\">\n    <img [src]=\"getMediaUrl(fan.avatar) || 'assets/avatar-default.png'\" (error)=\"onImageAvatarError($event)\" alt=\"Avatar\">\n  </div>\n  <h4 class=\"fan-slide-name\">{{fan.username || fan.displayName || 'Fan'}}</h4>\n  <span class=\"fan-slide-level\">{{getFanLevel(fan)}}</span>\n  <div class=\"fan-slide-stats\">\n    <div class=\"fan-stat\">\n      <ion-icon name=\"thumbsUp\"></ion-icon>\n      <span class=\"fan-stat-number\">{{(fan.stats.votes || 0) >= 1000 ? ((fan.stats.votes || 0) / 1000).toFixed(1) + 'K' : (fan.stats.votes || 0)}}</span>\n      <span class=\"fan-stat-label\">votes</span>\n    </div>\n    <div class=\"fan-stat\">\n      <ion-icon name=\"star\"></ion-icon>\n      <span class=\"fan-stat-number\">{{fan.stats.stars || 0}}</span>\n      <span class=\"fan-stat-label\">Success</span>\n    </div>\n  </div>\n  <p class=\"fan-slide-desc\">A voté dans {{getVoteParticipation(fan)}}% des battles cette semaine</p>\n</div>\n\n     \n\n      \n    </div>\n    <ng-template #loadingFans>\n    <div class=\"loading-container\">\n      <ion-skeleton-text [animated]=\"true\" style=\"width: 100%; height: 200px;\"></ion-skeleton-text>\n    </div>\n  </ng-template>\n  </div>\n\n  <!-- Call to Action final -->\n  <div class=\"cta-section\">\n    <div class=\"cta-content\">\n      <h3 class=\"cta-title\">Prêt à commencer ?</h3>\n      <p class=\"cta-description\">Suivez vos premiers artistes pour personnaliser votre feed</p>\n      <ion-button expand=\"block\" (click)=\"handleExploreClick()\" size=\"large\" class=\"cta-button\">\n        Explorer tous les talents\n      </ion-button>\n    </div>\n  </div>\n\n</div>"
        },
        {
            "name": "HeaderComponent",
            "id": "component-HeaderComponent-48b9abe37706bc42f20cfa97ed9f943678344ea7d254c0c82183c657750c2191b43486fe730c778627b2ea6aa0e2f33a7abcf3ce08b68ad18b062ad99ea97acb",
            "file": "src/stories/header.component.ts",
            "encapsulation": [],
            "entryComponents": [],
            "inputs": [],
            "outputs": [],
            "providers": [],
            "selector": "storybook-header",
            "styleUrls": [
                "./header.css"
            ],
            "styles": [],
            "template": "<header>  <div class=\"storybook-header\">\n    <div>\n      <svg width=\"32\" height=\"32\" viewBox=\"0 0 32 32\" xmlns=\"http://www.w3.org/2000/svg\">\n        <g fill=\"none\" fillRule=\"evenodd\">\n          <path\n            d=\"M10 0h12a10 10 0 0110 10v12a10 10 0 01-10 10H10A10 10 0 010 22V10A10 10 0 0110 0z\"\n            fill=\"#FFF\"\n          />\n          <path\n            d=\"M5.3 10.6l10.4 6v11.1l-10.4-6v-11zm11.4-6.2l9.7 5.5-9.7 5.6V4.4z\"\n            fill=\"#555AB9\"\n          />\n          <path d=\"M27.2 10.6v11.2l-10.5 6V16.5l10.5-6zM15.7 4.4v11L6 10l9.7-5.5z\" fill=\"#91BAF8\" />\n        </g>\n      </svg>\n      <h1>Acme</h1>\n    </div>\n    <div>\n      <div *ngIf=\"user\">\n        <span class=\"welcome\">\n          Welcome, <b>{{ user.name }}</b\n          >!\n        </span>\n        <storybook-button\n          *ngIf=\"user\"\n          size=\"small\"\n          (onClick)=\"onLogout.emit($event)\"\n          label=\"Log out\"\n        ></storybook-button>\n      </div>\n      <div *ngIf=\"!user\">\n        <storybook-button\n          *ngIf=\"!user\"\n          size=\"small\"\n          class=\"margin-left\"\n          (onClick)=\"onLogin.emit($event)\"\n          label=\"Log in\"\n        ></storybook-button>\n        <storybook-button\n          *ngIf=\"!user\"\n          size=\"small\"\n          [primary]=\"true\"\n          class=\"margin-left\"\n          (onClick)=\"onCreateAccount.emit($event)\"\n          label=\"Sign up\"\n        ></storybook-button>\n      </div>\n    </div>\n  </div>\n</header>",
            "templateUrl": [],
            "viewProviders": [],
            "hostDirectives": [],
            "inputsClass": [
                {
                    "name": "user",
                    "defaultValue": "null",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "line": 66,
                    "type": "User | null",
                    "decorators": []
                }
            ],
            "outputsClass": [
                {
                    "name": "onCreateAccount",
                    "defaultValue": "new EventEmitter<Event>()",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "line": 75,
                    "type": "EventEmitter"
                },
                {
                    "name": "onLogin",
                    "defaultValue": "new EventEmitter<Event>()",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "line": 69,
                    "type": "EventEmitter"
                },
                {
                    "name": "onLogout",
                    "defaultValue": "new EventEmitter<Event>()",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "line": 72,
                    "type": "EventEmitter"
                }
            ],
            "propertiesClass": [],
            "methodsClass": [],
            "deprecated": false,
            "deprecationMessage": "",
            "hostBindings": [],
            "hostListeners": [],
            "standalone": true,
            "imports": [
                {
                    "name": "CommonModule",
                    "type": "module"
                },
                {
                    "name": "ButtonComponent",
                    "type": "component"
                }
            ],
            "description": "",
            "rawdescription": "\n",
            "type": "component",
            "sourceCode": "import { Component, Input, Output, EventEmitter } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { ButtonComponent } from './button.component';\nimport type { User } from './user';\n\n@Component({\n  selector: 'storybook-header',\n  standalone: true,\n  imports: [CommonModule, ButtonComponent],\n  template: `<header>\n  <div class=\"storybook-header\">\n    <div>\n      <svg width=\"32\" height=\"32\" viewBox=\"0 0 32 32\" xmlns=\"http://www.w3.org/2000/svg\">\n        <g fill=\"none\" fillRule=\"evenodd\">\n          <path\n            d=\"M10 0h12a10 10 0 0110 10v12a10 10 0 01-10 10H10A10 10 0 010 22V10A10 10 0 0110 0z\"\n            fill=\"#FFF\"\n          />\n          <path\n            d=\"M5.3 10.6l10.4 6v11.1l-10.4-6v-11zm11.4-6.2l9.7 5.5-9.7 5.6V4.4z\"\n            fill=\"#555AB9\"\n          />\n          <path d=\"M27.2 10.6v11.2l-10.5 6V16.5l10.5-6zM15.7 4.4v11L6 10l9.7-5.5z\" fill=\"#91BAF8\" />\n        </g>\n      </svg>\n      <h1>Acme</h1>\n    </div>\n    <div>\n      <div *ngIf=\"user\">\n        <span class=\"welcome\">\n          Welcome, <b>{{ user.name }}</b\n          >!\n        </span>\n        <storybook-button\n          *ngIf=\"user\"\n          size=\"small\"\n          (onClick)=\"onLogout.emit($event)\"\n          label=\"Log out\"\n        ></storybook-button>\n      </div>\n      <div *ngIf=\"!user\">\n        <storybook-button\n          *ngIf=\"!user\"\n          size=\"small\"\n          class=\"margin-left\"\n          (onClick)=\"onLogin.emit($event)\"\n          label=\"Log in\"\n        ></storybook-button>\n        <storybook-button\n          *ngIf=\"!user\"\n          size=\"small\"\n          [primary]=\"true\"\n          class=\"margin-left\"\n          (onClick)=\"onCreateAccount.emit($event)\"\n          label=\"Sign up\"\n        ></storybook-button>\n      </div>\n    </div>\n  </div>\n</header>`,\n  styleUrls: ['./header.css'],\n})\nexport class HeaderComponent {\n  @Input()\n  user: User | null = null;\n\n  @Output()\n  onLogin = new EventEmitter<Event>();\n\n  @Output()\n  onLogout = new EventEmitter<Event>();\n\n  @Output()\n  onCreateAccount = new EventEmitter<Event>();\n}\n",
            "assetsDirs": [],
            "styleUrlsData": [
                {
                    "data": ".storybook-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.1);\n  padding: 15px 20px;\n  font-family: 'Nunito Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif;\n}\n\n.storybook-header svg {\n  display: inline-block;\n  vertical-align: top;\n}\n\n.storybook-header h1 {\n  display: inline-block;\n  vertical-align: top;\n  margin: 6px 0 6px 10px;\n  font-weight: 700;\n  font-size: 20px;\n  line-height: 1;\n}\n\n.storybook-header button + button {\n  margin-left: 10px;\n}\n\n.storybook-header .welcome {\n  margin-right: 10px;\n  color: #333;\n  font-size: 14px;\n}\n",
                    "styleUrl": "./header.css"
                }
            ],
            "stylesData": "",
            "extends": []
        },
        {
            "name": "HomePage",
            "id": "component-HomePage-66649f17a8c56f84b6fb460011e394f5c718c7b963b89187bb27d742b8a75a973cfad2124f43fb702020fb2f8f23dcf86230cdd69ba97d46e1a9cac7d96d7067",
            "file": "src/app/tab-home/home.page.ts",
            "changeDetection": "ChangeDetectionStrategy.OnPush",
            "encapsulation": [],
            "entryComponents": [],
            "inputs": [],
            "outputs": [],
            "providers": [],
            "selector": "app-home",
            "styleUrls": [
                "home.page.scss"
            ],
            "styles": [],
            "templateUrl": [
                "home.page.html"
            ],
            "viewProviders": [],
            "hostDirectives": [],
            "inputsClass": [],
            "outputsClass": [],
            "propertiesClass": [
                {
                    "name": "content",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "IonContent",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 52,
                    "decorators": [
                        {
                            "name": "ViewChild",
                            "stringifiedArguments": "IonContent"
                        }
                    ],
                    "modifierKind": [
                        171
                    ]
                },
                {
                    "name": "currentChallenge",
                    "defaultValue": "{}",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "literal type",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 357
                },
                {
                    "name": "currentIndex",
                    "defaultValue": "0",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 59
                },
                {
                    "name": "currentPage",
                    "defaultValue": "1",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 60
                },
                {
                    "name": "currentUserProfile",
                    "defaultValue": "{} as UserProfile",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "UserProfile",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 63
                },
                {
                    "name": "destroy$",
                    "defaultValue": "new Subject<void>()",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 53,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "filterPublic",
                    "defaultValue": "() => {...}",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 107
                },
                {
                    "name": "isFollowingUser",
                    "defaultValue": "{}",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "literal type",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 587
                },
                {
                    "name": "isLiking",
                    "defaultValue": "{}",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "literal type",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 462
                },
                {
                    "name": "isLoading",
                    "defaultValue": "false",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 61
                },
                {
                    "name": "isTransitioning",
                    "defaultValue": "false",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 57
                },
                {
                    "name": "loadingProfiles",
                    "defaultValue": "new Set<string>()",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 64,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "needsRefresh",
                    "defaultValue": "false",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 54
                },
                {
                    "name": "PAGE_SIZE",
                    "defaultValue": "5",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 62,
                    "modifierKind": [
                        123,
                        148
                    ]
                },
                {
                    "name": "posts",
                    "defaultValue": "[]",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "Content[]",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 55
                },
                {
                    "name": "showDiscoveryView",
                    "defaultValue": "true",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 56
                },
                {
                    "name": "userAvatars",
                    "defaultValue": "{}",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "literal type",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 65
                }
            ],
            "methodsClass": [
                {
                    "name": "copyToClipboard",
                    "args": [
                        {
                            "name": "text",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Promise<void>",
                    "typeParameters": [],
                    "line": 565,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        123,
                        134
                    ],
                    "jsdoctags": [
                        {
                            "name": "text",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "getActionsForPost",
                    "args": [
                        {
                            "name": "post",
                            "type": "Content",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "{}",
                    "typeParameters": [],
                    "line": 428,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nPrépare les boutons d'action dynamiquement pour chaque post\n",
                    "description": "<p>Prépare les boutons d&#39;action dynamiquement pour chaque post</p>\n",
                    "jsdoctags": [
                        {
                            "name": "post",
                            "type": "Content",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "getCurrentChallenge",
                    "args": [
                        {
                            "name": "post",
                            "type": "Content",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 360,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        123
                    ],
                    "jsdoctags": [
                        {
                            "name": "post",
                            "type": "Content",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "getMediaUrl",
                    "args": [
                        {
                            "name": "relativePath",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "string",
                    "typeParameters": [],
                    "line": 397,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "relativePath",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "getPostAvatar",
                    "args": [
                        {
                            "name": "post",
                            "type": "Content",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "string",
                    "typeParameters": [],
                    "line": 323,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "post",
                            "type": "Content",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "handleAction",
                    "args": [
                        {
                            "name": "action",
                            "type": "any",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 283,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "action",
                            "type": "any",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "hasActiveChallenge",
                    "args": [
                        {
                            "name": "post",
                            "type": "Content",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "boolean",
                    "typeParameters": [],
                    "line": 383,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "post",
                            "type": "Content",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "likePost",
                    "args": [
                        {
                            "name": "post",
                            "type": "Content",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "any",
                    "typeParameters": [],
                    "line": 464,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        134
                    ],
                    "jsdoctags": [
                        {
                            "name": "post",
                            "type": "Content",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "loadAvatarForPost",
                    "args": [
                        {
                            "name": "post",
                            "type": "Content",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 243,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        123
                    ],
                    "jsdoctags": [
                        {
                            "name": "post",
                            "type": "Content",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "loadFeed",
                    "args": [
                        {
                            "name": "event",
                            "type": "any",
                            "optional": true,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "any",
                    "typeParameters": [],
                    "line": 289,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nCharge les contenus depuis le service\n",
                    "description": "<p>Charge les contenus depuis le service</p>\n",
                    "modifierKind": [
                        134
                    ],
                    "jsdoctags": [
                        {
                            "name": "event",
                            "type": "any",
                            "optional": true,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "loadInitialFeed",
                    "args": [],
                    "optional": false,
                    "returnType": "Observable<void>",
                    "typeParameters": [],
                    "line": 176,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "ngOnDestroy",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 635,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "ngOnInit",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 130,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "onImageAvatarError",
                    "args": [
                        {
                            "name": "event",
                            "type": "any",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 401,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "event",
                            "type": "any",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "onImageContentError",
                    "args": [
                        {
                            "name": "event",
                            "type": "any",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 411,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "event",
                            "type": "any",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "onPostVisible",
                    "args": [
                        {
                            "name": "index",
                            "type": "number",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 456,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "index",
                            "type": "number",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "openComments",
                    "args": [
                        {
                            "name": "post",
                            "type": "Content",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "any",
                    "typeParameters": [],
                    "line": 523,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        134
                    ],
                    "jsdoctags": [
                        {
                            "name": "post",
                            "type": "Content",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "playVideo",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 421,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "processNewPosts",
                    "args": [
                        {
                            "name": "newPosts",
                            "type": "Content[]",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Promise<void>",
                    "typeParameters": [],
                    "line": 198,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        123,
                        134
                    ],
                    "jsdoctags": [
                        {
                            "name": "newPosts",
                            "type": "Content[]",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "refreshFeed",
                    "args": [
                        {
                            "name": "event",
                            "type": "any",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 317,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "event",
                            "type": "any",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "savePost",
                    "args": [
                        {
                            "name": "post",
                            "type": "Content",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 535,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "post",
                            "type": "Content",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "setupAuthSubscription",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 136,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "setupNewContentSubscription",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 160,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "sharePost",
                    "args": [
                        {
                            "name": "post",
                            "type": "Content",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "any",
                    "typeParameters": [],
                    "line": 536,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        134
                    ],
                    "jsdoctags": [
                        {
                            "name": "post",
                            "type": "Content",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "subscribeTo",
                    "args": [
                        {
                            "name": "profileId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "any",
                    "typeParameters": [],
                    "line": 589,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        134
                    ],
                    "jsdoctags": [
                        {
                            "name": "profileId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "trackByPostId",
                    "args": [
                        {
                            "name": "index",
                            "type": "number",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "post",
                            "type": "Content",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "string",
                    "typeParameters": [],
                    "line": 66,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "index",
                            "type": "number",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "post",
                            "type": "Content",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "updateViewState",
                    "args": [
                        {
                            "name": "followsCount",
                            "type": "number",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 266,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        123
                    ],
                    "jsdoctags": [
                        {
                            "name": "followsCount",
                            "type": "number",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "voteForArtist",
                    "args": [
                        {
                            "name": "post",
                            "type": "Content",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 584,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "post",
                            "type": "Content",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                }
            ],
            "deprecated": false,
            "deprecationMessage": "",
            "hostBindings": [],
            "hostListeners": [],
            "standalone": true,
            "imports": [
                {
                    "name": "DiscoveryViewComponent",
                    "type": "component"
                },
                {
                    "name": "DatePipe",
                    "type": "pipe"
                },
                {
                    "name": "IonRefresherContent"
                },
                {
                    "name": "IonRefresher"
                },
                {
                    "name": "FilterPipe",
                    "type": "pipe"
                },
                {
                    "name": "IonInfiniteScrollContent"
                },
                {
                    "name": "IonInfiniteScroll"
                },
                {
                    "name": "NgFor"
                },
                {
                    "name": "NgIf"
                },
                {
                    "name": "SlicePipe",
                    "type": "pipe"
                },
                {
                    "name": "IonHeader"
                },
                {
                    "name": "IonToolbar"
                },
                {
                    "name": "IonIcon"
                },
                {
                    "name": "IonButton"
                },
                {
                    "name": "IonContent"
                },
                {
                    "name": "DiscoveryViewComponent",
                    "type": "component"
                }
            ],
            "description": "",
            "rawdescription": "\n",
            "type": "component",
            "sourceCode": "import { ChangeDetectorRef, Component, ElementRef, OnInit, ViewChild, ChangeDetectionStrategy } from '@angular/core';\nimport { NgFor, NgIf,  SlicePipe, DatePipe } from '@angular/common';\nimport { FilterPipe } from '../utils/pipes/filter-pipe';\nimport { ToastController } from '@ionic/angular';\nimport { \n  IonHeader, \n  IonToolbar, \n  IonIcon, \n  IonButton, \n  IonContent,\n  IonInfiniteScroll, IonInfiniteScrollContent, IonRefresher, IonRefresherContent, IonSkeletonText } from '@ionic/angular/standalone';\nimport { addIcons } from 'ionicons';\nimport { \n  search, \n  notificationsOutline, \n  play, \n  giftOutline, \n  heart,\n  people,\n  trophy,\n  star,\n  chatbubble,\n  heartOutline,\n  bookmarkOutline,\n  chatbubbleEllipsesOutline, \n  starOutline, \n  shareOutline, chevronUp, chevronDown, trophyOutline, peopleOutline, timeOutline, playCircle, add } from 'ionicons/icons';\nimport { Content } from 'src/models/Content';\nimport { CreationService } from 'src/services/CREATION/creation-service';\nimport { ProfileService } from 'src/services/PROFILE_SERVICE/profile-service';\nimport { getMediaUrl} from 'src/app/utils/media.utils';\nimport { Challenge } from 'src/models/Challenge';\nimport { Auth } from 'src/services/AUTH/auth';\nimport { UserProfile } from 'src/models/User';\nimport { Router } from '@angular/router';\nimport { CommentService } from 'src/services/COMMENTS_SERVICE/comment-service';\nimport { catchError, filter, map, Observable, of, Subject, switchMap, takeUntil, tap, finalize } from 'rxjs';\nimport { DiscoveryViewComponent } from \"../components/discovery-view/discovery-view.component\";\n\n\n@Component({\n  selector: 'app-home',\n  templateUrl: 'home.page.html',\n  styleUrls: ['home.page.scss'],\n  standalone: true,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  imports: [DiscoveryViewComponent, DatePipe, IonRefresherContent, IonRefresher, FilterPipe, IonInfiniteScrollContent,\n    IonInfiniteScroll, NgFor, NgIf, SlicePipe, IonHeader, IonToolbar, IonIcon, IonButton, IonContent, DiscoveryViewComponent]\n})\n\nexport class HomePage implements OnInit {\n  @ViewChild(IonContent) content!: IonContent;\n  private destroy$ = new Subject<void>();\n  needsRefresh = false;\n  posts: Content[] = [];\n showDiscoveryView: boolean = true;\nisTransitioning: boolean = false;\n\n  currentIndex = 0;\n  currentPage = 1;\n  isLoading = false;\n  private readonly PAGE_SIZE = 5;\n  currentUserProfile: UserProfile = {} as UserProfile;\n  private loadingProfiles = new Set<string>();\n  userAvatars: { [userId: string]: string } = {};\n  trackByPostId(index: number, post: Content): string {\n    return post.id || index.toString();\n  }\n\n  get currentPost(): any {\n    if (this.posts.length > 0) {\n      return this.posts[this.currentIndex];\n    }\n    return [];\n  }\n\n  \n  constructor(private cdr: ChangeDetectorRef, \n    private toastController:ToastController, \n    private router: Router, \n    private creationService: CreationService, \n    private commentService: CommentService,\n    private ProfileService: ProfileService, \n    private authService: Auth)\n {\n  this.currentUserProfile.stats = {} as {\n      posts: 0;\n      fans: 0;\n      votes: 0;\n      stars: 0;\n    };\n    this.currentUserProfile.myFollows = [];\n    addIcons({search,notificationsOutline,peopleOutline,timeOutline,playCircle,heart,people,add,trophy,star,chatbubble,heartOutline,bookmarkOutline,trophyOutline,play,chevronUp,chevronDown,'giftOutline':giftOutline,'chatbubbleEllipsesOutline':chatbubbleEllipsesOutline,'starOutline':starOutline,'shareOutline':shareOutline});\n     this.commentService.commentAdded$.pipe(\n      takeUntil(this.destroy$)\n    ).subscribe(({contentId, increment}) => {\n      const post = this.posts.find(p => p.id === contentId);\n      if (post) {\n        post.commentCount = (post.commentCount || 0) + increment;\n        this.posts = [...this.posts]; // Forcer la détection de changement\n      }\n    });\n  \n  }\n\n  \nfilterPublic = (post: Content): boolean => {\n  // Si le contenu n'est pas public, on le filtre\n  if (post.isPublic === false) {\n    return false;\n  }\n  \n  // Si on n'a pas encore chargé le profil utilisateur, on affiche le contenu par défaut\n  if (!this.currentUserProfile) {\n    return true;\n  }\n  // L'utilisateur peut voir son propre contenu\n  if (post.userId === this.currentUserProfile.id) {\n    return true;\n  }\n  \n  // Vérification sécurisée de l'existence de myfollows et conversion en tableau si nécessaire\n  const follows = Array.isArray(this.currentUserProfile.myFollows) \n    ? this.currentUserProfile.myFollows \n    : [];\n  \n  // Si le créateur du contenu est dans les abonnements de l'utilisateur connecté, on l'affiche\n  return follows.includes(post.userId);\n}\n  ngOnInit() {\n  this.setupAuthSubscription();\n  this.setupNewContentSubscription();\n   \n}\n\nprivate setupAuthSubscription(): void {\n  this.authService.currentUser$.pipe(\n    takeUntil(this.destroy$),\n    tap(user => {\n      if (!user) {\n        this.posts = [];\n        this.currentUserProfile = {} as UserProfile;\n        this.cdr.markForCheck();\n      }\n    }),\n    filter(user => !!user),\n    switchMap(user => \n      this.ProfileService.getProfileById(user.id.toString()).pipe(\n        tap(profile => {\n          this.currentUserProfile = profile;\n          this.updateViewState(profile.myFollows.length);\n          this.cdr.markForCheck();\n        })\n      )\n    ),\n    switchMap(() => this.loadInitialFeed())\n  ).subscribe();\n}\n\nprivate setupNewContentSubscription(): void {\n  this.creationService.newContent$.pipe(\n    takeUntil(this.destroy$)\n  ).subscribe(newContent => {\n    if (newContent && this.currentUserProfile?.id) {\n      const exists = this.posts.some(p => p.id === newContent.id);\n      if (!exists) {\n        this.posts = [newContent, ...this.posts];\n        console.log(this.posts[0].challengeId);\n        this.loadAvatarForPost(newContent);\n        this.cdr.markForCheck();\n      }\n    }\n  });\n}\n\nprivate loadInitialFeed(): Observable<void> {\n  this.isLoading = true;\n  this.currentPage = 1;\n  \n  return this.creationService.getFeedContents(this.currentPage, this.PAGE_SIZE).pipe(\n    switchMap(async (newPosts) => {\n      await this.processNewPosts(newPosts);\n      this.currentPage++;\n      this.isLoading = false;\n      this.cdr.markForCheck();\n      return undefined;\n    }),\n    catchError(err => {\n      console.error('Erreur lors du chargement initial:', err);\n      this.isLoading = false;\n      this.cdr.markForCheck();\n      return of(undefined);\n    })\n  );\n}\n\n\nprivate async processNewPosts(newPosts: Content[]): Promise<void> {\n  // Créer une copie des posts avec les propriétés supplémentaires\n  const postsWithUser = await Promise.all(newPosts.map(async post => {\n    let username = 'Utilisateur';\n    \n    // Récupérer le nom d'utilisateur depuis le profil\n    if (post.userId) {\n      try {\n        const userProfile = await this.ProfileService.getProfileById(post.userId).toPromise();\n        if (userProfile?.username) {\n          username = userProfile.username;\n        }\n      } catch (error) {\n        console.warn(`Impossible de charger le profil pour l'utilisateur ${post.userId}:`, error);\n      }\n    }\n\n    // Charger les informations du challenge si nécessaire\n    if (post.challengeId && this.currentChallenge[post.challengeId] === undefined) {\n      this.getCurrentChallenge(post);\n    }\n\n    return {\n      ...post,\n      username: username,\n      isLikedByUser: this.currentUserProfile?.id \n        ? post.likedIds?.includes(this.currentUserProfile.id) || false\n        : false\n    } as Content & { username: string, isLikedByUser: boolean };\n  }));\n\n  // Mettre à jour la liste des posts\n  if (this.currentPage === 1) {\n    this.posts = postsWithUser;\n  } else {\n    this.posts = [...this.posts, ...postsWithUser];\n  }\n\n  // Charger les avatars pour les nouveaux posts\n  postsWithUser.forEach(post => this.loadAvatarForPost(post));\n  \n  // Forcer la mise à jour de la vue\n  this.cdr.markForCheck();\n}\n\nprivate loadAvatarForPost(post: Content): void {\n  if (post.userId && !this.userAvatars[post.userId] && !this.loadingProfiles.has(post.userId)) {\n    this.loadingProfiles.add(post.userId);\n    \n    this.ProfileService.getProfileById(post.userId).pipe(\n      takeUntil(this.destroy$),\n      finalize(() => this.loadingProfiles.delete(post.userId))\n    ).subscribe({\n      next: (profile) => {\n        if (profile?.avatar) {\n          this.userAvatars[post.userId] = profile.avatar;\n          this.cdr.markForCheck();\n        }\n      },\n      error: () => {\n        this.userAvatars[post.userId] = 'assets/avatar-default.png';\n        this.cdr.markForCheck();\n      }\n    });\n  }\n}\n\n\nprivate updateViewState(followsCount: number) {\n  const shouldShowDiscovery = followsCount <= 1;\n  \n  // Si l'état change, on déclenche la transition\n  if (this.showDiscoveryView !== shouldShowDiscovery) {\n    this.isTransitioning = true;\n    \n    // Petite pause pour laisser le temps à l'animation de se terminer\n    setTimeout(() => {\n      this.showDiscoveryView = shouldShowDiscovery;\n      this.isTransitioning = false;\n      this.cdr.detectChanges();\n    }, 300); // Durée de la transition en ms\n  }\n}\n\n  \n  handleAction(action: any) { action.action(); }\n\n\n  /**\n   * Charge les contenus depuis le service\n   */\nasync loadFeed(event?: any) {\n  if (this.isLoading) return;\n  this.isLoading = true;\n  \n  try {\n    const newPosts = await this.creationService.getFeedContents(this.currentPage, this.PAGE_SIZE).toPromise();\n    if (!newPosts) return;\n    \n    await this.processNewPosts(newPosts);\n    \n    if (event) {\n      event.target.complete();\n      if (newPosts.length < this.PAGE_SIZE) {\n        event.target.disabled = true;\n      }\n    }\n    \n    this.currentPage++;\n  } catch (err) {\n    console.error('Erreur lors du chargement du feed:', err);\n    if (event) event.target.complete();\n  } finally {\n    this.isLoading = false;\n    this.cdr.markForCheck();\n  }\n}\n\n// Pour forcer un rechargement complet\nrefreshFeed(event: any) {\n  this.currentPage = 1;\n  this.userAvatars = {}; // Réinitialiser le cache des avatars\n  this.loadFeed(event);\n}\n\ngetPostAvatar(post: Content): string {\n  const userId = post.userId;\n\n  // 1. Si on a l'URL (même potentiellement erronée) en cache, on la renvoie\n  if (this.userAvatars[userId]) {\n    return this.userAvatars[userId];\n  }\n\n  // 2. Si on est déjà en train de charger le profil\n  if (this.loadingProfiles.has(userId)) {\n    // On retourne une image transparente ou vide pour ne pas déclencher d'erreur prématurée\n    return 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';\n  }\n\n  // 3. Lancement du chargement\n  this.loadingProfiles.add(userId);\n  this.ProfileService.getProfileById(userId).subscribe({\n    next: (profile) => {\n      // On stocke l'URL brute. Si profile.avatar est invalide ou null, \n      // la balise <img> déclenchera naturellement (error)\n      this.userAvatars[userId] = profile?.avatar || ''; \n      this.loadingProfiles.delete(userId);\n    },\n    error: (err) => {\n      console.error('Profil introuvable pour:', userId);\n      this.userAvatars[userId] = 'broken-link'; // Forcera le déclenchement de (error)\n      this.loadingProfiles.delete(userId);\n    }\n  });\n\n  return ''; // Vide pendant le chargement initial\n}\n\n// Ajoutez cette propriété à votre classe\ncurrentChallenge: { [postId: string]: Challenge | null } = {};\n\n// Récupère les informations d'un challenge spécifique\nprivate getCurrentChallenge(post: Content): void {\n  if (!post.challengeId || this.currentChallenge[post.challengeId] !== undefined) return;\n\n  // Marquer le chargement en cours\n  this.currentChallenge[post.challengeId] = null;\n\n  this.creationService.getChallengeById(post.challengeId).pipe(\n    takeUntil(this.destroy$)\n  ).subscribe({\n    next: (challenge) => {\n      this.currentChallenge[post.challengeId || ''] = challenge?.is_active ? challenge : null;\n      this.cdr.markForCheck(); // Forcer la mise à jour de la vue\n    },\n    error: (error) => {\n      console.error('Erreur lors du chargement du challenge:', error);\n      this.currentChallenge[post.challengeId || ''] = null;\n      this.cdr.markForCheck(); // Forcer la mise à jour de la vue en cas d'erreur\n    }\n  });\n}\n\n\n\nhasActiveChallenge(post: Content): boolean {\n  if (!post.challengeId) return false;\n  \n  const challenge = this.currentChallenge[post.challengeId];\n  // Si le challenge n'est pas encore chargé, on le charge\n  if (challenge === undefined) {\n    this.getCurrentChallenge(post);\n    return false;\n  }\n  \n  return !!challenge && challenge.is_active === true;\n}\n\n// Add this method to your HomePage class\ngetMediaUrl(relativePath: string): string {\n  return getMediaUrl(relativePath);\n}\n\nonImageAvatarError(event: any) {\n    // On récupère l'élément HTML <img> qui a déclenché l'erreur\n    const imgElement = event.target as HTMLImageElement;\n   imgElement.onerror = null;\n    // On remplace la source par l'image locale\n    imgElement.src = 'assets/avatar-default.png';\n    // Optionnel : ajouter une classe pour styliser différemment l'avatar par défaut si besoin\n    imgElement.classList.add('is-default');\n  }\n\n   onImageContentError(event: any) {\n    // On récupère l'élément HTML <img> qui a déclenché l'erreur\n    const imgElement = event.target as HTMLImageElement;\n   imgElement.onerror = null;\n    // On remplace la source par l'image locale\n    imgElement.src = 'assets/splash.png';\n    // Optionnel : ajouter une classe pour styliser différemment l'avatar par défaut si besoin\n    imgElement.classList.add('is-default');\n  }\n  \n  playVideo() {\n    console.log('Play video');\n  }\n\n  /**\n   * Prépare les boutons d'action dynamiquement pour chaque post\n   */\n  getActionsForPost(post: Content) {\n  // Déterminer l'icône du like en fonction de l'état actuel\n  const likeIcon = post.isLikedByUser ? 'heart' : 'heart-outline';\n  const likeColor = post.isLikedByUser ? 'danger' : 'medium';\n  \n  return [\n    { \n      icon: likeIcon,\n      color: likeColor,\n      count: post.likeCount, \n      action: () => this.likePost(post) \n    },\n    { \n      icon: 'chatbubble-ellipses-outline', \n      count: post.commentCount, \n      action: () => this.openComments(post) \n    },\n    { \n      icon: 'bookmark-outline', \n      action: () => this.savePost(post) \n    },\n    { \n      icon: 'share-outline', \n      action: () => this.sharePost(post) \n    }\n  ];\n}\n\n  onPostVisible(index: number) {\n    this.currentIndex = index;\n  }\n\n  // Méthodes d'interactions\n// Propriété pour suivre les likes en cours\nisLiking: { [postId: string]: boolean } = {};\n\nasync likePost(post: Content) {\n  // Vérifier si l'utilisateur est connecté\n  if (!this.currentUserProfile?.id) {\n    console.log('Veuillez vous connecter pour aimer cette publication');\n    // Vous pourriez ajouter une notification ou une redirection vers la page de connexion\n    return;\n  }\n\n  const userId = this.currentUserProfile.id;\n  const postId = post.id;\n\n  // Vérifier si un like est déjà en cours pour ce post\n  if (this.isLiking[postId!]) return;\n  this.isLiking[postId!] = true;\n\n  // Sauvegarder l'état précédent pour le rollback en cas d'erreur\n  const wasLiked = post.isLikedByUser || false;\n  const previousLikeCount = post.likeCount;\n\n  // Mise à jour optimiste de l'interface\n  post.isLikedByUser = !wasLiked;\n  post.likeCount = wasLiked ? Math.max(0, post.likeCount - 1) : post.likeCount + 1;\n\n  try {\n    // Appeler le service approprié en fonction de l'action\n    if (wasLiked) {\n      await this.creationService.unlikeContent(postId!, userId).toPromise();\n    } else {\n      await this.creationService.likeContent(postId!, userId).toPromise();\n    }\n\n    // Mettre à jour l'état local après un succès\n    if (!post.likedIds) {\n      post.likedIds = [];\n    }\n    if (wasLiked) {\n      post.likedIds = post.likedIds.filter(id => id !== userId);\n    } else {\n      post.likedIds = [...(post.likedIds || []), userId];\n    }\n\n  } catch (error) {\n    console.error('Erreur lors de la mise à jour du like:', error);\n    \n    // Annuler les changements en cas d'erreur\n    post.isLikedByUser = wasLiked;\n    post.likeCount = previousLikeCount;\n    post.likedIds = wasLiked \n      ? [...(post.likedIds || []), userId]\n      : post.likedIds?.filter(id => id !== userId) || [];\n    \n    // Afficher un message d'erreur à l'utilisateur\n    // Par exemple: this.toastService.show('Impossible de mettre à jour le like');\n  } finally {\n    // Réinitialiser l'état de chargement\n    this.isLiking[postId!] = false;\n  }\n}\n\n  async openComments(post: Content) {\n  if (!this.currentUserProfile) {\n    this.router.navigate(['/login']);\n    return;\n  }\n\n  this.router.navigate(['/content-comments', post.id], {\n    state: { \n      currentUser: this.currentUserProfile \n    }\n  });\n}\n  savePost(post: Content) { console.log('Sauvegarder:', post.id); }\n  async sharePost(post: Content) {\n  try {\n    const shareData = {\n      title: post.title || 'Découvrez ce contenu',\n      text: post.description || 'Regardez ce contenu intéressant',\n      url: post.fileUrl\n    };\n\n    // Vérifier si l'API Web Share est disponible\n    if (navigator.share) {\n      await navigator.share(shareData);\n    } else {\n      // Solution de secours pour les navigateurs qui ne supportent pas l'API Web Share\n      await this.copyToClipboard(shareData.url);\n      // Afficher un toast ou une alerte\n      const toast = await this.toastController.create({\n        message: 'Lien copié dans le presse-papier',\n        duration: 2000,\n        position: 'bottom'\n      });\n      await toast.present();\n    }\n  } catch (error) {\n    console.error('Erreur lors du partage:', error);\n    // Gérer l'erreur (par exemple, si l'utilisateur annule le partage)\n  }\n}\n\n// Méthode utilitaire pour copier du texte dans le presse-papier\nprivate async copyToClipboard(text: string): Promise<void> {\n  try {\n    await navigator.clipboard.writeText(text);\n  } catch (err) {\n    console.error('Erreur lors de la copie dans le presse-papier:', err);\n    // Fallback pour les anciens navigateurs\n    const textArea = document.createElement('textarea');\n    textArea.value = text;\n    document.body.appendChild(textArea);\n    textArea.select();\n    try {\n      document.execCommand('copy');\n    } catch (err) {\n      console.error('Fallback copy method failed:', err);\n    }\n    document.body.removeChild(textArea);\n  }\n}\n\n  voteForArtist(post: Content) { console.log('Vote pour user:', post.userId); }\n\n\nisFollowingUser: { [key: string]: boolean } = {};\n\nasync subscribeTo(profileId: string) {\n  if (!this.currentUserProfile?.id) return;\n\n  const wasFollowing = this.isFollowingUser[profileId];\n  // Mise à jour optimiste de l'UI\n  this.isFollowingUser[profileId] = !wasFollowing;\n  this.cdr.detectChanges();\n\n  try {\n    if (wasFollowing) {\n      await this.ProfileService.unfollowProfile(this.currentUserProfile.id, profileId);\n      console.log('Unfollow réussi');\n    } else {\n      await this.ProfileService.followProfile(this.currentUserProfile.id, profileId);\n      console.log('Follow réussi');\n    }\n\n    // Mettre à jour le compteur de followers\n    if (this.currentUserProfile.stats) {\n      this.currentUserProfile.stats.fans = wasFollowing \n        ? Math.max(0, (this.currentUserProfile.stats.fans || 1) - 1)\n        : (this.currentUserProfile.stats.fans || 0) + 1;\n    }\n\n  } catch (error) {\n    console.error('Erreur lors de la mise à jour du suivi:', error);\n    // Annuler le changement en cas d'erreur\n    this.isFollowingUser[profileId] = wasFollowing;\n    this.cdr.detectChanges();\n\n    // Afficher un message d'erreur\n    const toast = await this.toastController.create({\n      message: 'Erreur lors de la mise à jour du suivi',\n      duration: 3000,\n      position: 'bottom',\n      color: 'danger'\n    });\n    await toast.present();\n  }\n}\n\n\n  \n\n \n\n  ngOnDestroy(): void {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  /**\n   * Charge le challenge actif avec le plus grand nombre de participants\n   */\n  \n}",
            "assetsDirs": [],
            "styleUrlsData": [
                {
                    "data": "/* ==================== */\n/*       CONTENT        */\n/* ==================== */\n.tiktok-content {\n  --background: #000;\n  \n  &::part(scroll) {\n    scroll-snap-type: y mandatory;\n    scroll-behavior: smooth;\n  }\n}\n\n.posts-container {\n  height: 100%;\n}\n\n.post {\n  height: 100vh;\n  width: 100%;\n  scroll-snap-align: start;\n  scroll-snap-stop: always;\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  animation: fadeIn 0.4s ease-out;\n}\n\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n    transform: scale(0.98);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n\nion-button[disabled] {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n/* ==================== */\n/*       HEADER         */\n/* ==================== */\n.header {\n  --background: transparent;\n  --border-style: none;\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  z-index: 10;\n  \n  &-toolbar {\n    --background: transparent;\n    --border-style: none;\n    --padding-top: env(safe-area-inset-top);\n    --padding-start: 1rem;\n    --padding-end: 1rem;\n    --min-height: 64px;\n  }\n}\n\n.search-container {\n  display: flex;\n  align-items: center;\n  width: 100%;\n  gap: 0.75rem;\n  animation: slideDown 0.5s ease-out;\n}\n\n@keyframes slideDown {\n  from {\n    opacity: 0;\n    transform: translateY(-20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n.search-wrapper {\n  flex: 1;\n  position: relative;\n}\n\n.search-input {\n  width: 100%;\n  padding: 0.625rem 1rem 0.625rem 2.75rem;\n  background: rgba(255, 255, 255, 0.12);\n  backdrop-filter: blur(30px) saturate(180%);\n  -webkit-backdrop-filter: blur(30px) saturate(180%);\n  border: 1.5px solid rgba(255, 255, 255, 0.2);\n  border-radius: 16px;\n  color: white;\n  font-size: 0.9375rem;\n  font-weight: 500;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n  \n  &:focus {\n    outline: none;\n    border-color: rgba(255, 255, 255, 0.5);\n    background: rgba(255, 255, 255, 0.18);\n    box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.12), 0 6px 20px rgba(0, 0, 0, 0.25);\n    transform: translateY(-1px);\n  }\n  \n  &::placeholder {\n    color: rgba(255, 255, 255, 0.65);\n    font-weight: 400;\n  }\n}\n\n.search-icon {\n  position: absolute;\n  left: 0.875rem;\n  top: 50%;\n  transform: translateY(-50%);\n  color: white;\n  width: 1.375rem;\n  height: 1.375rem;\n  pointer-events: none;\n  opacity: 0.85;\n}\n\n.notification-button {\n  width: 44px;\n  height: 44px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: rgba(255, 255, 255, 0.12);\n  backdrop-filter: blur(30px) saturate(180%);\n  -webkit-backdrop-filter: blur(30px) saturate(180%);\n  border: 1.5px solid rgba(255, 255, 255, 0.2);\n  border-radius: 16px;\n  position: relative;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n  \n  &:active {\n    transform: scale(0.92);\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);\n  }\n  \n  &:hover {\n    background: rgba(255, 255, 255, 0.18);\n    border-color: rgba(255, 255, 255, 0.3);\n  }\n}\n\n.notification-icon {\n  color: white;\n  width: 1.5rem;\n  height: 1.5rem;\n}\n\n.notification-badge {\n  position: absolute;\n  top: 9px;\n  right: 9px;\n  width: 9px;\n  height: 9px;\n  border-radius: 50%;\n  background: linear-gradient(135deg, #ff6b35 0%, #ff8c42 100%);\n  box-shadow: 0 0 12px rgba(255, 107, 53, 0.8), 0 0 4px rgba(255, 107, 53, 1);\n  animation: pulse-badge 2s ease-in-out infinite;\n}\n\n@keyframes pulse-badge {\n  0%, 100% {\n    transform: scale(1);\n    opacity: 1;\n  }\n  50% {\n    transform: scale(1.15);\n    opacity: 0.9;\n  }\n}\n\n/* ==================== */\n/*    VIDEO CONTAINER   */\n/* ==================== */\n.video-container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 0;\n  overflow: hidden;\n  \n  img.video-thumbnail {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n    animation: zoomIn 20s ease-out infinite alternate;\n  }\n}\n\n@keyframes zoomIn {\n  from {\n    transform: scale(1);\n  }\n  to {\n    transform: scale(1.05);\n  }\n}\n\n.video-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: linear-gradient(\n    to top,\n    rgba(0, 0, 0, 0.75) 0%,\n    rgba(0, 0, 0, 0.2) 20%,\n    transparent 40%,\n    transparent 70%,\n    rgba(0, 0, 0, 0.15) 85%,\n    rgba(0, 0, 0, 0.4) 100%\n  );\n  pointer-events: none;\n}\n\n/* ==================== */\n/*   CONTENU PRINCIPAL  */\n/* ==================== */\n.main-content {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  padding: 0 1.25rem 6.5rem;\n  z-index: 3;\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-end;\n  gap: 1rem;\n  pointer-events: none;\n  animation: slideUp 0.6s ease-out;\n}\n\n@keyframes slideUp {\n  from {\n    opacity: 0;\n    transform: translateY(30px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n.artist-info {\n  flex: 1;\n  pointer-events: auto;\n  max-width: calc(100% - 90px);\n}\n\n.artist-header {\n  display: flex;\n  align-items: center;\n  gap: 14px;\n  margin-bottom: 14px;\n}\n\n.artist-avatar {\n  width: 48px;\n  height: 48px;\n  border-radius: 50%;\n  object-fit: cover;\n  border: 3px solid #fff;\n  flex-shrink: 0;\n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.4);\n  transition: transform 0.3s ease;\n  \n  &:active {\n    transform: scale(0.95);\n  }\n}\n\n.artist-details {\n  flex: 1;\n  min-width: 0;\n}\n\n.profile-header {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  margin-bottom: 6px;\n}\n\n.profile-name {\n  margin: 0;\n  font-size: 16px;\n  font-weight: 700;\n  color: #fff;\n  text-shadow: 0 2px 8px rgba(0, 0, 0, 0.9), 0 1px 3px rgba(0, 0, 0, 0.6);\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  letter-spacing: 0.3px;\n}\n\n.subscribe-btn {\n  --padding-start: 16px;\n  --padding-end: 16px;\n  --padding-top: 6px;\n  --padding-bottom: 6px;\n  --border-radius: 20px;\n  --background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.85) 100%);\n  --background-hover: linear-gradient(135deg, rgba(255, 255, 255, 1) 0%, rgba(255, 255, 255, 0.95) 100%);\n  --color: #000;\n  font-size: 14px;\n  font-weight: 700;\n  height: 32px;\n  flex-shrink: 0;\n  border: none;\n  text-transform: none;\n  letter-spacing: 0.3px;\n  margin: 0;\n  box-shadow: 0 4px 12px rgba(255, 255, 255, 0.3);\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  \n  &::part(native) {\n    padding: 6px 16px;\n  }\n  \n  &:active {\n    transform: scale(0.94);\n  }\n}\n\n.artist-name {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  margin-bottom: 4px;\n  white-space: nowrap;\n  overflow: hidden;\n  \n  .post-title {\n    color: #fff;\n    font-size: 15px;\n    font-weight: 600;\n    text-shadow: 0 2px 8px rgba(0, 0, 0, 0.9), 0 1px 3px rgba(0, 0, 0, 0.6);\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    flex-shrink: 1;\n    min-width: 0;\n    letter-spacing: 0.2px;\n  }\n  \n  .separator {\n    color: rgba(255, 255, 255, 0.5);\n    font-weight: 400;\n    flex-shrink: 0;\n    font-size: 18px;\n  }\n  \n  .post-date {\n    color: rgba(255, 255, 255, 0.7);\n    font-size: 13px;\n    font-weight: 500;\n    text-shadow: 0 2px 8px rgba(0, 0, 0, 0.9), 0 1px 3px rgba(0, 0, 0, 0.6);\n    flex-shrink: 0;\n  }\n}\n\n.artist-location {\n  margin: 0 0 10px 0;\n  font-size: 14px;\n  color: rgba(255, 255, 255, 0.9);\n  line-height: 1.4;\n  text-shadow: 0 2px 8px rgba(0, 0, 0, 0.9), 0 1px 3px rgba(0, 0, 0, 0.6);\n  font-weight: 400;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n  letter-spacing: 0.2px;\n}\n\n.challenge-row {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin-top: 10px;\n  padding: 12px 16px;\n  background: linear-gradient(135deg, rgba(255, 255, 255, 0.15) 0%, rgba(255, 255, 255, 0.08) 100%);\n  backdrop-filter: blur(20px) saturate(180%);\n  -webkit-backdrop-filter: blur(20px) saturate(180%);\n  border: 1.5px solid rgba(255, 255, 255, 0.25);\n  border-radius: 20px;\n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);\n  animation: slideInChallenge 0.5s ease-out 0.2s both;\n  \n  .challenge-title {\n    flex: 1;\n    min-width: 0;\n    font-size: 14px;\n    font-weight: 600;\n    color: #fff;\n    white-space: nowrap;\n    overflow: hidden;\n    padding: 0;\n    text-shadow: 0 1px 4px rgba(0, 0, 0, 0.6);\n    letter-spacing: 0.3px;\n    position: relative;\n    \n    span {\n      display: inline-block;\n      \n      // Textes courts : pas d'animation, juste ellipsis\n      &:not(.long-text) {\n        max-width: 100%;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n      }\n      \n      // Textes longs (> 15 caractères) : animation de défilement\n      &.long-text {\n        padding-right: 20px; // Espace avant la répétition\n        animation: scrollText 15s linear infinite;\n        \n        &:hover {\n          animation-play-state: paused;\n        }\n      }\n    }\n    \n    &.loading {\n      min-width: 100px;\n      height: 16px;\n      background: linear-gradient(90deg, rgba(255, 255, 255, 0.2) 0%, rgba(255, 255, 255, 0.3) 50%, rgba(255, 255, 255, 0.2) 100%);\n      background-size: 200% 100%;\n      border-radius: 8px;\n      animation: shimmer 1.5s ease-in-out infinite;\n      \n      span {\n        animation: none;\n      }\n    }\n  }\n  \n  // Animation de défilement pour les textes longs uniquement\n  @keyframes scrollText {\n    0% {\n      transform: translateX(0);\n    }\n    100% {\n      transform: translateX(-100%);\n    }\n  }\n  \n  .separator {\n    width: 2px;\n    height: 20px;\n    background: linear-gradient(to bottom, rgba(255, 255, 255, 0.3), rgba(255, 255, 255, 0.1));\n    border-radius: 2px;\n    flex-shrink: 0;\n  }\n  \n  .vote-button {\n    --background: linear-gradient(135deg, #ff6b35 0%, #ff8c42 100%);\n    --background-hover: linear-gradient(135deg, #ff7b45 0%, #ff9c52 100%);\n    --background-activated: linear-gradient(135deg, #ff5b25 0%, #ff7c32 100%);\n    --color: #fff;\n    --border-radius: 18px;\n    --padding-start: 18px;\n    --padding-end: 18px;\n    --box-shadow: 0 4px 12px rgba(255, 107, 53, 0.4);\n    height: 36px;\n    font-size: 13px;\n    font-weight: 700;\n    text-transform: none;\n    margin: 0;\n    flex-shrink: 0;\n    letter-spacing: 0.3px;\n    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n    \n    &:active {\n      transform: scale(0.95);\n    }\n    \n    &[disabled] {\n      --background: rgba(255, 255, 255, 0.2);\n      opacity: 0.6;\n    }\n  }\n}\n\n@keyframes slideInChallenge {\n  from {\n    opacity: 0;\n    transform: translateX(-20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateX(0);\n  }\n}\n\n@keyframes shimmer {\n  0% {\n    background-position: -200% 0;\n  }\n  100% {\n    background-position: 200% 0;\n  }\n}\n\n/* ==================== */\n/*    ACTIONS LATÉRALES */\n/* ==================== */\n.side-actions {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 1.5rem;\n  pointer-events: auto;\n  padding-bottom: 1.25rem;\n  animation: slideInRight 0.6s ease-out;\n}\n\n@keyframes slideInRight {\n  from {\n    opacity: 0;\n    transform: translateX(30px);\n  }\n  to {\n    opacity: 1;\n    transform: translateX(0);\n  }\n}\n\n.action-button {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  background: transparent;\n  border: none;\n  padding: 0;\n  cursor: pointer;\n  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  \n  &:active {\n    transform: scale(0.88);\n  }\n}\n\n.action-icon {\n  width: 50px;\n  height: 50px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-bottom: 6px;\n  background: rgba(255, 255, 255, 0.12);\n  backdrop-filter: blur(10px);\n  -webkit-backdrop-filter: blur(10px);\n  border-radius: 50%;\n  border: 1.5px solid rgba(255, 255, 255, 0.2);\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\n  \n  ion-icon {\n    color: #fff;\n    font-size: 28px;\n    filter: drop-shadow(0 2px 6px rgba(0, 0, 0, 0.6));\n  }\n  \n  &.liked {\n    background: linear-gradient(135deg, #ff6b35 0%, #ff8c42 100%);\n    border-color: rgba(255, 107, 53, 0.5);\n    animation: heartBeat 0.6s ease-in-out;\n    \n    ion-icon {\n      color: #fff;\n    }\n  }\n  \n  &:hover {\n    background: rgba(255, 255, 255, 0.18);\n    transform: scale(1.05);\n  }\n}\n\n@keyframes heartBeat {\n  0%, 100% {\n    transform: scale(1);\n  }\n  15% {\n    transform: scale(1.25);\n  }\n  30% {\n    transform: scale(1.1);\n  }\n  45% {\n    transform: scale(1.2);\n  }\n  60% {\n    transform: scale(1.05);\n  }\n}\n\n.action-count {\n  color: #fff;\n  font-size: 13px;\n  font-weight: 700;\n  text-shadow: 0 2px 8px rgba(0, 0, 0, 0.9), 0 1px 3px rgba(0, 0, 0, 0.6);\n  letter-spacing: 0.3px;\n}\n\n/* Micro-interactions supplémentaires */\n.hidden {\n  display: none;\n}\n\n.fade-out {\n  animation: fadeOut 0.4s ease-out forwards;\n}\n\n.fade-in {\n  animation: fadeIn 0.4s ease-out forwards;\n}\n\n@keyframes fadeOut {\n  from {\n    opacity: 1;\n    transform: scale(1);\n  }\n  to {\n    opacity: 0;\n    transform: scale(0.98);\n  }\n}",
                    "styleUrl": "home.page.scss"
                }
            ],
            "stylesData": "",
            "constructorObj": {
                "name": "constructor",
                "description": "",
                "deprecated": false,
                "deprecationMessage": "",
                "args": [
                    {
                        "name": "cdr",
                        "type": "ChangeDetectorRef",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "toastController",
                        "type": "ToastController",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "router",
                        "type": "Router",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "creationService",
                        "type": "CreationService",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "commentService",
                        "type": "CommentService",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "ProfileService",
                        "type": "ProfileService",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "authService",
                        "type": "Auth",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    }
                ],
                "line": 75,
                "jsdoctags": [
                    {
                        "name": "cdr",
                        "type": "ChangeDetectorRef",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "toastController",
                        "type": "ToastController",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "router",
                        "type": "Router",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "creationService",
                        "type": "CreationService",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "commentService",
                        "type": "CommentService",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "ProfileService",
                        "type": "ProfileService",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "authService",
                        "type": "Auth",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            },
            "extends": [],
            "implements": [
                "OnInit"
            ],
            "accessors": {
                "currentPost": {
                    "name": "currentPost",
                    "getSignature": {
                        "name": "currentPost",
                        "type": "any",
                        "returnType": "any",
                        "line": 70
                    }
                }
            },
            "templateData": "<ion-header [translucent]=\"true\" class=\"header\">\n  <ion-toolbar class=\"header-toolbar\">\n    <div class=\"search-container\">\n      <div class=\"search-wrapper\">\n        <ion-icon name=\"search\" class=\"search-icon\"></ion-icon>\n        <input\n          type=\"text\"\n          placeholder=\"Search Artists, Schools, Categories...\"\n          class=\"search-input\"\n        />\n      </div>\n      <button class=\"notification-button\">\n        <ion-icon name=\"notifications-outline\" class=\"notification-icon\"></ion-icon>\n        <span class=\"notification-badge\"></span>\n      </button>\n    </div>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content [fullscreen]=\"true\" [scrollY]=\"true\" class=\"tiktok-content\">\n  <ion-refresher slot=\"fixed\" (ionRefresh)=\"refreshFeed($event)\">\n    <ion-refresher-content></ion-refresher-content>\n  </ion-refresher>\n\n   <!-- Vue Découverte avec animation -->\n   <div [class.hidden]=\"!showDiscoveryView\" \n       [class.fade-out]=\"isTransitioning && !showDiscoveryView\">\n    <app-discovery-view \n      [currentUserProfile]=\"currentUserProfile\" \n      *ngIf=\"showDiscoveryView\">\n    </app-discovery-view>\n  </div>\n\n  <!-- Vue Posts normale (utilisateurs avec abonnements) -->\n    <div [class.hidden]=\"showDiscoveryView\" \n       [class.fade-in]=\"!showDiscoveryView && !isTransitioning\"\n       class=\"posts-container\">\n    <div \n      class=\"post\" \n      *ngFor=\"let post of posts | filter: filterPublic; trackBy: trackByPostId\" \n    >\n      \n      <div class=\"video-container\">\n        <img [src]=\"getMediaUrl(post.thumbnailUrl || post.fileUrl)\" (error)=\"onImageContentError($event)\" class=\"video-thumbnail\">\n        <div class=\"video-overlay\"></div>\n      </div>\n\n      <div class=\"main-content\">\n        <div class=\"artist-info\">\n          <div class=\"artist-header\">\n            <img [src]=\"userAvatars[post.userId] || 'assets/avatar-default.png'\" class=\"artist-avatar\" (error)=\"onImageAvatarError($event)\">\n            <div class=\"artist-details\">\n              <div class=\"profile-header\">\n                <h4 class=\"profile-name\">{{ post.username || 'Utilisateur' }}</h4>\n                <ion-button \n                  (click)=\"subscribeTo(post.userId)\" \n                  *ngIf=\"currentUserProfile.id !== post.userId && isFollowingUser[post.userId]\" \n                  fill=\"clear\" \n                  size=\"small\" \n                  class=\"subscribe-btn\">\n                  S'abonner\n                </ion-button>\n              </div>\n              \n              <div class=\"artist-name\">\n                <span class=\"post-title\">{{ post.title }}</span>\n                <span class=\"separator\">•</span>\n                <span class=\"post-date\">{{ post.createdAt | date:'dd MMM yyyy' }}</span>\n              </div>\n              \n              <p class=\"artist-location\">{{ post.description | slice:0:60 }}...</p>\n              \n             \n            </div>\n          </div>\n          \n         <!-- Remplacez les lignes existantes par ceci -->\n<div class=\"challenge-row\" *ngIf=\"post.challengeId\">\n  <div class=\"challenge-title\" [class.loading]=\"currentChallenge[post.challengeId] === undefined\">\n  <span \n    *ngIf=\"hasActiveChallenge(post)\" \n    [class.long-text]=\"(currentChallenge[post.challengeId]?.name?.length || 0) > 15\">\n    <ion-icon name=\"trophy\" color=\"warning\">  </ion-icon> {{ currentChallenge[post.challengeId]?.name }}\n  </span>\n  <span *ngIf=\"currentChallenge[post.challengeId] === undefined\">Chargement du défi...</span>\n</div>\n  \n  <div class=\"separator\"></div>\n  \n  <ion-button \n    class=\"vote-button\" \n    [class.loading]=\"currentChallenge[post.challengeId] === undefined\"\n    [disabled]=\"!hasActiveChallenge(post)\"\n    (click)=\"hasActiveChallenge(post) && voteForArtist(post)\">\n    <span *ngIf=\"currentChallenge[post.challengeId] === undefined\">Chargement...</span>\n    <span *ngIf=\"currentChallenge[post.challengeId] !== undefined\">\n      {{ hasActiveChallenge(post) ? (currentChallenge[post.challengeId]?.call_to_action || 'Participer') : 'Défi terminé' }}\n    </span>\n  </ion-button>\n</div>\n        </div>\n\n        <div class=\"side-actions\">\n          <button class=\"action-button\" *ngFor=\"let action of getActionsForPost(post)\" (click)=\"action.action()\">\n            <div class=\"action-icon\" [class.liked]=\"action.icon === 'heart'\">\n              <ion-icon [name]=\"action.icon\"></ion-icon>\n            </div>\n            <span class=\"action-count\" *ngIf=\"action.count !== undefined\">{{ action.count }}</span>\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <ion-infinite-scroll threshold=\"100px\" (ionInfinite)=\"loadFeed($event)\">\n    <ion-infinite-scroll-content\n      loadingSpinner=\"bubbles\"\n      loadingText=\"Chargement de la suite...\">\n    </ion-infinite-scroll-content>\n  </ion-infinite-scroll>\n\n</ion-content>"
        },
        {
            "name": "LoginPage",
            "id": "component-LoginPage-9acb79ad7f0da2c686f12add7657de99d5388603232db3fe54c05cb07768588b24101ea97f52841aebd6b2974251c0bc957672dfe3b07e3a8b008bae9957aabc",
            "file": "src/app/login/login.page.ts",
            "encapsulation": [],
            "entryComponents": [],
            "inputs": [],
            "outputs": [],
            "providers": [],
            "selector": "app-login",
            "styleUrls": [
                "./login.page.scss"
            ],
            "styles": [],
            "templateUrl": [
                "./login.page.html"
            ],
            "viewProviders": [],
            "hostDirectives": [],
            "inputsClass": [],
            "outputsClass": [],
            "propertiesClass": [
                {
                    "name": "email",
                    "defaultValue": "''",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 41
                },
                {
                    "name": "isLoading",
                    "defaultValue": "false",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 44
                },
                {
                    "name": "password",
                    "defaultValue": "''",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 42
                },
                {
                    "name": "showPassword",
                    "defaultValue": "false",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 43
                }
            ],
            "methodsClass": [
                {
                    "name": "loginWithEmail",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 59,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "loginWithFacebook",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 118,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "loginWithGoogle",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 114,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "navigateToForgotPassword",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 122,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "navigateToRegister",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 126,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "ngOnInit",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 53,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "showError",
                    "args": [
                        {
                            "name": "header",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "message",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Promise<void>",
                    "typeParameters": [],
                    "line": 106,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        123,
                        134
                    ],
                    "jsdoctags": [
                        {
                            "name": "header",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "message",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "togglePasswordVisibility",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 55,
                    "deprecated": false,
                    "deprecationMessage": ""
                }
            ],
            "deprecated": false,
            "deprecationMessage": "",
            "hostBindings": [],
            "hostListeners": [],
            "standalone": true,
            "imports": [
                {
                    "name": "IonLoading"
                },
                {
                    "name": "CommonModule",
                    "type": "module"
                },
                {
                    "name": "FormsModule",
                    "type": "module"
                },
                {
                    "name": "IonContent"
                },
                {
                    "name": "IonButton"
                },
                {
                    "name": "IonIcon"
                },
                {
                    "name": "IonInput"
                }
            ],
            "description": "",
            "rawdescription": "\n",
            "type": "component",
            "sourceCode": "import { Auth } from '../../services/AUTH/auth';\nimport { Component, NgZone, OnInit } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { LoadingController, } from '@ionic/angular';\nimport { Dialog } from '@capacitor/dialog';\nimport { Router } from '@angular/router';\nimport { addIcons } from 'ionicons';\n\nimport { \n  logoGoogle, \n  logoFacebook, \n  mailOutline,\n  lockClosedOutline,\n  createOutline,\n  settingsOutline,\n  eyeOutline,\n  eyeOffOutline,\n  shieldCheckmark, trophyOutline, sparkles, personCircleOutline, keyOutline, helpCircleOutline, star, arrowForward } from 'ionicons/icons';\nimport { \n  IonIcon, \n  IonButton, \n  IonInput,\n \n  IonContent, IonLoading, IonImg } from '@ionic/angular/standalone';\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.page.html',\n  styleUrls: ['./login.page.scss'],\n  standalone: true,\n  imports: [ IonLoading, \n    CommonModule,\n    FormsModule,\n    IonContent,\n    IonButton,\n    IonIcon,\n    IonInput\n  ]\n})\nexport class LoginPage implements OnInit {\n  email: string = '';\n  password: string = '';\n  showPassword: boolean = false;\n  isLoading: boolean = false;\n  constructor(\n    private auth: Auth,\n    private router: Router,\n    private loadingController: LoadingController,\n  ) {\n    addIcons({mailOutline,lockClosedOutline,arrowForward,logoGoogle,logoFacebook,trophyOutline,sparkles,personCircleOutline,keyOutline,helpCircleOutline,star,shieldCheckmark,'eyeOutline':eyeOutline,'eyeOffOutline':eyeOffOutline,createOutline,settingsOutline});\n  }\n\n  ngOnInit() { }\n\n  togglePasswordVisibility() {\n    this.showPassword = !this.showPassword;\n  }\n\nloginWithEmail(): void {\n  if (!this.email || !this.password) {\n    this.showError('Erreur', 'Veuillez saisir un email et un mot de passe');\n    return;\n  }\n\n  this.loadingController.create({\n    message: 'Connexion en cours...',\n    spinner: 'crescent',\n    duration: 6000\n  }).then(loading => {\n    loading.present();\n     this.auth.login(this.email, this.password).subscribe({\n    next: async () => {\n      try {\n        await this.router.navigateByUrl('/tabs/tabs/home');\n      } catch (error) {\n        console.error('Navigation error:', error);\n      }finally{\n        loading.dismiss();\n      }\n    },\n    error: (err: Error) => {\n      let message = 'Identifiants incorrects';\n      \n      if (err.message.startsWith('TOO_MANY_ATTENTES:')) {\n        const minutes = err.message.split(':')[1];\n        message = `Trop de tentatives. Réessayez dans ${minutes} minutes.`;\n      } else if (err.message === 'ACCOUNT_INACTIVE') {\n        message = 'Ce compte est désactivé. Contactez le support.';\n      }\n\n      this.showError('Erreur de connexion', message);\n      this.password = '';\n      loading.dismiss();\n    }\n  });\n  });\n  \n \n\n\n\n}\n\n\n  // ✅ Méthode showError robuste pour Web + Android + iOS\n  private async showError(header: string, message: string): Promise<void> {\n  await Dialog.alert({\n    title: header,\n    message: message,\n    buttonTitle: 'OK'\n  });\n}\n\n  loginWithGoogle() {\n    // Implémentez la connexion Google\n  }\n\n  loginWithFacebook() {\n    // Implémentez la connexion Facebook\n  }\n\n  navigateToForgotPassword() {\n    this.router.navigate(['/forgot-password']);\n  }\n\n  navigateToRegister() {\n    this.router.navigate(['/register']);\n  }\n}\n",
            "assetsDirs": [],
            "styleUrlsData": [
                {
                    "data": ".login-content {\n\n \n\n  \n  .login-container {\n    min-height: 100vh;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    padding: 40px 24px;\n    max-width: 480px;\n    margin: 0 auto;\n  }\n\n  .header-section {\n    text-align: center;\n    margin-bottom: 60px;\n    \n    .logo-wrapper {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      gap: 16px;\n      margin-bottom: 10px;\n      \n      .logo-symbol {\n        width: 120px;  /* Augmenté de 100px à 140px */\n        height: 120px;  /* Augmenté de 100px à 140px */\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        \n        img {\n          width: 100%;  /* Changé de max-width à width pour forcer la taille */\n          height: auto;\n          object-fit: contain;  /* Garde les proportions de l'image */\n        }\n      }\n      \n      .app-name {\n        font-size: 18px;\n        font-weight: 300;\n        color: #cbd81c; \n        letter-spacing: 2px;\n        text-transform: uppercase;\n        margin: 0;\n        \n        span {\n          font-weight: 600;\n          color: #c50404f1; /* Rouge vif pour la partie 'Show' */\n        }\n      }\n    }\n\n    .welcome-text {\n      font-size: 32px;\n      font-weight: 300;\n      color: #000000;\n      margin: 0 0 8px 0;\n      letter-spacing: -0.5px;\n    }\n\n    .subtitle {\n      font-size: 16px;\n      color: #666666;\n      margin: 0;\n      font-weight: 300;\n    }\n  }\n\n  .form-section {\n    .input-group {\n      margin-bottom: 32px;\n      \n      .input-label {\n        display: flex;\n        align-items: center;\n        gap: 8px;\n        margin-bottom: 12px;\n        \n        ion-icon {\n          font-size: 18px;\n          color: #666666;\n        }\n        \n        span {\n          font-size: 14px;\n          color: #666666;\n          font-weight: 400;\n          letter-spacing: 0.5px;\n        }\n      }\n      \n      .password-input-wrapper {\n        position: relative;\n        \n        .custom-input {\n          --background: transparent;\n          --padding-start: 0;\n          --padding-end: 50px;\n          --padding-bottom: 12px;\n          --padding-top: 12px;\n          --border-color: #e0e0e0;\n          --border-width: 0 0 1px 0;\n          --border-style: solid;\n          --color: #000000;\n          --placeholder-color: #999999;\n          --placeholder-opacity: 1;\n          font-size: 16px;\n          font-weight: 400;\n          transition: all 0.3s ease;\n          \n          &:focus-within {\n            --border-color: #000000;\n          }\n        }\n        \n        .toggle-password-btn {\n          position: absolute;\n          right: 0;\n          top: 50%;\n          transform: translateY(-50%);\n          background: none;\n          border: none;\n          padding: 8px;\n          \n          ion-icon {\n            font-size: 20px;\n            color: #999999;\n            transition: color 0.3s ease;\n          }\n          \n          &:active ion-icon {\n            color: #000000;\n          }\n        }\n      }\n    }\n\n    .forgot-password {\n      text-align: right;\n      margin-bottom: 40px;\n      \n      .forgot-link {\n        color: #666666;\n        font-size: 14px;\n        text-decoration: none;\n        transition: color 0.3s ease;\n        \n        &:active {\n          color: #000000;\n        }\n      }\n    }\n\n    .login-button {\n      --background: #000000;\n      --background-activated: #333333;\n      --background-hover: #333333;\n      --border-radius: 8px;\n      --color: #ffffff;\n      height: 56px;\n      font-weight: 400;\n      font-size: 16px;\n      letter-spacing: 0.5px;\n      margin-bottom: 40px;\n      transition: all 0.3s ease;\n      \n      ion-icon {\n        margin-left: 8px;\n        transition: transform 0.3s ease;\n      }\n      \n      &:active {\n        --background: #333333;\n        \n        ion-icon {\n          transform: translateX(4px);\n        }\n      }\n    }\n\n    .divider {\n      display: flex;\n      align-items: center;\n      margin-bottom: 40px;\n      \n      .divider-line {\n        flex: 1;\n        height: 1px;\n        background: #e0e0e0;\n      }\n      \n      .divider-text {\n        padding: 0 16px;\n        color: #999999;\n        font-size: 14px;\n        font-weight: 300;\n      }\n    }\n\n    .social-login {\n      display: flex;\n      justify-content: center;\n      gap: 24px;\n      margin-bottom: 40px;\n      \n      .social-btn {\n        width: 56px;\n        height: 56px;\n        border-radius: 50%;\n        border: 1px solid #e0e0e0;\n        background: transparent;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        transition: all 0.3s ease;\n        \n        ion-icon {\n          font-size: 24px;\n        }\n        \n        &.google ion-icon {\n          color: #666666;\n        }\n        \n        &.facebook ion-icon {\n          color: #666666;\n        }\n        \n        &:active {\n          border-color: #000000;\n          transform: scale(0.95);\n          \n          ion-icon {\n            color: #000000;\n          }\n        }\n      }\n    }\n\n    .register-section {\n      text-align: center;\n      \n      .register-text {\n        font-size: 14px;\n        color: #666666;\n        margin-bottom: 16px;\n        font-weight: 300;\n      }\n      \n      .register-btn {\n        background: transparent;\n        border: 1px solid #000000;\n        color: #000000;\n        padding: 16px 32px;\n        border-radius: 8px;\n        font-size: 14px;\n        font-weight: 400;\n        letter-spacing: 0.5px;\n        transition: all 0.3s ease;\n        \n        &:active {\n          background: #000000;\n          color: #ffffff;\n        }\n      }\n    }\n  }\n  \n  .footer {\n    text-align: center;\n    padding-top: 40px;\n    border-top: 1px solid #f0f0f0;\n    margin-top: 40px;\n    \n    p {\n      color: #999999;\n      font-size: 12px;\n      margin: 0;\n      font-weight: 300;\n      \n      a {\n        color: #999999;\n        text-decoration: none;\n        \n        &:active {\n          color: #000000;\n        }\n      }\n    }\n  }\n}\n\n// Animation d'entrée subtile\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n\n.login-container {\n  animation: fadeIn 0.6s ease-out;\n}\n\n// États focus visibles\n.custom-input:focus-within {\n  --border-color: #000000 !important;\n}\n\n// Media queries pour les grands écrans\n@media (min-width: 768px) {\n  .login-content {\n    .login-container {\n      justify-content: center;\n      padding: 60px 24px;\n    }\n    \n    .header-section {\n      margin-bottom: 80px;\n    }\n    \n    .form-section {\n      .input-group {\n        margin-bottom: 40px;\n      }\n    }\n  }\n}\n\n// Support du mode sombre\n@media (prefers-color-scheme: dark) {\n  .login-content {\n    --background: #000000;\n    \n    .header-section {\n      .logo-symbol {\n        color: #ffffff;\n      }\n      \n      .app-name {\n        color: #ffffff;\n        \n        span {\n          color: #ffffff;\n        }\n      }\n      \n      .welcome-text {\n        color: #ffffff;\n      }\n      \n      .subtitle {\n        color: #aaaaaa;\n      }\n    }\n    \n    .form-section {\n      .input-group {\n        .input-label {\n          ion-icon {\n            color: #aaaaaa;\n          }\n          \n          span {\n            color: #aaaaaa;\n          }\n        }\n        \n        .password-input-wrapper {\n          .custom-input {\n            --border-color: #333333;\n            --color: #ffffff;\n            --placeholder-color: #666666;\n            \n            &:focus-within {\n              --border-color: #ffffff;\n            }\n          }\n          \n          .toggle-password-btn {\n            ion-icon {\n              color: #666666;\n            }\n            \n            &:active ion-icon {\n              color: #ffffff;\n            }\n          }\n        }\n      }\n      \n      .forgot-password {\n        .forgot-link {\n          color: #aaaaaa;\n          \n          &:active {\n            color: #ffffff;\n          }\n        }\n      }\n      \n      .login-button {\n        --background: #ffffff;\n        --background-activated: #e0e0e0;\n        --background-hover: #e0e0e0;\n        --color: #000000;\n        \n        &:active {\n          --background: #e0e0e0;\n        }\n      }\n      \n      .divider {\n        .divider-line {\n          background: #333333;\n        }\n        \n        .divider-text {\n          color: #666666;\n        }\n      }\n      \n      .social-login {\n        .social-btn {\n          border-color: #333333;\n          \n          ion-icon {\n            color: #aaaaaa;\n          }\n          \n          &:active {\n            border-color: #ffffff;\n            \n            ion-icon {\n              color: #ffffff;\n            }\n          }\n        }\n      }\n      \n      .register-section {\n        .register-text {\n          color: #aaaaaa;\n        }\n        \n        .register-btn {\n          border-color: #ffffff;\n          color: #ffffff;\n          \n          &:active {\n            background: #ffffff;\n            color: #000000;\n          }\n        }\n      }\n    }\n    \n    .footer {\n      border-top-color: #333333;\n      \n      p {\n        color: #666666;\n        \n        a {\n          color: #666666;\n          \n          &:active {\n            color: #ffffff;\n          }\n        }\n      }\n    }\n  }\n}",
                    "styleUrl": "./login.page.scss"
                }
            ],
            "stylesData": "",
            "constructorObj": {
                "name": "constructor",
                "description": "",
                "deprecated": false,
                "deprecationMessage": "",
                "args": [
                    {
                        "name": "auth",
                        "type": "Auth",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "router",
                        "type": "Router",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "loadingController",
                        "type": "LoadingController",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    }
                ],
                "line": 44,
                "jsdoctags": [
                    {
                        "name": "auth",
                        "type": "Auth",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "router",
                        "type": "Router",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "loadingController",
                        "type": "LoadingController",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            },
            "extends": [],
            "implements": [
                "OnInit"
            ],
            "templateData": "<ion-content class=\"login-content\">\n  <ion-loading \n    [isOpen]=\"isLoading\" \n    message=\"Connexion...\"\n    spinner=\"circles\">\n  </ion-loading>\n  \n  <div class=\"login-container\">\n    \n    <!-- En-tête minimaliste -->\n    <div class=\"header-section\">\n      <div class=\"logo-wrapper\">\n        <div class=\"logo-symbol\"><img src=\"../../assets/logo/logo.png\"/></div>\n        <h1 class=\"app-name\">On est tous <span>Gagnant</span></h1>\n      </div>\n      \n      <h2 class=\"welcome-text\">Connexion</h2>\n      <p class=\"subtitle\">Accédez à votre espace talent</p>\n    </div>\n\n    <!-- Formulaire minimaliste -->\n    <div class=\"form-section\">\n      <div class=\"input-group\">\n        <div class=\"input-label\">\n          <ion-icon name=\"mail-outline\"></ion-icon>\n          <span>Email</span>\n        </div>\n        <ion-input\n          [(ngModel)]=\"email\"\n          type=\"email\"\n          placeholder=\"votre@email.com\"\n          class=\"custom-input\">\n        </ion-input>\n      </div>\n\n      <div class=\"input-group\">\n        <div class=\"input-label\">\n          <ion-icon name=\"lock-closed-outline\"></ion-icon>\n          <span>Mot de passe</span>\n        </div>\n        <div class=\"password-input-wrapper\">\n          <ion-input\n            [(ngModel)]=\"password\"\n            [type]=\"showPassword ? 'text' : 'password'\"\n            placeholder=\"••••••••\"\n            class=\"custom-input\">\n          </ion-input>\n          <button \n            (click)=\"togglePasswordVisibility()\"\n            class=\"toggle-password-btn\">\n            <ion-icon \n              [name]=\"showPassword ? 'eye-off-outline' : 'eye-outline'\">\n            </ion-icon>\n          </button>\n        </div>\n      </div>\n\n      <div class=\"forgot-password\">\n        <a (click)=\"navigateToForgotPassword()\" class=\"forgot-link\">\n          Mot de passe oublié ?\n        </a>\n      </div>\n\n      <ion-button \n        expand=\"block\" \n        (click)=\"loginWithEmail()\"\n        class=\"login-button\">\n        Se connecter\n        <ion-icon name=\"arrow-forward\" slot=\"end\"></ion-icon>\n      </ion-button>\n\n      <div class=\"divider\">\n        <span class=\"divider-line\"></span>\n        <span class=\"divider-text\">ou continuer avec</span>\n        <span class=\"divider-line\"></span>\n      </div>\n\n      <div class=\"social-login\">\n        <button (click)=\"loginWithGoogle()\" class=\"social-btn google\">\n          <ion-icon name=\"logo-google\"></ion-icon>\n        </button>\n        <button (click)=\"loginWithFacebook()\" class=\"social-btn facebook\">\n          <ion-icon name=\"logo-facebook\"></ion-icon>\n        </button>\n      </div>\n\n      <div class=\"register-section\">\n        <p class=\"register-text\">Nouveau sur BEST SUI ?</p>\n        <button (click)=\"navigateToRegister()\" class=\"register-btn\">\n          Créer un compte\n        </button>\n      </div>\n    </div>\n\n    <!-- Footer minimal -->\n    <div class=\"footer\">\n      <p>© 2024 TalentShow. <a>Mentions légales</a></p>\n    </div>\n  </div>\n</ion-content>"
        },
        {
            "name": "PageComponent",
            "id": "component-PageComponent-21dd6eb370b4983b5c21c84d40e6f54d266a9d9af9889e6e76b35c43058bd53b3e451bad089d5adf4bea46647ba10265a2fa8cb15630398e75636307d4817fc6",
            "file": "src/stories/page.component.ts",
            "encapsulation": [],
            "entryComponents": [],
            "inputs": [],
            "outputs": [],
            "providers": [],
            "selector": "storybook-page",
            "styleUrls": [
                "./page.css"
            ],
            "styles": [],
            "template": "<article>  <storybook-header\n    [user]=\"user\"\n    (onLogout)=\"doLogout()\"\n    (onLogin)=\"doLogin()\"\n    (onCreateAccount)=\"doCreateAccount()\"\n  ></storybook-header>\n  <section class=\"storybook-page\">\n    <h2>Pages in Storybook</h2>\n    <p>\n      We recommend building UIs with a\n      <a href=\"https://componentdriven.org\" target=\"_blank\" rel=\"noopener noreferrer\">\n        <strong>component-driven</strong>\n      </a>\n      process starting with atomic components and ending with pages.\n    </p>\n    <p>\n      Render pages with mock data. This makes it easy to build and review page states without\n      needing to navigate to them in your app. Here are some handy patterns for managing page data\n      in Storybook:\n    </p>\n    <ul>\n      <li>\n        Use a higher-level connected component. Storybook helps you compose such data from the\n        \"args\" of child component stories\n      </li>\n      <li>\n        Assemble data in the page component from your services. You can mock these services out\n        using Storybook.\n      </li>\n    </ul>\n    <p>\n      Get a guided tutorial on component-driven development at\n      <a href=\"https://storybook.js.org/tutorials/\" target=\"_blank\" rel=\"noopener noreferrer\">\n        Storybook tutorials\n      </a>\n      . Read more in the\n      <a href=\"https://storybook.js.org/docs\" target=\"_blank\" rel=\"noopener noreferrer\"> docs </a>\n      .\n    </p>\n    <div class=\"tip-wrapper\">\n      <span class=\"tip\">Tip</span> Adjust the width of the canvas with the\n      <svg width=\"10\" height=\"10\" viewBox=\"0 0 12 12\" xmlns=\"http://www.w3.org/2000/svg\">\n        <g fill=\"none\" fillRule=\"evenodd\">\n          <path\n            d=\"M1.5 5.2h4.8c.3 0 .5.2.5.4v5.1c-.1.2-.3.3-.4.3H1.4a.5.5 0 01-.5-.4V5.7c0-.3.2-.5.5-.5zm0-2.1h6.9c.3 0 .5.2.5.4v7a.5.5 0 01-1 0V4H1.5a.5.5 0 010-1zm0-2.1h9c.3 0 .5.2.5.4v9.1a.5.5 0 01-1 0V2H1.5a.5.5 0 010-1zm4.3 5.2H2V10h3.8V6.2z\"\n            id=\"a\"\n            fill=\"#999\"\n          />\n        </g>\n      </svg>\n      Viewports addon in the toolbar\n    </div>\n  </section>\n</article>",
            "templateUrl": [],
            "viewProviders": [],
            "hostDirectives": [],
            "inputsClass": [],
            "outputsClass": [],
            "propertiesClass": [
                {
                    "name": "user",
                    "defaultValue": "null",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "User | null",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 69
                }
            ],
            "methodsClass": [
                {
                    "name": "doCreateAccount",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 79,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "doLogin",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 75,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "doLogout",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 71,
                    "deprecated": false,
                    "deprecationMessage": ""
                }
            ],
            "deprecated": false,
            "deprecationMessage": "",
            "hostBindings": [],
            "hostListeners": [],
            "standalone": true,
            "imports": [
                {
                    "name": "CommonModule",
                    "type": "module"
                },
                {
                    "name": "HeaderComponent",
                    "type": "component"
                }
            ],
            "description": "",
            "rawdescription": "\n",
            "type": "component",
            "sourceCode": "import { Component } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { HeaderComponent } from './header.component';\nimport type { User } from './user';\n\n@Component({\n  selector: 'storybook-page',\n  standalone: true,\n  imports: [CommonModule, HeaderComponent],\n  template: `<article>\n  <storybook-header\n    [user]=\"user\"\n    (onLogout)=\"doLogout()\"\n    (onLogin)=\"doLogin()\"\n    (onCreateAccount)=\"doCreateAccount()\"\n  ></storybook-header>\n  <section class=\"storybook-page\">\n    <h2>Pages in Storybook</h2>\n    <p>\n      We recommend building UIs with a\n      <a href=\"https://componentdriven.org\" target=\"_blank\" rel=\"noopener noreferrer\">\n        <strong>component-driven</strong>\n      </a>\n      process starting with atomic components and ending with pages.\n    </p>\n    <p>\n      Render pages with mock data. This makes it easy to build and review page states without\n      needing to navigate to them in your app. Here are some handy patterns for managing page data\n      in Storybook:\n    </p>\n    <ul>\n      <li>\n        Use a higher-level connected component. Storybook helps you compose such data from the\n        \"args\" of child component stories\n      </li>\n      <li>\n        Assemble data in the page component from your services. You can mock these services out\n        using Storybook.\n      </li>\n    </ul>\n    <p>\n      Get a guided tutorial on component-driven development at\n      <a href=\"https://storybook.js.org/tutorials/\" target=\"_blank\" rel=\"noopener noreferrer\">\n        Storybook tutorials\n      </a>\n      . Read more in the\n      <a href=\"https://storybook.js.org/docs\" target=\"_blank\" rel=\"noopener noreferrer\"> docs </a>\n      .\n    </p>\n    <div class=\"tip-wrapper\">\n      <span class=\"tip\">Tip</span> Adjust the width of the canvas with the\n      <svg width=\"10\" height=\"10\" viewBox=\"0 0 12 12\" xmlns=\"http://www.w3.org/2000/svg\">\n        <g fill=\"none\" fillRule=\"evenodd\">\n          <path\n            d=\"M1.5 5.2h4.8c.3 0 .5.2.5.4v5.1c-.1.2-.3.3-.4.3H1.4a.5.5 0 01-.5-.4V5.7c0-.3.2-.5.5-.5zm0-2.1h6.9c.3 0 .5.2.5.4v7a.5.5 0 01-1 0V4H1.5a.5.5 0 010-1zm0-2.1h9c.3 0 .5.2.5.4v9.1a.5.5 0 01-1 0V2H1.5a.5.5 0 010-1zm4.3 5.2H2V10h3.8V6.2z\"\n            id=\"a\"\n            fill=\"#999\"\n          />\n        </g>\n      </svg>\n      Viewports addon in the toolbar\n    </div>\n  </section>\n</article>`,\n  styleUrls: ['./page.css'],\n})\nexport class PageComponent {\n  user: User | null = null;\n\n  doLogout() {\n    this.user = null;\n  }\n\n  doLogin() {\n    this.user = { name: 'Jane Doe' };\n  }\n\n  doCreateAccount() {\n    this.user = { name: 'Jane Doe' };\n  }\n}\n",
            "assetsDirs": [],
            "styleUrlsData": [
                {
                    "data": ".storybook-page {\n  margin: 0 auto;\n  padding: 48px 20px;\n  max-width: 600px;\n  color: #333;\n  font-size: 14px;\n  line-height: 24px;\n  font-family: 'Nunito Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif;\n}\n\n.storybook-page h2 {\n  display: inline-block;\n  vertical-align: top;\n  margin: 0 0 4px;\n  font-weight: 700;\n  font-size: 32px;\n  line-height: 1;\n}\n\n.storybook-page p {\n  margin: 1em 0;\n}\n\n.storybook-page a {\n  color: inherit;\n}\n\n.storybook-page ul {\n  margin: 1em 0;\n  padding-left: 30px;\n}\n\n.storybook-page li {\n  margin-bottom: 8px;\n}\n\n.storybook-page .tip {\n  display: inline-block;\n  vertical-align: top;\n  margin-right: 10px;\n  border-radius: 1em;\n  background: #e7fdd8;\n  padding: 4px 12px;\n  color: #357a14;\n  font-weight: 700;\n  font-size: 11px;\n  line-height: 12px;\n}\n\n.storybook-page .tip-wrapper {\n  margin-top: 40px;\n  margin-bottom: 40px;\n  font-size: 13px;\n  line-height: 20px;\n}\n\n.storybook-page .tip-wrapper svg {\n  display: inline-block;\n  vertical-align: top;\n  margin-top: 3px;\n  margin-right: 4px;\n  width: 12px;\n  height: 12px;\n}\n\n.storybook-page .tip-wrapper svg path {\n  fill: #1ea7fd;\n}\n",
                    "styleUrl": "./page.css"
                }
            ],
            "stylesData": "",
            "extends": []
        },
        {
            "name": "ProfilePage",
            "id": "component-ProfilePage-cb8763681302902bcb3486f16bea3b4bcbcf7a6d94b3d172d1eafe5497be4ec8168be47fb14bab31b472c1fb0a23c6807b74526a4172f82a446a15d5656d5d16",
            "file": "src/app/tab-profile/profile.page.ts",
            "encapsulation": [],
            "entryComponents": [],
            "inputs": [],
            "outputs": [],
            "providers": [
                {
                    "name": "ModalController",
                    "type": "controller"
                }
            ],
            "selector": "app-profile",
            "styleUrls": [
                "./profile.page.scss"
            ],
            "styles": [],
            "templateUrl": [
                "./profile.page.html"
            ],
            "viewProviders": [],
            "hostDirectives": [],
            "inputsClass": [],
            "outputsClass": [],
            "propertiesClass": [
                {
                    "name": "activeChallenges$",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "Observable<Challenge[]>",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 84
                },
                {
                    "name": "activeChallengesCount",
                    "defaultValue": "0",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 86
                },
                {
                    "name": "currentUserId",
                    "defaultValue": "null",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string | null",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 83
                },
                {
                    "name": "destroy$",
                    "defaultValue": "new Subject<void>()",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 91,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "hasActiveChallenges",
                    "defaultValue": "true",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 85
                },
                {
                    "name": "isLoading",
                    "defaultValue": "false",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 81
                },
                {
                    "name": "isLoadingContents",
                    "defaultValue": "false",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 88
                },
                {
                    "name": "isOwnProfile",
                    "defaultValue": "false",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 80
                },
                {
                    "name": "isRight_toWrite",
                    "defaultValue": "false",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 89
                },
                {
                    "name": "selectedTab",
                    "defaultValue": "'posts'",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "\"posts\" | \"success\" | \"info\"",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 79
                },
                {
                    "name": "successPosts",
                    "defaultValue": "[]",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "Post[]",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 90
                },
                {
                    "name": "userContents",
                    "defaultValue": "[]",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "Content[]",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 87
                },
                {
                    "name": "userProfile",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "UserProfile",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 82
                }
            ],
            "methodsClass": [
                {
                    "name": "blockUser",
                    "args": [],
                    "optional": false,
                    "returnType": "any",
                    "typeParameters": [],
                    "line": 467,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        123,
                        134
                    ]
                },
                {
                    "name": "copyProfileLink",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 503,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "createChallenge",
                    "args": [],
                    "optional": false,
                    "returnType": "any",
                    "typeParameters": [],
                    "line": 254,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        134
                    ]
                },
                {
                    "name": "editProfile",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 425,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "formatNumber",
                    "args": [
                        {
                            "name": "num",
                            "type": "number | undefined | null",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "string",
                    "typeParameters": [],
                    "line": 557,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "num",
                            "type": "number | undefined | null",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "getChallengeStatus",
                    "args": [
                        {
                            "name": "challenge",
                            "type": "Challenge",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "\"active\" | \"ending-soon\" | \"ended\"",
                    "typeParameters": [],
                    "line": 298,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "challenge",
                            "type": "Challenge",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "getDaysRemaining",
                    "args": [
                        {
                            "name": "challenge",
                            "type": "Challenge",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "number",
                    "typeParameters": [],
                    "line": 284,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "challenge",
                            "type": "Challenge",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "getMediaUrl",
                    "args": [
                        {
                            "name": "relativePath",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "string",
                    "typeParameters": [],
                    "line": 191,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "relativePath",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "getStatusBadgeColor",
                    "args": [
                        {
                            "name": "status",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "string",
                    "typeParameters": [],
                    "line": 305,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "status",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "getStatusText",
                    "args": [
                        {
                            "name": "status",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "string",
                    "typeParameters": [],
                    "line": 314,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "status",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "goBack",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 549,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "loadActiveChallenges",
                    "args": [
                        {
                            "name": "UerId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 239,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "UerId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "loadUserContents",
                    "args": [
                        {
                            "name": "userId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 224,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "userId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "loadUserProfile",
                    "args": [
                        {
                            "name": "userId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "any",
                    "typeParameters": [],
                    "line": 195,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        134
                    ],
                    "jsdoctags": [
                        {
                            "name": "userId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "ngOnInit",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 115,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "onImageAvatarError",
                    "args": [
                        {
                            "name": "event",
                            "type": "any",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 526,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "event",
                            "type": "any",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "onImageContentError",
                    "args": [
                        {
                            "name": "event",
                            "type": "any",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 537,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "event",
                            "type": "any",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "openChallenge",
                    "args": [
                        {
                            "name": "challenge",
                            "type": "Challenge",
                            "optional": true,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "any",
                    "typeParameters": [],
                    "line": 274,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        134
                    ],
                    "jsdoctags": [
                        {
                            "name": "challenge",
                            "type": "Challenge",
                            "optional": true,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "openContent",
                    "args": [
                        {
                            "name": "content",
                            "type": "Content",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 518,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "content",
                            "type": "Content",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "openSettings",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 429,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "presentMoreOptions",
                    "args": [],
                    "optional": false,
                    "returnType": "any",
                    "typeParameters": [],
                    "line": 352,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        134
                    ]
                },
                {
                    "name": "presentShareOptions",
                    "args": [],
                    "optional": false,
                    "returnType": "any",
                    "typeParameters": [],
                    "line": 324,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        134
                    ]
                },
                {
                    "name": "presentToast",
                    "args": [
                        {
                            "name": "message",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "color",
                            "type": "\"success\" | \"warning\" | \"danger\"",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "defaultValue": "'success'"
                        }
                    ],
                    "optional": false,
                    "returnType": "any",
                    "typeParameters": [],
                    "line": 493,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        123,
                        134
                    ],
                    "jsdoctags": [
                        {
                            "name": "message",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "color",
                            "type": "\"success\" | \"warning\" | \"danger\"",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "defaultValue": "'success'",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "reportUser",
                    "args": [],
                    "optional": false,
                    "returnType": "any",
                    "typeParameters": [],
                    "line": 433,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        123,
                        134
                    ]
                },
                {
                    "name": "selectTab",
                    "args": [
                        {
                            "name": "tab",
                            "type": "\"posts\" | \"success\" | \"info\"",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 247,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "tab",
                            "type": "\"posts\" | \"success\" | \"info\"",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "sendMessage",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 513,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "shareProfile",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 509,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "toggleFollow",
                    "args": [],
                    "optional": false,
                    "returnType": "any",
                    "typeParameters": [],
                    "line": 158,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        134
                    ]
                },
                {
                    "name": "viewAllChallenges",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 279,
                    "deprecated": false,
                    "deprecationMessage": ""
                }
            ],
            "deprecated": false,
            "deprecationMessage": "",
            "hostBindings": [],
            "hostListeners": [],
            "standalone": true,
            "imports": [
                {
                    "name": "NgIf"
                },
                {
                    "name": "IonTitle"
                },
                {
                    "name": "IonSpinner"
                },
                {
                    "name": "IonContent"
                },
                {
                    "name": "IonHeader"
                },
                {
                    "name": "IonToolbar"
                },
                {
                    "name": "IonButtons"
                },
                {
                    "name": "IonButton"
                },
                {
                    "name": "IonIcon"
                },
                {
                    "name": "IonBadge"
                },
                {
                    "name": "IonFab"
                },
                {
                    "name": "IonFabButton"
                },
                {
                    "name": "CommonModule",
                    "type": "module"
                },
                {
                    "name": "FormsModule",
                    "type": "module"
                }
            ],
            "description": "",
            "rawdescription": "\n",
            "type": "component",
            "sourceCode": "import { ChangeDetectorRef, Component, OnInit } from '@angular/core';\nimport { NgIf, CommonModule, Location } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { ModalController } from '@ionic/angular';\nimport { ChallengeFormComponent } from '../components/challenge-form/challenge-form.component';\nimport { addIcons } from 'ionicons';\n\nimport { \n  shareSocialOutline, \n  ellipsisVertical, \n  addCircle, \n  checkmarkCircle, \n  star, \n  linkOutline, \n  calendarOutline, \n  openOutline,\n  flag,\n  ban,\n  close,\n  heart,\n  createOutline,\n  settingsOutline,\n  trophyOutline,\n  schoolOutline,\n  flameOutline,\n  peopleOutline,\n  timeOutline,\n  add, musicalNotesOutline, chatbubble, chevronBack, \n  create} from 'ionicons/icons';\nimport { \n  IonContent, \n  IonHeader,\n  IonToolbar, \n  IonModal,\n  IonButtons, \n  IonButton, \n  IonIcon, \n  IonBadge,\n  IonFab,\n  IonFabButton, IonSpinner, IonTitle }  from '@ionic/angular/standalone';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { ActionSheetController, AlertController, ToastController } from '@ionic/angular';\nimport { UserProfile } from 'src/models/User';\nimport { Observable, of, Subject, switchMap, takeUntil, tap } from 'rxjs';\nimport { Challenge } from 'src/models/Challenge';\nimport { ProfileService } from 'src/services/PROFILE_SERVICE/profile-service';\nimport { Auth } from 'src/services/AUTH/auth';\nimport { CreationService } from 'src/services/CREATION/creation-service';\nimport { UserService } from 'src/services/USER_SERVICE/user-service';\nimport { Content } from 'src/models/Content';\nimport { getMediaUrl } from '../utils/media.utils';\n\n\ninterface Post {\n  id: number;\n  imageUrl: string;\n  title: string;\n  votes: number;\n  category: string;\n}\n\n\n\n@Component({\n  selector: 'app-profile',\n  templateUrl: './profile.page.html',\n  styleUrls: ['./profile.page.scss'],\n  standalone: true,\n  providers: [ModalController],\n  imports: [ NgIf,IonTitle, IonSpinner, \n    IonContent, IonHeader, IonToolbar, IonButtons, IonButton, \n    IonIcon, IonBadge, IonFab, IonFabButton,\n    CommonModule, FormsModule\n  ] \n})\nexport class ProfilePage implements OnInit {\n\n  \n  selectedTab: 'posts' | 'success' | 'info' = 'posts';\n  isOwnProfile: boolean = false; // Détermine si c'est le profil de l'utilisateur connecté\n  isLoading : boolean =false;\n  userProfile!:UserProfile; \n  currentUserId: string | null = null;\n  activeChallenges$!: Observable<Challenge[]>;\n  hasActiveChallenges = true;\n  activeChallengesCount : number = 0;\n  userContents: Content[] = [];\n  isLoadingContents = false; \n  isRight_toWrite = false;\n  successPosts: Post[] = [];\n  private destroy$ = new Subject<void>();\n  constructor(\n    private cdr: ChangeDetectorRef, \n    private route: ActivatedRoute,\n    private router: Router,\n    private location: Location,\n    private profileService : ProfileService,\n    private authservice: Auth,\n    private creationService: CreationService,\n    private alertController: AlertController,\n    private toastController: ToastController,\n    private actionSheetController: ActionSheetController,\n    private modalCtrl: ModalController\n  ) {\n    this.userProfile = {} as UserProfile;\n    this.userProfile.stats = {} as {\n      posts: 0;\n      fans: 0;\n      votes: 0;\n      stars: 0;\n    };\n    \n    addIcons({ flag, ban, close, createOutline, settingsOutline, chevronBack,shareSocialOutline,star, ellipsisVertical,addCircle,checkmarkCircle,schoolOutline,linkOutline,calendarOutline,openOutline,trophyOutline,flameOutline,peopleOutline,musicalNotesOutline,timeOutline,add,heart,chatbubble});\n  }\nngOnInit() {\n  // S'abonner aux changements de paramètres de route\n  this.route.paramMap.pipe(\n    takeUntil(this.destroy$)\n  ).subscribe(params => {\n    const userId = params.get('id');\n    const isCurrentUserProfile = this.route.snapshot.data['isCurrentUser'] === true;\n    const currentUser = this.authservice.getCurrentUser();\n    this.currentUserId = currentUser?.id?.toString() || null;\n    this.isRight_toWrite = !currentUser?.readonly;\n   \n    if (isCurrentUserProfile && this.currentUserId) {\n      // Cas de la route /my-profile\n      this.isOwnProfile = true;\n      this.loadUserProfile(this.currentUserId);\n    } else if (userId) {\n      // Cas de la route /profile/:id\n      this.isOwnProfile = userId === this.currentUserId;\n      this.loadUserProfile(userId);\n    } else if (this.currentUserId) {\n      // Fallback si pas d'ID mais utilisateur connecté\n      this.isOwnProfile = true;\n      this.loadUserProfile(this.currentUserId);\n    } else {\n      // Rediriger vers la page de connexion si pas connecté\n      this.router.navigate(['/login']);\n    }\n  });\n\n  // S'abonner aux changements d'authentification\n  this.authservice.currentUser$.pipe(\n    takeUntil(this.destroy$)\n  ).subscribe(user => {\n    const currentUserId = user?.id?.toString() || null;\n    if (this.userProfile) {\n      const isCurrentUserProfile = this.route.snapshot.data['isCurrentUser'] === true;\n      this.isOwnProfile = isCurrentUserProfile || this.userProfile.id === currentUserId;\n    }\n    this.currentUserId = currentUserId;\n    this.isRight_toWrite = user?.readonly || false;\n  });\n}\n\nasync toggleFollow() {\n  if (!this.currentUserId || !this.userProfile) return;\n\n  try {\n    let result;\n    if (this.userProfile.isFollowing) {\n      result = await this.profileService.unfollowProfile(this.currentUserId, this.userProfile.id);\n    } else {\n      result = await this.profileService.followProfile(this.currentUserId, this.userProfile.id);\n    }\n\n    // Mise à jour locale des données\n    if (result) {\n      this.userProfile.isFollowing = !this.userProfile.isFollowing;\n      if (result.profile) {\n        // Mettre à jour le compteur de fans avec la valeur du serveur\n        this.userProfile.stats = this.userProfile.stats || { fans: 0, following: 0 };\n        this.userProfile.stats.fans = result.profile.stats?.fans || 0;\n      }\n    }\n  } catch (err) {\n    console.error('Erreur lors de la mise à jour du suivi', err);\n    const toast = await this.toastController.create({\n      message: 'Erreur lors de la mise à jour du suivi',\n      duration: 3000,\n      position: 'bottom',\n      color: 'danger'\n    });\n    await toast.present();\n  }\n}\n\n// Add this method to your HomePage class\ngetMediaUrl(relativePath: string): string {\n  return getMediaUrl(relativePath);\n}\n \n   async loadUserProfile(userId: string) {\n  if (!userId) {\n    this.router.navigate(['/login']);\n    return;\n  }\n\n  this.isLoading = true;\n  try {\n    const profile = await this.profileService.getProfileById(userId).toPromise();\n    if (!profile) {\n      throw new Error('Profil non trouvé');\n    }\n    \n    this.userProfile = profile;\n    this.isOwnProfile = this.currentUserId === userId;\n    this.cdr.detectChanges();\n    \n    // Charger les données associées\n    this.loadUserContents(userId);\n    this.loadActiveChallenges(userId);\n    \n  } catch (error) {\n    console.error('Erreur lors du chargement du profil:', error);\n    this.router.navigate(['/tabs/home']);\n  } finally {\n    this.isLoading = false;\n  }\n}\n\n  loadUserContents(userId: string) {\n    this.isLoadingContents = true;\n    this.creationService.getUserContents(userId).subscribe({\n      next: (contents) => {\n        this.userContents = contents;\n        this.isLoadingContents = false;\n      },\n      error: (err) => {\n        console.error('Erreur lors du chargement des contenus', err);\n        this.isLoadingContents = false;\n      }\n    });\n  }\n\n\n  loadActiveChallenges(UerId: string){\n    this.activeChallenges$ = this.creationService.getChallengesByCreator(UerId);\n    this.activeChallenges$.subscribe((challenges: Challenge[]) => {\n      this.activeChallengesCount = challenges.length;\n    });\n    \n  }\n\n  selectTab(tab: 'posts' | 'success' | 'info') {\n    this.selectedTab = tab;\n  }\n\n  \n\n  // Gestion des challenges\n  async createChallenge() {\n     const modal = await this.modalCtrl.create({\n      component: ChallengeFormComponent,\n      componentProps: {\n        challenge: null // Permet d'éditer un challenge existant ou d'en créer un nouveau\n      },\n      cssClass: 'auto-height',\n      backdropDismiss: false\n    });\n\n    await modal.present();\n\n    const { data } = await modal.onDidDismiss();\n    \n    if (data) {\n      this.loadActiveChallenges(this.currentUserId || ''); // Rafraîchir la liste des challenges\n    }\n   \n  }\n\n   async openChallenge(challenge?: Challenge) {\n    console.log('Navigating to create challenge...');\n    //this.router.navigate(['/create-challenge']);\n  }\n\n  viewAllChallenges() {\n    console.log('Viewing all challenges for user:', this.userProfile.id);\n    this.router.navigate(['/challenges', this.userProfile.id]);\n  }\n\n  getDaysRemaining(challenge: Challenge): number {\n  if (!challenge.end_date) return 0;\n  \n  const endDate = new Date(challenge.end_date);\n  if (isNaN(endDate.getTime())) {\n    console.error('Date de fin invalide:', challenge.end_date);\n    return 0;\n  }\n  \n  const now = new Date();\n  const diffTime = endDate.getTime() - now.getTime();\n  return Math.max(0, Math.ceil(diffTime / (1000 * 60 * 60 * 24)));\n}\n\n  getChallengeStatus(challenge: Challenge): 'active' | 'ending-soon' | 'ended' {\n    const daysRemaining = this.getDaysRemaining(challenge);\n    if (daysRemaining <= 0) return 'ended';\n    if (daysRemaining <= 3) return 'ending-soon';\n    return 'active';\n  }\n\n  getStatusBadgeColor(status: string): string {\n    switch(status) {\n      case 'active': return 'success';\n      case 'ending-soon': return 'warning';\n      case 'ended': return 'medium';\n      default: return 'primary';\n    }\n  }\n\n  getStatusText(status: string): string {\n    switch(status) {\n      case 'active': return 'EN COURS';\n      case 'ending-soon': return 'BIENTÔT TERMINÉ';\n      case 'ended': return 'TERMINÉ';\n      default: return 'ACTIF';\n    }\n  }\n\n  // Méthodes existantes\n  async presentShareOptions() {\n    const actionSheet = await this.actionSheetController.create({\n      header: 'Partager le profil',\n      buttons: [\n        {\n          text: 'Copier le lien',\n          icon: 'link',\n          handler: () => {\n            this.copyProfileLink();\n          }\n        },\n        {\n          text: 'Partager via...',\n          icon: 'share-social',\n          handler: () => {\n            this.shareProfile();\n          }\n        },\n        {\n          text: 'Annuler',\n          icon: 'close',\n          role: 'cancel'\n        }\n      ]\n    });\n    await actionSheet.present();\n  }\n\n async presentMoreOptions() {\n  const isOwnProfile = this.userProfile?.id === this.authservice.getCurrentUser()?.id;\n  \n  const buttons = [];\n \n  if (isOwnProfile) {\n    // Options pour le profil de l'utilisateur connecté\n    if(this.activeChallengesCount > 0 && this.userProfile?.userType === 'creator') {\n      buttons.push(\n        {\n          text: 'Nouveau Défi',\n          icon: 'trophy-outline',\n          handler: () => {\n            this.createChallenge();\n          }\n        }\n      );\n    }\n    buttons.push(\n      {\n        text: 'Modifier le profil',\n        icon: 'create-outline',\n        handler: () => {\n          this.editProfile();\n        }\n      },\n      {\n        text: 'Paramètres',\n        icon: 'settings-outline',\n        handler: () => {\n          this.openSettings();\n        }\n      }\n    );\n    \n  } else {\n    // Options pour le profil d'un autre utilisateur\n    buttons.push(\n      {\n        text: 'Signaler',\n        icon: 'flag-outline',\n        role: 'destructive',\n        handler: () => {\n          this.reportUser();\n        }\n      },\n      {\n        text: 'Bloquer',\n        icon: 'ban-outline',\n        role: 'destructive',\n        handler: () => {\n          this.blockUser();\n        }\n      }\n    );\n  }\n\n  // Bouton Annuler commun aux deux cas\n  buttons.push({\n    text: 'Annuler',\n    icon: 'close',\n    role: 'cancel'\n  });\n\n  const actionSheet = await this.actionSheetController.create({\n    header: isOwnProfile ? 'Options du profil' : 'Options',\n    buttons: buttons\n  });\n\n  await actionSheet.present();\n}\n\n// Ajoutez ces méthodes si elles n'existent pas déjà\nprivate editProfile() {\n  this.router.navigate(['/edit-profile']);\n}\n\nprivate openSettings() {\n  this.router.navigate(['/settings']);\n}\n\nprivate async reportUser() {\n  const alert = await this.alertController.create({\n    header: 'Signaler un utilisateur',\n    message: 'Pourquoi souhaitez-vous signaler cet utilisateur ?',\n    inputs: [\n      {\n        name: 'reason',\n        type: 'text',\n        placeholder: 'Raison du signalement'\n      }\n    ],\n    buttons: [\n      {\n        text: 'Annuler',\n        role: 'cancel'\n      },\n      {\n        text: 'Envoyer',\n        handler: (data) => {\n          if (data.reason) {\n            // Envoyer le signalement\n            console.log('Signalement envoyé :', data.reason);\n            this.presentToast('Signalement envoyé avec succès', 'success');\n            return true; // Ajoutez cette ligne pour fermer l'alerte\n          } else {\n            this.presentToast('Veuillez indiquer une raison', 'warning');\n            return false; // Empêche la fermeture de l'alerte\n          }\n        }\n      }\n    ]\n  });\n  await alert.present();\n}\nprivate async blockUser() {\n  const alert = await this.alertController.create({\n    header: 'Confirmer',\n    message: 'Voulez-vous vraiment bloquer cet utilisateur ?',\n    buttons: [\n      {\n        text: 'Annuler',\n        role: 'cancel'\n      },\n      {\n        text: 'Bloquer',\n        role: 'destructive',\n        handler: () => {\n          // Implémentez la logique de blocage\n          console.log('Utilisateur bloqué');\n          this.presentToast('Utilisateur bloqué avec succès', 'success');\n          // Revenir en arrière ou rafraîchir la page\n          this.router.navigate(['/tabs/tab-home']);\n        }\n      }\n    ]\n  });\n  await alert.present();\n}\n\n// Ajoutez cette méthode utilitaire pour les notifications\nprivate async presentToast(message: string, color: 'success' | 'warning' | 'danger' = 'success') {\n  const toast = await this.toastController.create({\n    message: message,\n    duration: 2000,\n    color: color,\n    position: 'bottom'\n  });\n  await toast.present();\n}\n\n  copyProfileLink() {\n    const link = `https://app.com/profile/${this.userProfile.id}`;\n    navigator.clipboard.writeText(link);\n    console.log('Link copied:', link);\n  }\n\n  shareProfile() {\n    console.log('Sharing profile...');\n  }\n\n  sendMessage() {\n    console.log('Opening message...');\n  }\n\n  // Dans profile.page.ts\nopenContent(content: Content) {\n  // Naviguer vers la page de détail du contenu\n  this.router.navigate(['/content-detail', content.id]);\n  // Ou ouvrir un modal avec le contenu\n  // this.presentContentModal(content);\n}\n\n\nonImageAvatarError(event: any) {\n    // On récupère l'élément HTML <img> qui a déclenché l'erreur\n    const imgElement = event.target as HTMLImageElement;\n   imgElement.onerror = null;\n    // On remplace la source par l'image locale\n    imgElement.src = 'assets/avatar-default.png';\n    // Optionnel : ajouter une classe pour styliser différemment l'avatar par défaut si besoin\n    imgElement.classList.add('is-default');\n  }\n\n\n  onImageContentError(event: any) {\n    // On récupère l'élément HTML <img> qui a déclenché l'erreur\n    const imgElement = event.target as HTMLImageElement;\n   imgElement.onerror = null;\n    // On remplace la source par l'image locale\n    imgElement.src = 'assets/splash.png';\n    // Optionnel : ajouter une classe pour styliser différemment l'avatar par défaut si besoin\n    imgElement.classList.add('is-default');\n  }\n  \n  \n\ngoBack() {\n  if (this.location.back) {\n    this.location.back();\n  } else {\n    this.router.navigate(['/home']);\n  }\n}\n\n formatNumber(num: number | undefined | null): string {\n  if (num === undefined || num === null) {\n    return '0';\n  }\n  if (num >= 1000) {\n    return (num / 1000).toFixed(1) + 'K';\n  }\n  return num.toString();\n}\n}",
            "assetsDirs": [],
            "styleUrlsData": [
                {
                    "data": "ion-toolbar {\n  --background: #000000 !important;\n  --color: #ffffff;\n  --border-style: none;\n}\n\nion-header {\n  --background: #000000 !important;\n}\n\nion-content {\n  --background: #0a0a0a !important;\n}\n\n.profile-container {\n  background: linear-gradient(180deg, #0a0a0a 0%, #1a1a1a 100%);\n  min-height: 100%;\n}\n\n// Profile Header\n.profile-header {\n  padding: 20px;\n  background: #0a0a0a;\n}\n\n.avatar-container {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-bottom: 16px;\n  position: relative;\n}\n\n.avatar-wrapper {\n  position: relative;\n  width: 120px;\n  height: 120px;\n}\n\n.avatar {\n  width: 100%;\n  height: 100%;\n  border-radius: 50%;\n  object-fit: cover;\n  position: relative;\n  z-index: 2;\n}\n\n.avatar-border {\n  position: absolute;\n  top: -4px;\n  left: -4px;\n  right: -4px;\n  bottom: -4px;\n  border-radius: 50%;\n  background: linear-gradient(135deg, #ff0844 0%, #5a00ff 100%);\n  z-index: 1;\n}\n\n.add-story-btn {\n  position: absolute;\n  bottom: 0;\n  right: -8px;\n  --padding-start: 0;\n  --padding-end: 0;\n  width: 32px;\n  height: 32px;\n  z-index: 3;\n\n  ion-icon {\n    font-size: 32px;\n    color: #ffcc00;\n  }\n}\n\n// Profile Info\n.profile-info {\n  text-align: center;\n  margin-bottom: 20px;\n}\n\n.name-row {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  margin-bottom: 4px;\n}\n\n.display-name {\n  color: #ffffff;\n  font-size: 24px;\n  font-weight: 700;\n  margin: 0;\n}\n\n.verified-badge {\n  font-size: 20px;\n  color: #1da1f2;\n}\n\n.username {\n  color: #8e8e93;\n  font-size: 14px;\n  margin: 0;\n}\n\n// Stats Row\n.stats-row {\n  display: grid;\n  grid-template-columns: repeat(4, 1fr);\n  gap: 16px;\n  margin-bottom: 20px;\n}\n\n.stat-item {\n  text-align: center;\n}\n\n.stat-value {\n  color: #ffffff;\n  font-size: 18px;\n  font-weight: 700;\n  margin-bottom: 4px;\n}\n\n.stat-label {\n  color: #8e8e93;\n  font-size: 12px;\n}\n\n// Bio Section\n.bio-section {\n  margin-bottom: 20px;\n}\n\n.bio-text {\n  color: #ffffff;\n  font-size: 14px;\n  line-height: 1.5;\n  margin: 0 0 16px 0;\n  text-align: center;\n}\n\n.info-items {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.info-item {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  color: #8e8e93;\n  font-size: 13px;\n}\n\n.info-icon {\n  font-size: 18px;\n  color: #ff9500;\n}\n\n// Action Buttons\n.action-buttons {\n  display: grid;\n  grid-template-columns: 1fr 1fr auto;\n  gap: 12px;\n  margin-bottom: 20px;\n}\n\n.follow-btn,\n.message-btn {\n  --border-radius: 12px;\n  --padding-top: 12px;\n  --padding-bottom: 12px;\n  height: auto;\n  font-weight: 600;\n  text-transform: none;\n}\n\n.external-btn {\n  --padding-start: 12px;\n  --padding-end: 12px;\n  --border-radius: 12px;\n  --background: #1c1c1e;\n  \n  ion-icon {\n    font-size: 20px;\n    color: #ffffff;\n  }\n}\n\n// ======================================\n// CHALLENGES SECTION (Nouveauté)\n// ======================================\n\n.challenges-section {\n  padding: 24px 20px;\n  background: linear-gradient(180deg, #0a0a0a 0%, #1a1a1a 100%);\n  border-bottom: 1px solid #2c2c2e;\n}\n\n.challenges-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n}\n\n.challenges-title {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n\n  h2 {\n    color: #ffffff;\n    font-size: 20px;\n    font-weight: 700;\n    margin: 0;\n  }\n\n  .challenges-icon {\n    font-size: 24px;\n    color: #ffcc00;\n  }\n\n  .challenges-count {\n    font-size: 12px;\n    font-weight: 700;\n    padding: 4px 8px;\n  }\n}\n\n.view-all-btn {\n  --color: #ff9500;\n  font-size: 14px;\n  font-weight: 600;\n}\n\n// Carrousel horizontal des challenges\n.challenges-carousel {\n  display: flex;\n  gap: 16px;\n  overflow-x: auto;\n  overflow-y: hidden;\n  scroll-snap-type: x mandatory;\n  -webkit-overflow-scrolling: touch;\n  padding-bottom: 10px;\n\n  &::-webkit-scrollbar {\n    height: 6px;\n  }\n\n  &::-webkit-scrollbar-track {\n    background: #1c1c1e;\n    border-radius: 10px;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background: #3a3a3c;\n    border-radius: 10px;\n\n    &:hover {\n      background: #48484a;\n    }\n  }\n}\n\n.challenge-card {\n  min-width: 280px;\n  max-width: 280px;\n  scroll-snap-align: start;\n  background: #1c1c1e;\n  border-radius: 16px;\n  overflow: hidden;\n  cursor: pointer;\n  transition: transform 0.3s ease, box-shadow 0.3s ease;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\n\n  &:hover {\n    transform: translateY(-4px);\n    box-shadow: 0 8px 24px rgba(255, 153, 0, 0.2);\n  }\n\n  &:active {\n    transform: scale(0.98);\n  }\n}\n\n.challenge-cover {\n  position: relative;\n  width: 100%;\n  height: 160px;\n  overflow: hidden;\n\n  img {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n    transition: transform 0.3s ease;\n  }\n\n  &:hover img {\n    transform: scale(1.05);\n  }\n}\n\n.challenge-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: linear-gradient(180deg, rgba(0, 0, 0, 0.3) 0%, rgba(0, 0, 0, 0.7) 100%);\n  display: flex;\n  align-items: flex-start;\n  justify-content: flex-end;\n  padding: 12px;\n}\n\n.status-badge {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  padding: 6px 12px;\n  font-size: 11px;\n  font-weight: 700;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  backdrop-filter: blur(10px);\n  border-radius: 20px;\n\n  .badge-icon {\n    font-size: 14px;\n  }\n}\n\n.challenge-content {\n  padding: 16px;\n}\n\n.challenge-name {\n  color: #ffffff;\n  font-size: 16px;\n  font-weight: 700;\n  margin: 0 0 8px 0;\n  line-height: 1.3;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.challenge-description {\n  color: #8e8e93;\n  font-size: 13px;\n  line-height: 1.4;\n  margin: 0 0 12px 0;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.challenge-metrics {\n  display: flex;\n  gap: 16px;\n  margin-bottom: 12px;\n  padding-bottom: 12px;\n  border-bottom: 1px solid #2c2c2e;\n}\n\n.metric-item {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  color: #8e8e93;\n  font-size: 12px;\n\n  ion-icon {\n    font-size: 16px;\n    color: #ff9500;\n  }\n}\n\n.challenge-footer {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.time-remaining {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n\n  .time-icon {\n    font-size: 16px;\n    color: #ffcc00;\n  }\n\n  .time-text {\n    color: #ffcc00;\n    font-size: 12px;\n    font-weight: 600;\n  }\n}\n\n.prize-badge {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  background: linear-gradient(135deg, #ff0844 0%, #5a00ff 100%);\n  padding: 4px 10px;\n  border-radius: 12px;\n  color: #ffffff;\n  font-size: 11px;\n  font-weight: 700;\n\n  ion-icon {\n    font-size: 14px;\n  }\n}\n\n// Section vide pour créateurs sans challenges\n.no-challenges-section {\n  padding: 40px 20px;\n  background: #0a0a0a;\n  border-bottom: 1px solid #2c2c2e;\n}\n\n.empty-challenges {\n  text-align: center;\n  padding: 40px 20px;\n  background: #1c1c1e;\n  border-radius: 16px;\n  border: 2px dashed #2c2c2e;\n\n  .empty-icon {\n    font-size: 64px;\n    color: #3a3a3c;\n    margin-bottom: 16px;\n  }\n\n  h3 {\n    color: #ffffff;\n    font-size: 18px;\n    font-weight: 700;\n    margin: 0 0 8px 0;\n  }\n\n  p {\n    color: #8e8e93;\n    font-size: 14px;\n    margin: 0 0 20px 0;\n    line-height: 1.5;\n  }\n\n  ion-button {\n    --border-radius: 12px;\n    --padding-top: 12px;\n    --padding-bottom: 12px;\n    font-weight: 600;\n    text-transform: none;\n  }\n}\n\n// FAB Button\nion-fab-button {\n  --box-shadow: 0 4px 16px rgba(255, 204, 0, 0.4);\n\n  &:hover {\n    --box-shadow: 0 6px 20px rgba(255, 204, 0, 0.6);\n  }\n}\n\n// Tab Navigation\n.tab-navigation {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  background: #0a0a0a;\n  border-bottom: 1px solid #2c2c2e;\n  position: sticky;\n  top: 0;\n  z-index: 10;\n}\n\n.tab-item {\n  padding: 16px;\n  text-align: center;\n  color: #8e8e93;\n  font-size: 15px;\n  font-weight: 600;\n  cursor: pointer;\n  position: relative;\n  transition: color 0.3s ease;\n\n  &.active {\n    color: #ffffff;\n\n    &::after {\n      content: '';\n      position: absolute;\n      bottom: 0;\n      left: 0;\n      right: 0;\n      height: 2px;\n      background: #ff9500;\n    }\n  }\n\n  &:hover {\n    color: #ffffff;\n  }\n}\n\n// Posts Grid\n// Dans profile.page.scss\n.contents-grid {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 2px;\n  padding: 2px;\n\n  .content-item {\n    position: relative;\n    aspect-ratio: 1;\n    overflow: hidden;\n    cursor: pointer;\n\n    img {\n      width: 100%;\n      height: 100%;\n      object-fit: cover;\n      transition: transform 0.3s ease;\n    }\n\n    &:hover img {\n      transform: scale(1.05);\n    }\n\n    .content-overlay {\n      position: absolute;\n      bottom: 0;\n      left: 0;\n      right: 0;\n      background: linear-gradient(transparent, rgba(0, 0, 0, 0.7));\n      color: white;\n      padding: 8px;\n      display: flex;\n      justify-content: space-around;\n      font-size: 0.9em;\n\n      ion-icon {\n        margin-right: 4px;\n      }\n    }\n  }\n}\n\n.loading-container {\n  display: flex;\n  justify-content: center;\n  padding: 20px;\n  grid-column: 1 / -1;\n}\n\n.no-contents {\n  grid-column: 1 / -1;\n  text-align: center;\n  padding: 40px 20px;\n  color: var(--ion-color-medium);\n}\n\n// Success Content\n.success-content {\n  padding: 40px 20px;\n}\n\n.empty-state {\n  text-align: center;\n  padding: 60px 20px;\n}\n\n.empty-icon {\n  font-size: 80px;\n  color: #3a3a3c;\n  margin-bottom: 16px;\n}\n\n.empty-text {\n  color: #8e8e93;\n  font-size: 16px;\n  margin: 0;\n}\n\n// Info Content\n.info-content {\n  padding: 20px;\n}\n\n.info-card {\n  background: #1c1c1e;\n  border-radius: 16px;\n  padding: 20px;\n  margin-bottom: 16px;\n\n  h3 {\n    color: #ffffff;\n    font-size: 18px;\n    font-weight: 700;\n    margin: 0 0 16px 0;\n  }\n\n  p {\n    color: #8e8e93;\n    font-size: 14px;\n    line-height: 1.6;\n    margin: 0;\n  }\n}\n\n.info-row {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 12px 0;\n  border-bottom: 1px solid #2c2c2e;\n\n  &:last-child {\n    border-bottom: none;\n    padding-bottom: 0;\n  }\n\n  &:first-child {\n    padding-top: 0;\n  }\n}\n\n.info-label {\n  color: #8e8e93;\n  font-size: 14px;\n}\n\n.info-value {\n  color: #ffffff;\n  font-size: 14px;\n  font-weight: 500;\n}\n\n// Responsive\n@media (min-width: 768px) {\n  .content-grid {\n    grid-template-columns: repeat(4, 1fr);\n  }\n\n  .profile-header {\n    max-width: 600px;\n    margin: 0 auto;\n  }\n\n  .challenges-section {\n    max-width: 100%;\n  }\n\n  .challenge-card {\n    min-width: 320px;\n    max-width: 320px;\n  }\n}\n\n@media (min-width: 1024px) {\n  .posts-grid {\n    grid-template-columns: repeat(5, 1fr);\n  }\n\n  .challenge-card {\n    min-width: 360px;\n    max-width: 360px;\n  }\n}",
                    "styleUrl": "./profile.page.scss"
                }
            ],
            "stylesData": "",
            "constructorObj": {
                "name": "constructor",
                "description": "",
                "deprecated": false,
                "deprecationMessage": "",
                "args": [
                    {
                        "name": "cdr",
                        "type": "ChangeDetectorRef",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "route",
                        "type": "ActivatedRoute",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "router",
                        "type": "Router",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "location",
                        "type": "Location",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "profileService",
                        "type": "ProfileService",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "authservice",
                        "type": "Auth",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "creationService",
                        "type": "CreationService",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "alertController",
                        "type": "AlertController",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "toastController",
                        "type": "ToastController",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "actionSheetController",
                        "type": "ActionSheetController",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "modalCtrl",
                        "type": "ModalController",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    }
                ],
                "line": 91,
                "jsdoctags": [
                    {
                        "name": "cdr",
                        "type": "ChangeDetectorRef",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "route",
                        "type": "ActivatedRoute",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "router",
                        "type": "Router",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "location",
                        "type": "Location",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "profileService",
                        "type": "ProfileService",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "authservice",
                        "type": "Auth",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "creationService",
                        "type": "CreationService",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "alertController",
                        "type": "AlertController",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "toastController",
                        "type": "ToastController",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "actionSheetController",
                        "type": "ActionSheetController",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "modalCtrl",
                        "type": "ModalController",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            },
            "extends": [],
            "implements": [
                "OnInit"
            ],
            "templateData": "<ion-header [translucent]=\"true\">\n  <ion-toolbar color=\"dark\">\n    <ion-buttons slot=\"start\">\n      <ion-button (click)=\"goBack()\" class=\"back-circle\">\n        <ion-icon name=\"chevron-back\"></ion-icon>\n      </ion-button>\n    </ion-buttons>\n    <ion-title>{{ userProfile.displayName }}</ion-title>\n    <ion-buttons slot=\"end\">\n      <ion-button (click)=\"presentShareOptions()\">\n        <ion-icon slot=\"icon-only\" name=\"share-social-outline\"></ion-icon>\n      </ion-button>\n      <ion-button (click)=\"presentMoreOptions()\">\n        <ion-icon slot=\"icon-only\" name=\"ellipsis-vertical\"></ion-icon>\n      </ion-button>\n    </ion-buttons>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content [fullscreen]=\"true\" color=\"dark\">\n  <div class=\"profile-container\"    *ngIf=\"userProfile.id; else loading\">\n    <!-- Profile Header -->\n    <div class=\"profile-header\">\n      <div class=\"avatar-container\">\n        <div class=\"avatar-wrapper\">\n          <img [src]=\"getMediaUrl(userProfile.avatar)\" (error)=\"onImageAvatarError($event)\" [alt]=\"userProfile.displayName\" class=\"avatar\">\n          <div class=\"avatar-border\"></div>\n        </div>\n        <ion-button *ngIf=\"isRight_toWrite\"\n          color=\"light\"\n          shape=\"round\"\n          class=\"add-story-btn\"\n          size=\"small\">\n          <ion-icon name=\"star\" size=\"small\" slot=\"icon-only\"></ion-icon>\n        </ion-button>\n      </div>\n\n      <div class=\"profile-info\">\n        <div class=\"name-row\">\n          <h1 class=\"display-name\">{{ userProfile.displayName }}</h1>\n          <ion-icon \n            *ngIf=\"userProfile.isVerified\" \n            name=\"checkmark-circle\" \n            class=\"verified-badge\">\n          </ion-icon>\n        </div>\n        <p class=\"username\">{{ userProfile.username }}</p>\n      </div>\n\n      <!-- Stats -->\n      <div class=\"stats-row\">\n        <div class=\"stat-item\">\n          <div class=\"stat-value\">{{ formatNumber(userProfile.stats.posts) }}</div>\n          <div class=\"stat-label\">Posts</div>\n        </div>\n        <div class=\"stat-item\">\n          <div class=\"stat-value\">{{ formatNumber(userProfile.stats.fans) }}</div>\n          <div class=\"stat-label\">Fans</div>\n        </div>\n        <div class=\"stat-item\">\n          <div class=\"stat-value\">{{ formatNumber(userProfile.stats.votes) }}</div>\n          <div class=\"stat-label\">Votes</div>\n        </div>\n        <div class=\"stat-item\">\n          <div class=\"stat-value\">{{ formatNumber(userProfile.stats.stars) }}</div>\n          <div class=\"stat-label\">Stars</div>\n        </div>\n      </div>\n\n      <!-- Bio Section -->\n      <div class=\"bio-section\">\n        <p class=\"bio-text\">{{ userProfile.bio }}</p>\n        \n        <div class=\"info-items\">\n          <div class=\"info-item\" *ngIf=\"userProfile.school\">\n            <ion-icon name=\"school-outline\" class=\"info-icon\"></ion-icon>\n            <span>{{ userProfile.school }}</span>\n          </div>\n          <div class=\"info-item\" *ngIf=\"userProfile.contact\">\n            <ion-icon name=\"link-outline\" class=\"info-icon\"></ion-icon>\n            <span>{{ userProfile.contact }}</span>\n          </div>\n          <div class=\"info-item\" *ngIf=\"userProfile.memberSince\">\n            <ion-icon name=\"calendar-outline\" class=\"info-icon\"></ion-icon>\n            <span>Membre depuis {{ userProfile.memberSince }}</span>\n          </div>\n        </div>\n      </div>\n\n      <!-- Action Buttons -->\n      <div class=\"action-buttons\">\n        <ion-button \n          *ngIf=\"currentUserId !== userProfile.id\"\n          [color]=\"userProfile.isFollowing ? 'medium' : 'warning'\"\n          expand=\"block\"\n          (click)=\"toggleFollow()\"\n          class=\"follow-btn\"\n          [disabled] = \"isLoading\">\n           <ion-spinner *ngIf=\"isLoading\" name=\"crescent\"></ion-spinner>\n          <span *ngIf=\"!userProfile.isFollowing\">S'abonner</span>\n          <span *ngIf=\"userProfile.isFollowing\">Abonné</span>\n        </ion-button>\n        \n        <ion-button \n          color=\"dark\"\n          expand=\"block\"\n          (click)=\"sendMessage()\"\n          class=\"message-btn\">\n          Message\n        </ion-button>\n\n        <ion-button \n          fill=\"clear\"\n          class=\"external-btn\"\n          size=\"small\">\n          <ion-icon name=\"open-outline\" slot=\"icon-only\"></ion-icon>\n        </ion-button>\n      </div>\n    </div>\n\n    <!-- ======================================= -->\n    <!-- SECTION CHALLENGES (Nouveauté) -->\n    <!-- ======================================= -->\n    <div class=\"challenges-section\" *ngIf=\"userProfile.userType === 'creator' && activeChallengesCount > 0\">\n      <div class=\"challenges-header\">\n        <div class=\"challenges-title\">\n          <ion-icon name=\"trophy-outline\" class=\"challenges-icon\"></ion-icon>\n          <h2>Challenges Actifs</h2>\n          <ion-badge color=\"danger\" class=\"challenges-count\">{{ activeChallengesCount }}</ion-badge>\n        </div>\n        <ion-button \n          fill=\"clear\" \n          size=\"small\"\n          (click)=\"viewAllChallenges()\"\n          class=\"view-all-btn\">\n          Voir tout\n        </ion-button>\n      </div>\n\n      <div class=\"challenges-carousel\">\n        <div class=\"challenge-card\" *ngFor=\"let challenge of activeChallenges$ | async\" (click)=\"openChallenge(challenge)\">\n          <!-- Image de couverture -->\n          <div class=\"challenge-cover\">\n            <img [src]=\"getMediaUrl(challenge.cover_image_url || '')\" (error)=\"onImageContentError($event)\" [alt]=\"challenge.name\">\n            <div class=\"challenge-overlay\">\n              <ion-badge \n                [color]=\"getStatusBadgeColor(getChallengeStatus(challenge))\" \n                class=\"status-badge\">\n                <ion-icon name=\"flame-outline\" class=\"badge-icon\"></ion-icon>\n                {{ getStatusText(getChallengeStatus(challenge)) }}\n              </ion-badge>\n            </div>\n          </div>\n\n          <!-- Contenu de la carte -->\n          <div class=\"challenge-content\">\n            <h3 class=\"challenge-name\">{{ challenge.name }}</h3>\n            <p class=\"challenge-description\">{{ challenge.description }}</p>\n\n            <!-- Métriques -->\n            <div class=\"challenge-metrics\">\n              <div class=\"metric-item\">\n                <ion-icon name=\"people-outline\"></ion-icon>\n                <span>{{ challenge.participants_count }} participants</span>\n              </div>\n              <div class=\"metric-item\">\n                <ion-icon name=\"musical-notes-outline\"></ion-icon>\n                <span>{{ challenge.entries_count }} entrées</span>\n              </div>\n            </div>\n\n            <!-- Footer -->\n            <div class=\"challenge-footer\">\n              <div class=\"time-remaining\">\n                <ion-icon name=\"time-outline\" class=\"time-icon\"></ion-icon>\n                <span class=\"time-text\">{{ getDaysRemaining(challenge) }} jours restants</span>\n              </div>\n              <div class=\"prize-badge\" *ngIf=\"challenge.prize\">\n                <ion-icon name=\"trophy-outline\"></ion-icon>\n                <span>{{ challenge.prize }}</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Message si créateur sans challenges actifs -->\n    <div class=\"no-challenges-section\" *ngIf=\"userProfile.userType === 'creator' && activeChallengesCount <=0 && isOwnProfile\">\n      <div class=\"empty-challenges\">\n        <ion-icon name=\"trophy-outline\" class=\"empty-icon\"></ion-icon>\n        <h3>Aucun challenge actif</h3>\n        <p>Créez votre premier challenge pour engager votre communauté !</p>\n        <ion-button color=\"warning\" (click)=\"createChallenge()\">\n          <ion-icon name=\"add\" slot=\"start\"></ion-icon>\n          Créer un challenge\n        </ion-button>\n      </div>\n    </div>\n\n    <!-- Tab Navigation -->\n    <div class=\"tab-navigation\">\n      <div \n        class=\"tab-item\"\n        [class.active]=\"selectedTab === 'posts'\"\n        (click)=\"selectTab('posts')\">\n        Posts\n      </div>\n      <div \n        class=\"tab-item\"\n        [class.active]=\"selectedTab === 'success'\"\n        (click)=\"selectTab('success')\">\n        Succès\n      </div>\n      <div \n        class=\"tab-item\"\n        [class.active]=\"selectedTab === 'info'\"\n        (click)=\"selectTab('info')\">\n        Info\n      </div>\n    </div>\n\n    <!-- Posts Grid -->\n    <div class=\"contents-grid\" *ngIf=\"selectedTab === 'posts'\">\n    <div *ngIf=\"isLoadingContents\" class=\"loading-container\">\n      <ion-spinner></ion-spinner>\n    </div>\n\n    <div *ngIf=\"!isLoadingContents && userContents.length === 0\" class=\"no-contents\">\n      <p>Aucun contenu partagé pour le moment</p>\n    </div>\n\n    <div *ngFor=\"let content of userContents\" \n         class=\"content-item\"\n         (click)=\"openContent(content)\">\n      <img [src]=\"getMediaUrl(content.fileUrl)\" (error)=\"onImageContentError($event)\"  [alt]=\"content.title\" *ngIf=\"content.fileUrl\">\n      <div class=\"content-overlay\" *ngIf=\"content.likeCount || content.commentCount\">\n        <span *ngIf=\"content.likeCount\">\n          <ion-icon name=\"heart\"></ion-icon> {{ content.likeCount }}\n        </span>\n        <span *ngIf=\"content.commentCount\">\n          <ion-icon name=\"chatbubble\"></ion-icon> {{ content.commentCount }}\n        </span>\n      </div>\n    </div>\n  </div>\n\n    <!-- Success Tab -->\n    <div class=\"success-content\" *ngIf=\"selectedTab === 'success'\">\n      <div class=\"empty-state\">\n        <ion-icon name=\"trophy-outline\" class=\"empty-icon\"></ion-icon>\n        <p class=\"empty-text\">Aucun succès pour le moment</p>\n      </div>\n    </div>\n\n    <!-- Info Tab -->\n    <div class=\"info-content\" *ngIf=\"selectedTab === 'info'\">\n      <div class=\"info-card\">\n        <h3>À propos</h3>\n        <p>{{ userProfile.bio }}</p>\n      </div>\n      \n      <div class=\"info-card\">\n        <h3>Informations</h3>\n        <div class=\"info-row\">\n          <span class=\"info-label\">Institution</span>\n          <span class=\"info-value\">{{ userProfile.school }}</span>\n        </div>\n        <div class=\"info-row\">\n          <span class=\"info-label\">Contact</span>\n          <span class=\"info-value\">{{ userProfile.contact }}</span>\n        </div>\n        <div class=\"info-row\">\n          <span class=\"info-label\">Membre depuis</span>\n          <span class=\"info-value\">{{ userProfile.memberSince }}</span>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <!-- FAB Button pour créer un challenge (visible seulement pour le propriétaire créateur) -->\n  <ion-fab \n    vertical=\"bottom\" \n    horizontal=\"end\" \n    slot=\"fixed\"\n    *ngIf=\"userProfile.userType === 'creator' && isOwnProfile && isRight_toWrite\">\n    <ion-fab-button color=\"warning\" (click)=\"createChallenge()\">\n      <ion-icon name=\"add\"></ion-icon>\n    </ion-fab-button>\n  </ion-fab>\n\n  <ng-template #loading>\n    <ion-spinner></ion-spinner>\n  </ng-template>\n</ion-content>"
        },
        {
            "name": "RankingPage",
            "id": "component-RankingPage-9f39bcaa8c1c04fb512f1ec3eecfdbce95458070d7e93e9ebb3f817179de2ee599eb51d502841ac695ce4a8cc7833d554d3e1c248629c52282f32788bff1ff64",
            "file": "src/app/tab-ranking/ranking.page.ts",
            "encapsulation": [],
            "entryComponents": [],
            "inputs": [],
            "outputs": [],
            "providers": [],
            "selector": "app-ranking",
            "styleUrls": [
                "./ranking.page.scss"
            ],
            "styles": [],
            "templateUrl": [
                "./ranking.page.html"
            ],
            "viewProviders": [],
            "hostDirectives": [],
            "inputsClass": [],
            "outputsClass": [],
            "propertiesClass": [
                {
                    "name": "allArtists",
                    "defaultValue": "[\n    ...this.topArtists,\n    {\n      id: 7,\n      name: 'Emma Lefebvre',\n      category: 'Céramique',\n      votes: 6540,\n      imageUrl: 'https://images.unsplash.com/photo-1611162617474-5b21e879e113?w=100&h=100&fit=crop',\n      isFavorite: true\n    },\n    {\n      id: 8,\n      name: 'Lucas Moreau',\n      category: 'Street Art',\n      votes: 5890,\n      imageUrl: 'https://images.unsplash.com/photo-1460661419201-fd4cecdf8a8b?w=100&h=100&fit=crop',\n      isFavorite: false\n    }\n  ]",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "Artist[]",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 96
                },
                {
                    "name": "selectedTab",
                    "defaultValue": "'votes'",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "\"votes\" | \"dons\"",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 43
                },
                {
                    "name": "topArtists",
                    "defaultValue": "[\n    {\n      id: 1,\n      name: 'Sophie Martin',\n      category: 'Sculpture',\n      votes: 15420,\n      imageUrl: 'https://images.unsplash.com/photo-1547826039-bfc35e0f1ea8?w=300&h=400&fit=crop',\n      rank: 1\n    },\n    {\n      id: 2,\n      name: 'Jean Dubois',\n      category: 'Peinture',\n      votes: 12350,\n      imageUrl: 'https://images.unsplash.com/photo-1460661419201-fd4cecdf8a8b?w=300&h=400&fit=crop',\n      rank: 2\n    },\n    {\n      id: 3,\n      name: 'Marie Leclerc',\n      category: 'Photographie',\n      votes: 10890,\n      imageUrl: 'https://images.unsplash.com/photo-1518717758536-85ae29035b6d?w=300&h=400&fit=crop',\n      rank: 3\n    },\n    {\n      id: 4,\n      name: 'Pierre Laurent',\n      category: 'Design',\n      votes: 9560,\n      imageUrl: 'https://images.unsplash.com/photo-1536924940846-227afb31e2a5?w=300&h=400&fit=crop',\n      rank: 4\n    },\n    {\n      id: 5,\n      name: 'Claire Bonnet',\n      category: 'Illustration',\n      votes: 8720,\n      imageUrl: 'https://images.unsplash.com/photo-1460661419201-fd4cecdf8a8b?w=300&h=400&fit=crop',\n      rank: 5\n    },\n    {\n      id: 6,\n      name: 'Thomas Roux',\n      category: 'Art Numérique',\n      votes: 7890,\n      imageUrl: 'https://images.unsplash.com/photo-1470225620780-dba8ba36b745?w=300&h=400&fit=crop',\n      rank: 6\n    }\n  ]",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "Artist[]",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 45
                }
            ],
            "methodsClass": [
                {
                    "name": "formatVotes",
                    "args": [
                        {
                            "name": "votes",
                            "type": "number",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "string",
                    "typeParameters": [],
                    "line": 124,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "votes",
                            "type": "number",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "ngOnInit",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 118,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "selectTab",
                    "args": [
                        {
                            "name": "tab",
                            "type": "\"votes\" | \"dons\"",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 120,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "tab",
                            "type": "\"votes\" | \"dons\"",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "toggleFavorite",
                    "args": [
                        {
                            "name": "artist",
                            "type": "Artist",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 128,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "artist",
                            "type": "Artist",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                }
            ],
            "deprecated": false,
            "deprecationMessage": "",
            "hostBindings": [],
            "hostListeners": [],
            "standalone": true,
            "imports": [
                {
                    "name": "CommonModule",
                    "type": "module"
                },
                {
                    "name": "FormsModule",
                    "type": "module"
                },
                {
                    "name": "IonHeader"
                },
                {
                    "name": "IonToolbar"
                },
                {
                    "name": "IonContent"
                },
                {
                    "name": "IonButton"
                },
                {
                    "name": "IonIcon"
                },
                {
                    "name": "IonCard"
                },
                {
                    "name": "IonCardContent"
                }
            ],
            "description": "",
            "rawdescription": "\n",
            "type": "component",
            "sourceCode": "import { Component, OnInit } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { addIcons } from 'ionicons';\nimport { starOutline, cash, search } from 'ionicons/icons';\nimport { \n  IonContent, \n  IonHeader, \n  IonToolbar, \n  IonButton,\n  IonIcon,\n  IonCard,\n  IonCardContent\n} from '@ionic/angular/standalone';\n\ninterface Artist {\n  id: number;\n  name: string;\n  category: string;\n  votes: number;\n  imageUrl: string;\n  rank?: number;\n  isFavorite?: boolean;\n}\n\n@Component({\n  selector: 'app-ranking',\n  templateUrl: './ranking.page.html',\n  styleUrls: ['./ranking.page.scss'],\n  standalone: true,\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonHeader,\n    IonToolbar,\n    IonContent,\n    IonButton,\n    IonIcon,\n    IonCard,\n    IonCardContent  ]\n})\nexport class RankingPage implements OnInit {\n  selectedTab: 'votes' | 'dons' = 'votes';\n  \n  topArtists: Artist[] = [\n    {\n      id: 1,\n      name: 'Sophie Martin',\n      category: 'Sculpture',\n      votes: 15420,\n      imageUrl: 'https://images.unsplash.com/photo-1547826039-bfc35e0f1ea8?w=300&h=400&fit=crop',\n      rank: 1\n    },\n    {\n      id: 2,\n      name: 'Jean Dubois',\n      category: 'Peinture',\n      votes: 12350,\n      imageUrl: 'https://images.unsplash.com/photo-1460661419201-fd4cecdf8a8b?w=300&h=400&fit=crop',\n      rank: 2\n    },\n    {\n      id: 3,\n      name: 'Marie Leclerc',\n      category: 'Photographie',\n      votes: 10890,\n      imageUrl: 'https://images.unsplash.com/photo-1518717758536-85ae29035b6d?w=300&h=400&fit=crop',\n      rank: 3\n    },\n    {\n      id: 4,\n      name: 'Pierre Laurent',\n      category: 'Design',\n      votes: 9560,\n      imageUrl: 'https://images.unsplash.com/photo-1536924940846-227afb31e2a5?w=300&h=400&fit=crop',\n      rank: 4\n    },\n    {\n      id: 5,\n      name: 'Claire Bonnet',\n      category: 'Illustration',\n      votes: 8720,\n      imageUrl: 'https://images.unsplash.com/photo-1460661419201-fd4cecdf8a8b?w=300&h=400&fit=crop',\n      rank: 5\n    },\n    {\n      id: 6,\n      name: 'Thomas Roux',\n      category: 'Art Numérique',\n      votes: 7890,\n      imageUrl: 'https://images.unsplash.com/photo-1470225620780-dba8ba36b745?w=300&h=400&fit=crop',\n      rank: 6\n    }\n  ];\n\n  allArtists: Artist[] = [\n    ...this.topArtists,\n    {\n      id: 7,\n      name: 'Emma Lefebvre',\n      category: 'Céramique',\n      votes: 6540,\n      imageUrl: 'https://images.unsplash.com/photo-1611162617474-5b21e879e113?w=100&h=100&fit=crop',\n      isFavorite: true\n    },\n    {\n      id: 8,\n      name: 'Lucas Moreau',\n      category: 'Street Art',\n      votes: 5890,\n      imageUrl: 'https://images.unsplash.com/photo-1460661419201-fd4cecdf8a8b?w=100&h=100&fit=crop',\n      isFavorite: false\n    }\n  ];\n\n  constructor() {addIcons({ starOutline, cash, search });}\n\n  ngOnInit() {}\n\n  selectTab(tab: 'votes' | 'dons') {\n    this.selectedTab = tab;\n  }\n\n  formatVotes(votes: number): string {\n    return votes.toLocaleString('fr-FR');\n  }\n\n  toggleFavorite(artist: Artist) {\n    artist.isFavorite = !artist.isFavorite;\n  }\n}",
            "assetsDirs": [],
            "styleUrlsData": [
                {
                    "data": "/* ==================== */\n/*       HEADER         */\n/* ==================== */\n.header {\n  --background: transparent;\n  --border-style: none;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  z-index: 10;\n  height: 64px;\n  backdrop-filter: blur(10px);\n  background: rgba(10, 10, 10, 0.8);\n\n  &-toolbar {\n    --background: transparent;\n    --border-style: none;\n    --padding-top: env(safe-area-inset-top);\n    --padding-start: 1rem;\n    --padding-end: 1rem;\n    --min-height: 64px;\n  }\n}\n\n.search-container {\n  display: flex;\n  align-items: center;\n  width: 100%;\n  gap: 0.75rem;\n}\n\n.search-wrapper {\n  flex: 1;\n  position: relative;\n}\n\n.search-input {\n  width: 100%;\n  padding: 0.5rem 1rem 0.5rem 2.5rem;\n  background: rgba(255, 255, 255, 0.1);\n  backdrop-filter: blur(10px);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  border-radius: 12px;\n  color: white;\n  font-size: 0.875rem;\n  transition: all 0.2s ease;\n\n  &:focus {\n    outline: none;\n    border-color: rgba(255, 255, 255, 0.4);\n    box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.1);\n  }\n\n  &::placeholder {\n    color: rgba(255, 255, 255, 0.6);\n  }\n}\n\n.search-icon {\n  position: absolute;\n  left: 0.75rem;\n  top: 50%;\n  transform: translateY(-50%);\n  color: white;\n  width: 1.25rem;\n  height: 1.25rem;\n  pointer-events: none;\n}\n\nion-content {\n  --background: #0a0a0a;\n  --padding-top: 0;\n  --offset-top: 0;\n  top: 0;\n}\n\n.ranking-container {\n  padding: 20px;\n  padding-top: 84px; /* Hauteur du header + espacement */\n  background: linear-gradient(180deg, #0a0a0a 0%, #1a1a1a 100%);\n  min-height: 100%;\n  box-sizing: border-box;\n}\n\n// Header Section\n.header-section {\n  margin-bottom: 30px;\n}\n\n.main-title {\n  color: #ffffff;\n  font-size: 28px;\n  font-weight: 700;\n  margin: 0 0 8px 0;\n}\n\n.subtitle {\n  color: #8e8e93;\n  font-size: 14px;\n  margin: 0 0 20px 0;\n}\n\n// Tab Buttons\n.tab-buttons {\n  display: flex;\n  gap: 12px;\n  margin-top: 20px;\n}\n\n.tab-button {\n  --border-radius: 12px;\n  --padding-start: 20px;\n  --padding-end: 20px;\n  height: 44px;\n  font-weight: 600;\n  text-transform: none;\n  \n  ion-icon {\n    font-size: 18px;\n  }\n}\n\n// Section Title\n.section-title {\n  color: #ffffff;\n  font-size: 20px;\n  font-weight: 600;\n  margin: 0 0 16px 0;\n}\n\n// Top Artists Scroll Section\n.top-section {\n  margin-bottom: 32px;\n}\n\n.top-artists-scroll {\n  display: flex;\n  gap: 16px;\n  overflow-x: auto;\n  padding-bottom: 16px;\n  \n  &::-webkit-scrollbar {\n    display: none;\n  }\n  \n  -ms-overflow-style: none;\n  scrollbar-width: none;\n}\n\n.artist-card {\n  min-width: 200px;\n  max-width: 200px;\n  background: linear-gradient(135deg, #1c1c1e 0%, #2c2c2e 100%);\n  border-radius: 16px;\n  overflow: hidden;\n  position: relative;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);\n}\n\n.rank-badge {\n  position: absolute;\n  top: 12px;\n  left: 12px;\n  background: #ff9500;\n  color: #000000;\n  padding: 6px 12px;\n  border-radius: 20px;\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  font-weight: 700;\n  font-size: 14px;\n  z-index: 10;\n  \n  ion-icon {\n    font-size: 16px;\n  }\n}\n\n.artist-image {\n  height: 200px;\n  background-size: cover;\n  background-position: center;\n  background-color: #2c2c2e;\n  position: relative;\n}\n\n.image-overlay {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  height: 50%;\n  background: linear-gradient(to top, rgba(0, 0, 0, 0.8), transparent);\n}\n\n.artist-info {\n  padding: 16px;\n}\n\n.artist-name {\n  color: #ffffff;\n  font-size: 16px;\n  font-weight: 600;\n  margin: 0 0 4px 0;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.artist-category {\n  color: #8e8e93;\n  font-size: 13px;\n  margin: 0 0 8px 0;\n}\n\n.artist-votes {\n  color: #ff9500;\n  font-size: 14px;\n  font-weight: 600;\n  margin: 0;\n}\n\n// All Artists Grid Section\n.all-artists-section {\n  margin-bottom: 24px;\n}\n\n.artists-grid {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 16px;\n}\n\n.artist-grid-card {\n  margin: 0;\n  background: linear-gradient(135deg, #1c1c1e 0%, #2c2c2e 100%);\n  border-radius: 16px;\n  overflow: hidden;\n  position: relative;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);\n}\n\n.rank-corner {\n  position: absolute;\n  top: 8px;\n  left: 8px;\n  background: #ff9500;\n  color: #000000;\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-weight: 700;\n  font-size: 14px;\n  z-index: 10;\n}\n\n.favorite-icon {\n  position: absolute;\n  top: 8px;\n  right: 8px;\n  font-size: 24px;\n  color: #8e8e93;\n  z-index: 10;\n  \n  &.active {\n    color: #ff9500;\n  }\n}\n\n.card-image {\n  height: 140px;\n  background-size: cover;\n  background-position: center;\n  background-color: #2c2c2e;\n}\n\nion-card-content {\n  padding: 12px;\n  \n  h3 {\n    color: #ffffff;\n    font-size: 14px;\n    font-weight: 600;\n    margin: 0 0 4px 0;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n  \n  p {\n    color: #8e8e93;\n    font-size: 12px;\n    margin: 0;\n  }\n}\n\n// Responsive adjustments\n@media (min-width: 768px) {\n  .artists-grid {\n    grid-template-columns: repeat(3, 1fr);\n  }\n}\n\n@media (min-width: 1024px) {\n  .artists-grid {\n    grid-template-columns: repeat(4, 1fr);\n  }\n}",
                    "styleUrl": "./ranking.page.scss"
                }
            ],
            "stylesData": "",
            "constructorObj": {
                "name": "constructor",
                "description": "",
                "deprecated": false,
                "deprecationMessage": "",
                "args": [],
                "line": 114
            },
            "extends": [],
            "implements": [
                "OnInit"
            ],
            "templateData": "<ion-header [translucent]=\"true\" class=\"header\">\n  <ion-toolbar class=\"header-toolbar\">\n    <div class=\"search-container\">\n      <div class=\"search-wrapper\">\n        <ion-icon name=\"search\" class=\"search-icon\"></ion-icon>\n        <input\n          type=\"text\"\n          placeholder=\"Search Artists...\"\n          class=\"search-input\"\n        />\n      </div>\n    </div>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content [fullscreen]=\"true\" color=\"dark\">\n  <div class=\"ranking-container\">\n    <!-- Header Section -->\n    <div class=\"header-section\">\n      <h1 class=\"main-title\">Classement des Artistes</h1>\n      <p class=\"subtitle\">Découvrez les talents qui font vibrer notre communauté</p>\n      \n      <!-- Tab Buttons -->\n      <div class=\"tab-buttons\">\n        <ion-button \n          [fill]=\"selectedTab === 'votes' ? 'solid' : 'outline'\" \n          [color]=\"selectedTab === 'votes' ? 'warning' : 'medium'\"\n          (click)=\"selectTab('votes')\"\n          class=\"tab-button\">\n          <ion-icon name=\"trophy\" slot=\"start\"></ion-icon>\n          Top Votes\n        </ion-button>\n        <ion-button \n          [fill]=\"selectedTab === 'dons' ? 'solid' : 'outline'\" \n          [color]=\"selectedTab === 'dons' ? 'warning' : 'medium'\"\n          (click)=\"selectTab('dons')\"\n          class=\"tab-button\">\n          <ion-icon name=\"cash\" slot=\"start\"></ion-icon>\n          Top Dons\n        </ion-button>\n      </div>\n    </div>\n\n    <!-- Top 6 Section -->\n    <div class=\"top-section\">\n      <h2 class=\"section-title\">Top 6</h2>\n      \n      <div class=\"top-artists-scroll\">\n        <div class=\"artist-card\" *ngFor=\"let artist of topArtists\">\n          <div class=\"rank-badge\">\n            <ion-icon name=\"trophy\"></ion-icon>\n            <span>{{ artist.rank }}</span>\n          </div>\n          <div class=\"artist-image\" [style.background-image]=\"'url(' + artist.imageUrl + ')'\">\n            <div class=\"image-overlay\"></div>\n          </div>\n          <div class=\"artist-info\">\n            <h3 class=\"artist-name\">{{ artist.name }}</h3>\n            <p class=\"artist-category\">{{ artist.category }}</p>\n            <p class=\"artist-votes\">{{ formatVotes(artist.votes) }} votes</p>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- All Artists Section -->\n    <div class=\"all-artists-section\">\n      <h2 class=\"section-title\">Tous les artistes</h2>\n      \n      <div class=\"artists-grid\">\n        <ion-card \n          class=\"artist-grid-card\" \n          *ngFor=\"let artist of allArtists\"\n          button=\"true\">\n          <div class=\"rank-corner\" *ngIf=\"artist.rank\">\n            <span>{{ artist.rank }}</span>\n          </div>\n          <ion-icon \n            [name]=\"artist.isFavorite ? 'star' : 'star-outline'\" \n            class=\"favorite-icon\"\n            [class.active]=\"artist.isFavorite\"\n            (click)=\"toggleFavorite(artist); $event.stopPropagation()\">\n          </ion-icon>\n          <div class=\"card-image\" [style.background-image]=\"'url(' + artist.imageUrl + ')'\"></div>\n          <ion-card-content>\n            <h3>{{ artist.name }}</h3>\n            <p>{{ artist.category }}</p>\n          </ion-card-content>\n        </ion-card>\n      </div>\n    </div>\n  </div>\n</ion-content>"
        },
        {
            "name": "RegisterPage",
            "id": "component-RegisterPage-be1effffb73c7f39b6a23bf7c0ade53e871b861b72df45443f9e53fbd87340d28c1db60ffcff42317d7e34b105f10ed94fbf48ef44caded8252074eae115fdb5",
            "file": "src/app/register/register.page.ts",
            "encapsulation": [],
            "entryComponents": [],
            "inputs": [],
            "outputs": [],
            "providers": [],
            "selector": "app-register",
            "styleUrls": [
                "./register.page.scss"
            ],
            "styles": [],
            "templateUrl": [
                "./register.page.html"
            ],
            "viewProviders": [],
            "hostDirectives": [],
            "inputsClass": [],
            "outputsClass": [],
            "propertiesClass": [
                {
                    "name": "accountTypes",
                    "defaultValue": "[\n    { \n      value: 'artist', \n      label: 'Artiste', \n      icon: 'musical-notes',\n      description: 'Partagez vos performances'\n    },\n    { \n      value: 'fan', \n      label: 'Fan', \n      icon: 'heart',\n      description: 'Suivez vos artistes préférés'\n    },\n    { \n      value: 'creator', \n      label: 'Créateur', \n      icon: 'create',\n      description: 'Créez du contenu exclusif'\n    }\n  ]",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "literal type[]",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 114
                },
                {
                    "name": "currentStep",
                    "defaultValue": "1",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 66
                },
                {
                    "name": "genderOptions",
                    "defaultValue": "[\n    { value: 'male', label: 'Homme', icon: 'male' },\n    { value: 'female', label: 'Femme', icon: 'female' },\n    { value: 'other', label: 'Autre', icon: 'transgender' }\n  ]",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "[]",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 97
                },
                {
                    "name": "html5QrCode",
                    "defaultValue": "null",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "Html5Qrcode | null",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 72
                },
                {
                    "name": "isCameraAvailable",
                    "defaultValue": "true",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 74
                },
                {
                    "name": "isDatePickerOpen",
                    "defaultValue": "false",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 68
                },
                {
                    "name": "isLoading",
                    "defaultValue": "false",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 65
                },
                {
                    "name": "isScanning",
                    "defaultValue": "false",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 73
                },
                {
                    "name": "manualQRInput",
                    "defaultValue": "''",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 75
                },
                {
                    "name": "maxDate",
                    "defaultValue": "new Date().toISOString()",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 69
                },
                {
                    "name": "registrationData",
                    "defaultValue": "{\n  id: 0, // Will be set by the server\n  first_name: '',\n  last_name: '',\n  gender: '',\n  birthDate: new Date(),\n  myPlan: {} as Plan,\n  readonly:false,\n  age: 0,\n  email: '',\n  password: '',\n  password_hash: '', // Will be set before sending to server\n  QR_proof: '',\n  user_type: 'fan', // Default value\n  user_status: 'other', // Default value\n  status: 'active',\n  registration_date: new Date().toISOString()\n}",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "User",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 76
                },
                {
                    "name": "showConfirmPassword",
                    "defaultValue": "false",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 71
                },
                {
                    "name": "showPassword",
                    "defaultValue": "false",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 70
                },
                {
                    "name": "statusOptions",
                    "defaultValue": "[\n    { value: 'university', label: 'Universitaire', icon: 'school', requiresProof: true },\n    { value: 'student', label: 'Élève', icon: 'book', requiresProof: true },\n    { value: 'other', label: 'Autre', icon: 'person', requiresProof: false }\n  ]",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "literal type[]",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 103
                },
                {
                    "name": "studentProofName",
                    "defaultValue": "''",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 95
                },
                {
                    "name": "totalSteps",
                    "defaultValue": "2",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 67
                }
            ],
            "methodsClass": [
                {
                    "name": "clearQRCode",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 370,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "confirmDateSelection",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 202,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "goBack",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 469,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "goToLogin",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 477,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "handleScanSuccess",
                    "args": [
                        {
                            "name": "decodedText",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 342,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        123
                    ],
                    "jsdoctags": [
                        {
                            "name": "decodedText",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "loginWithFacebook",
                    "args": [],
                    "optional": false,
                    "returnType": "any",
                    "typeParameters": [],
                    "line": 397,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        134
                    ]
                },
                {
                    "name": "loginWithGoogle",
                    "args": [],
                    "optional": false,
                    "returnType": "any",
                    "typeParameters": [],
                    "line": 383,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        134
                    ]
                },
                {
                    "name": "needsProof",
                    "args": [],
                    "optional": false,
                    "returnType": "boolean",
                    "typeParameters": [],
                    "line": 376,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "nextStep",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 180,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "ngOnDestroy",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 176,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "ngOnInit",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 175,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "onDateSelected",
                    "args": [
                        {
                            "name": "event",
                            "type": "any",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 196,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "event",
                            "type": "any",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "openDatePicker",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 192,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "PrepareRegister",
                    "args": [],
                    "optional": false,
                    "returnType": "any",
                    "typeParameters": [],
                    "line": 412,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        134
                    ]
                },
                {
                    "name": "previousStep",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 186,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "showAlert",
                    "args": [
                        {
                            "name": "header",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "message",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "any",
                    "typeParameters": [],
                    "line": 462,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        134
                    ],
                    "jsdoctags": [
                        {
                            "name": "header",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "message",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "showManualInput",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 348,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "startScan",
                    "args": [],
                    "optional": false,
                    "returnType": "any",
                    "typeParameters": [],
                    "line": 291,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        134
                    ]
                },
                {
                    "name": "stopScan",
                    "args": [],
                    "optional": false,
                    "returnType": "any",
                    "typeParameters": [],
                    "line": 356,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        134
                    ]
                },
                {
                    "name": "togglePasswordVisibility",
                    "args": [
                        {
                            "name": "field",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 454,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "field",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "validateStep1",
                    "args": [],
                    "optional": false,
                    "returnType": "boolean",
                    "typeParameters": [],
                    "line": 219,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "validateStep2",
                    "args": [],
                    "optional": false,
                    "returnType": "boolean",
                    "typeParameters": [],
                    "line": 255,
                    "deprecated": false,
                    "deprecationMessage": ""
                }
            ],
            "deprecated": false,
            "deprecationMessage": "",
            "hostBindings": [],
            "hostListeners": [],
            "standalone": false,
            "imports": [
                {
                    "name": "IonCardContent"
                },
                {
                    "name": "IonCardTitle"
                },
                {
                    "name": "IonCardHeader"
                },
                {
                    "name": "IonCard"
                },
                {
                    "name": "IonCol"
                },
                {
                    "name": "IonRow"
                },
                {
                    "name": "IonGrid"
                },
                {
                    "name": "IonLoading"
                },
                {
                    "name": "NgIf"
                },
                {
                    "name": "NgFor"
                },
                {
                    "name": "DatePipe",
                    "type": "pipe"
                },
                {
                    "name": "FormsModule",
                    "type": "module"
                },
                {
                    "name": "IonHeader"
                },
                {
                    "name": "IonDatetime"
                },
                {
                    "name": "IonModal"
                },
                {
                    "name": "IonToolbar"
                },
                {
                    "name": "IonIcon"
                },
                {
                    "name": "IonButton"
                },
                {
                    "name": "IonInput"
                },
                {
                    "name": "IonTitle"
                },
                {
                    "name": "IonButtons"
                },
                {
                    "name": "IonContent"
                },
                {
                    "name": "IonItem"
                },
                {
                    "name": "IonLabel"
                }
            ],
            "description": "",
            "rawdescription": "\n",
            "type": "component",
            "sourceCode": "import { Auth } from '../../services/AUTH/auth';\nimport { NgIf, NgFor, DatePipe } from '@angular/common';\nimport { Component, OnInit, NgZone } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Dialog } from '@capacitor/dialog';\nimport { FormsModule } from '@angular/forms';\nimport { addIcons } from 'ionicons';  \nimport * as bcrypt from 'bcryptjs';\nimport { Html5Qrcode } from 'html5-qrcode';\nimport { Platform } from '@ionic/angular';\nimport { \n  arrowBack,\n  cloudUpload,\n  closeCircle,\n  eye,\n  eyeOff,\n  checkmarkCircle,\n  mail,\n  lockClosed,\n  logoGoogle,\n  logoFacebook,\n  personCircle,\n  school,\n  book,\n  person,\n  musicalNotes,\n  male,\n  female,\n  transgender,\n  chevronBack,\n  arrowForward,\n  calendar,\n  mailOutline,\n  lockClosedOutline,\n  qrCodeOutline,\n  heart,\n  create\n} from 'ionicons/icons';\nimport { \n  IonHeader, \n  IonToolbar, \n  IonIcon, \n  IonButton, \n  IonLabel,\n  IonItem,\n  IonDatetime,\n  IonModal,\n  IonInput,\n  IonTitle,\n  IonButtons,\n  IonContent, IonLoading, IonGrid, IonRow, IonCol, IonCard, IonCardHeader, IonCardTitle, IonCardContent } from '@ionic/angular/standalone';\nimport { User } from 'src/models/User';\nimport { UserService } from 'src/services/USER_SERVICE/user-service';\nimport { ProfileService } from 'src/services/PROFILE_SERVICE/profile-service';\nimport { Plan } from 'src/models/Plan';\n\n\n@Component({\n  selector: 'app-register',\n  templateUrl: './register.page.html',\n  styleUrls: ['./register.page.scss'],\n   imports: [IonCardContent, IonCardTitle, IonCardHeader, IonCard, IonCol, IonRow, IonGrid, IonLoading, NgIf,NgFor,DatePipe, FormsModule,IonHeader, IonDatetime, IonModal, IonToolbar, IonIcon, IonButton, IonInput, IonTitle, IonButtons, IonContent, IonItem, IonLabel]\n})\nexport class RegisterPage implements OnInit {\n  isLoading = false;\n  currentStep: number = 1;\n  totalSteps: number = 2;\nisDatePickerOpen = false;\nmaxDate = new Date().toISOString();\n  showPassword: boolean = false;\n  showConfirmPassword: boolean = false;\n  html5QrCode: Html5Qrcode | null = null;\n   isScanning = false;\n  isCameraAvailable = true;\n  manualQRInput = '';\n  registrationData: User = {\n  id: 0, // Will be set by the server\n  first_name: '',\n  last_name: '',\n  gender: '',\n  birthDate: new Date(),\n  myPlan: {} as Plan,\n  readonly:false,\n  age: 0,\n  email: '',\n  password: '',\n  password_hash: '', // Will be set before sending to server\n  QR_proof: '',\n  user_type: 'fan', // Default value\n  user_status: 'other', // Default value\n  status: 'active',\n  registration_date: new Date().toISOString()\n};\n\n  studentProofName: string = '';\n  \n  genderOptions = [\n    { value: 'male', label: 'Homme', icon: 'male' },\n    { value: 'female', label: 'Femme', icon: 'female' },\n    { value: 'other', label: 'Autre', icon: 'transgender' }\n  ];\n\n  statusOptions:{\n  value: 'university' | 'student' | 'other',\n  label: string,\n  icon: string,\n  requiresProof: boolean\n}[] = [\n    { value: 'university', label: 'Universitaire', icon: 'school', requiresProof: true },\n    { value: 'student', label: 'Élève', icon: 'book', requiresProof: true },\n    { value: 'other', label: 'Autre', icon: 'person', requiresProof: false }\n  ];\n\n  accountTypes: { \n  value: 'fan' | 'artist' | 'admin' | 'creator',\n  label: string,\n  icon: string,\n  description: string\n}[] = [\n    { \n      value: 'artist', \n      label: 'Artiste', \n      icon: 'musical-notes',\n      description: 'Partagez vos performances'\n    },\n    { \n      value: 'fan', \n      label: 'Fan', \n      icon: 'heart',\n      description: 'Suivez vos artistes préférés'\n    },\n    { \n      value: 'creator', \n      label: 'Créateur', \n      icon: 'create',\n      description: 'Créez du contenu exclusif'\n    }\n  ];\n\n  constructor(\n    private router: Router,\n    private platform: Platform,\n    private auth: Auth,\n  ) {\n    addIcons({\n    'arrow-back': arrowBack,\n    'cloud-upload': cloudUpload,\n    'close-circle': closeCircle,\n    'eye': eye,\n    'eye-off': eyeOff,\n    'checkmark-circle': checkmarkCircle,\n    'mail': mail,\n    'lock-closed': lockClosed,\n    'logo-google': logoGoogle,\n    'logo-facebook': logoFacebook,\n    'person-circle': personCircle,\n    'school': school,\n    'book': book,\n    'person': person,\n    'musical-notes': musicalNotes,\n    'heart': heart,\n    'male': male,\n    'female': female,\n    'mail-outline': mailOutline,\n    'lock-closed-outline': lockClosedOutline,\n    'qr-code-outline': qrCodeOutline,\n    'transgender': transgender,\n    'chevron-back': chevronBack,\n    'arrow-forward': arrowForward,\n    'calendar': calendar,\n    'create': create\n  });\n  }\n\n  ngOnInit() {}\n  ngOnDestroy() {\n    this.stopScan();\n  }\n  // Navigation entre les étapes\n  nextStep() {\n    if (this.currentStep === 1 && this.validateStep1()) {\n      this.currentStep++;\n    }\n  }\n\n  previousStep() {\n    if (this.currentStep > 1) {\n      this.currentStep--;\n    }\n  }\n// Dans votre RegisterPage\nopenDatePicker() {\n  this.isDatePickerOpen = true;\n}\n\nonDateSelected(event: any) {\n  this.registrationData.birthDate = new Date(event.detail.value);\n  this.isDatePickerOpen = false;\n  this.confirmDateSelection(); // Calcule automatiquement l'âge\n}\n\nconfirmDateSelection() {\n  if (this.registrationData.birthDate) {\n    const birthDate = new Date(this.registrationData.birthDate);\n    const today = new Date();\n    let age = today.getFullYear() - birthDate.getFullYear();\n    const monthDiff = today.getMonth() - birthDate.getMonth();\n    \n    // Vérifie si l'anniversaire de cette année est déjà passé\n    if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {\n      age--;\n    }\n    \n    this.registrationData.age = age;\n  }\n}\n\n  // Validation de l'étape 1\n  validateStep1(): boolean {\n    const { first_name, last_name, gender, age, user_status, QR_proof, user_type } = this.registrationData;\n\n    if (!first_name || !last_name) {\n      this.showAlert('Erreur Nom', 'Veuillez remplir votre nom et prénom');\n      return false;\n    }\n\n    if (!gender) {\n      this.showAlert('Erreur Sexe', 'Veuillez sélectionner votre sexe');\n      return false;\n    }\n\n    if (!age || age < 13 || age > 80) {\n      this.showAlert('Erreur Âge', 'Veuillez entrer un âge valide (13-80 ans)');\n      return false;\n    }\n\n    \n\n    if ((user_status === 'university' || user_status === 'student') && !QR_proof) {\n      this.showAlert('Erreur Justification', 'Veuillez fournir une justification');\n      return false;\n    }\n\n    if (!user_type) {\n      this.showAlert('Erreur Type de compte', 'Veuillez choisir un type de compte');\n      return false;\n    }\n\n    return true;\n  }\n\n\n\n  // Validation de l'étape 2\n  validateStep2(): boolean {\n    const { email, password, confirmPassword } = this.registrationData;\n\n    if (!this.registrationData.user_status) {\n      this.showAlert('Erreur Statut', 'Veuillez sélectionner votre statut');\n      return false;\n    }\n    \n    if (!email) {\n      this.showAlert('Erreur Email', 'Veuillez entrer votre email');\n      return false;\n    }\n\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    if (!emailRegex.test(email)) {\n      this.showAlert('Erreur Email', 'Veuillez entrer un email valide');\n      return false;\n    }\n\n    if (!password) {\n      this.showAlert('Erreur Mot de passe', 'Veuillez entrer un mot de passe');\n      return false;\n    }\n\n    if (password.length < 6) {\n      this.showAlert('Erreur Mot de passe', 'Le mot de passe doit contenir au moins 6 caractères');\n      return false;\n    }\n\n   \n\n    return true;\n  }\n\n  // Gestion proof\n\n async startScan() {\n    // Vérifier si on est sur un appareil mobile ou desktop\n    const isMobile = this.platform.is('mobile') || \n                    this.platform.is('ios') || \n                    this.platform.is('android');\n\n    try {\n      if (this.isScanning) return;\n      \n      // Vérifier la disponibilité de la caméra\n      const devices = await Html5Qrcode.getCameras();\n      if (!devices || devices.length === 0) {\n        this.isCameraAvailable = false;\n        this.showManualInput();\n        return;\n      }\n\n      this.isScanning = true;\n      this.isCameraAvailable = true;\n      document.querySelector('ion-app')?.classList.add('scanner-active');\n      \n      this.html5QrCode = new Html5Qrcode('qr-reader');\n      \n      // Configuration pour mobile ou desktop\n      const config = isMobile \n        ? { facingMode: \"environment\" }  // Caméra arrière sur mobile\n        : { facingMode: \"user\" };        // Caméra avant sur desktop\n\n      await this.html5QrCode.start(\n        config,\n        {\n          fps: 10,\n          qrbox: { width: 250, height: 250 }\n        },\n        (decodedText) => this.handleScanSuccess(decodedText),\n        () => {} // Gestion des erreurs de décodage\n      ).catch(async (err) => {\n        console.error(\"Erreur du scanner:\", err);\n        this.isCameraAvailable = false;\n        await this.stopScan();\n        this.showManualInput();\n      });\n\n    } catch (error) {\n      console.error('Erreur lors du démarrage du scan:', error);\n      this.isCameraAvailable = false;\n      await this.stopScan();\n      this.showManualInput();\n    }\n  }\n\n  private handleScanSuccess(decodedText: string) {\n    this.registrationData.QR_proof = decodedText;\n    this.studentProofName = 'QR Code scanné ✓';\n    this.stopScan();\n  }\n\n   showManualInput() {\n    const input = prompt('Le scan automatique a échoué. Veuillez entrer le code QR manuellement :');\n    if (input) {\n      this.registrationData.QR_proof = input;\n      this.studentProofName = 'Code saisi manuellement';\n    }\n  }\n\n  async stopScan() {\n    try {\n      if (this.html5QrCode && this.html5QrCode.isScanning) {\n        await this.html5QrCode.stop();\n      }\n    } catch (error) {\n      console.error('Erreur lors de l\\'arrêt du scan:', error);\n    } finally {\n      this.html5QrCode = null;\n      this.isScanning = false;\n      document.querySelector('ion-app')?.classList.remove('scanner-active');\n    }\n  }\n\n  clearQRCode() {\n  this.registrationData.QR_proof = '';\n  this.studentProofName = '';\n  this.stopScan();\n}\n\n  needsProof(): boolean {\n  return (this.registrationData.user_status === 'university' || \n          this.registrationData.user_status === 'student') && \n         !this.registrationData.QR_proof;\n}\n\n  // Social Login\n  async loginWithGoogle() {\n   this.isLoading = true;\n\n    // Intégrez votre logique Google Sign-In\n    setTimeout(async () => {\n      this.isLoading = false\n      // Pré-remplir les données depuis Google\n      this.registrationData.email = 'user@gmail.com';\n      this.registrationData.first_name = 'John';\n      this.registrationData.last_name = 'Doe';\n      this.showAlert('Succès', 'Informations Google récupérées!');\n    }, 2000);\n  }\n\n  async loginWithFacebook() {\n    this.isLoading = true;\n\n    // Intégrez votre logique Facebook Login\n    setTimeout(async () => {\n      this.isLoading = false;\n      this.registrationData.email = 'user@facebook.com';\n      this.registrationData.first_name = 'Jane';\n      this.registrationData.last_name = 'Smith';\n      this.showAlert('Succès', 'Informations Facebook récupérées!');\n    }, 2000);\n  }\n\n\n\nasync PrepareRegister() {\n  // 1️⃣ Valider le formulaire\n  if (!this.validateStep1() || !this.validateStep2()) {\n    return;\n  }\n\n  // 2️⃣ Préparer les données d'inscription\n  this.registrationData.registration_date = new Date().toISOString();\n\n  try {\n    // 3️⃣ Hacher le mot de passe\n    const salt = await bcrypt.genSalt(10);\n    const hashedPassword = await bcrypt.hash(this.registrationData.password as string, salt);\n    \n    // 4️⃣ Créer l'objet utilisateur\n    const userData = {\n      ...this.registrationData,\n      password_hash: hashedPassword,\n      password: undefined // Ne pas envoyer le mot de passe en clair\n    };\n\n    // 5️⃣ Nettoyer les données\n    delete (userData as any).id;\n    delete userData.password;\n    \n    this.currentStep = 1;\n\n    // 6️⃣ Rediriger vers la page d'abonnement avec les données\n    await this.router.navigate(['/subscription'], {\n      state: { registrationData: userData }\n    });\n\n  } catch (error) {\n    console.error('Erreur lors de la préparation des données:', error);\n    await Dialog.alert({\n      title: 'Erreur',\n      message: 'Une erreur est survenue lors de la préparation des données d\\'inscription',\n      buttonTitle: 'OK'\n    });\n  }\n}\n\n  togglePasswordVisibility(field: string) {\n    if (field === 'password') {\n      this.showPassword = !this.showPassword;\n    } else {\n      this.showConfirmPassword = !this.showConfirmPassword;\n    }\n  }\n\n  async showAlert(header: string, message: string) {\n    await Dialog.alert({\n    title: header,\n    message\n  }); \n  }\n\n  goBack() {\n    if (this.currentStep > 1) {\n      this.previousStep();\n    } else {\n      this.router.navigate(['/login']);\n    }\n  }\n\n  goToLogin() {\n    this.router.navigate(['/login']);\n  }\n}\n",
            "assetsDirs": [],
            "styleUrlsData": [
                {
                    "data": ".app-loading-backdrop {\n  position: fixed;\n  inset: 0;\n  background: rgba(0, 0, 0, 0.4);\n  z-index: 9999;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.app-loading-box {\n  background: #fff;\n  padding: 24px 32px;\n  border-radius: 12px;\n  text-align: center;\n  min-width: 220px;\n}\n\n\n.custom-header {\n  ion-toolbar {\n    --background: #000055;\n    --color: white;\n    --border-style: none;\n    padding: 10px 5px;\n  }\n  .back-circle {\n    --background: rgba(255,255,255,0.1);\n    --border-radius: 50%;\n    --color: white;\n    width: 40px;\n    height: 40px;\n  }\n}\n\n.register-content {\n  --background: #fdfdfd;\n\n  .register-container {\n    padding: 20px;\n    max-width: 500px;\n    margin: 0 auto;\n  }\n\n  // Progress Dots\n  .progress-container {\n    text-align: center;\n    margin-bottom: 20px;\n    p { font-size: 12px; color: #94a3b8; font-weight: 600; }\n    .dots-stepper {\n      display: flex;\n      justify-content: center;\n      gap: 8px;\n      margin-bottom: 5px;\n      .dot {\n        width: 8px; height: 8px; background: #e2e8f0; border-radius: 50%;\n        transition: 0.3s;\n        &.active { background: #ff7f00; width: 20px; border-radius: 10px; }\n      }\n    }\n  }\n\n  .welcome-msg {\n    margin-bottom: 30px;\n    h1 { font-size: 28px; font-weight: 800; color: #000055; margin-bottom: 5px; }\n    p { color: #64748b; font-size: 16px; margin: 0; }\n  }\n\n  // Form Cards & Inputs\n  .custom-item {\n  --background: #f8fafc;\n  --border-radius: 12px;\n  --border-color: #e2e8f0;\n  --border-width: 1px;\n  --highlight-color-focused: #ff7f00; // Orange au focus\n  margin-bottom: 16px;\n\n  // Force la visibilité du label en haut\n  ion-label {\n    color: #000055 !important;\n    font-weight: 700 !important;\n    margin-bottom: 8px !important;\n    font-size: 14px !important;\n    transform: none !important; // Garde le label fixe en haut\n  }\n\n  // Cible l'input natif à l'intérieur du composant\n  .input-fix {\n    --placeholder-color: #94a3b8; // Gris bleuté visible\n    --placeholder-opacity: 1;\n    --color: #000055; // Couleur du texte saisi\n    font-size: 15px;\n    margin-top: 5px;\n  }\n\n  // Hack pour le placeholder dans le Shadow DOM d'Ionic\n  // Style pour les placeholders\nion-input {\n  --placeholder-color: #94a3b8; // Gris bleuté plus visible\n  --placeholder-opacity: 1; // Assure une opacité complète\n  --padding-start: 8px; // Ajoute un peu d'espace après l'icône\n  color: #000055; // Couleur du texte saisi\n  font-size: 15px;\n  \n  // Style spécifique pour le placeholder\n  &::placeholder {\n    color: var(--placeholder-color);\n    opacity: 1; // Important pour certains navigateurs\n  }\n}\n\n// Pour les icônes dans les champs\n.custom-item {\n  ion-icon {\n    color: #94a3b8; // Couleur des icônes\n    font-size: 20px;\n    margin-right: 8px;\n  }\n  \n  // Style au focus\n  &.item-has-focus {\n    ion-icon {\n      color: #ff7f00; // Couleur orange au focus\n    }\n  }\n}\n\n// Pour le champ mot de passe\n.password-toggle {\n  color: #94a3b8;\n  font-size: 20px;\n  padding: 0 10px;\n  cursor: pointer;\n  \n  &:hover {\n    color: #ff7f00;\n  }\n}\n}\n\n// État quand on clique dans le champ\n.custom-item.item-has-focus {\n  --border-color: #ff7f00;\n  --background: #ffffff;\n}\n\n.custom-datetime-item {\n  --padding-start: 0;\n  --inner-padding-end: 0;\n  --border-radius: 8px;\n  margin-bottom: 16px;\n  overflow: hidden;\n\n  ion-datetime-button {\n    width: 100%;\n    --padding-end: 16px;\n    --padding-start: 16px;\n    \n    &::part(native) {\n      width: 100%;\n      justify-content: space-between;\n      padding: 16px;\n    }\n  }\n\n  ion-label {\n    margin-inline: 16px 0;\n  }\n}\n\n// Style pour le modal du datepicker\nion-modal {\n  --width: 100%;\n  --max-width: 400px;\n  --height: 50%;\n  --border-radius: 16px;\n  \n  ion-datetime {\n    height: 100%;\n    --background: var(--ion-color-light);\n  }\n}\n\nion-modal {\n  --width: 90%;\n  --height: 50%;\n  --border-radius: 16px;\n}\n  .row-inputs {\n    display: flex; gap: 10px;\n    ion-item { flex: 1; }\n  }\n\n  // Styles pour le bouton de sélection de date\n  .custom-datetime-item {\n    --padding-start: 0;\n    --inner-padding-end: 0;\n    margin: 16px 0;\n    border-radius: 8px;\n    overflow: hidden;\n    \n    ion-label {\n      font-size: 14px;\n      color: var(--ion-color-medium);\n      margin-bottom: 8px;\n      font-weight: 500;\n      display: block;\n    }\n    \n    .date-picker-button {\n      --padding-start: 16px;\n      --padding-end: 16px;\n      --padding-top: 12px;\n      --padding-bottom: 12px;\n      --border-radius: 8px;\n      --border-style: solid;\n      --border-width: 1px;\n      --border-color: var(--ion-color-medium);\n      --color: #000000;\n      --color-hover: #000000;\n      --color-focused: #000000;\n      --color-activated: #000000;\n      font-size: 16px;\n      text-transform: none;\n      letter-spacing: 0.5px;\n      height: 48px;\n      margin: 0;\n      width: 100%;\n      justify-content: space-between;\n      color: #000000;\n      \n      &::part(native) {\n        padding: 0 16px;\n        color: #000000;\n      }\n      \n      &:hover {\n        --background: var(--ion-color-light);\n      }\n      \n      &:active {\n        --background: var(--ion-color-light-shade);\n      }\n    }\n  }\n\n  .selection-label {\n    font-size: 14px; font-weight: 700; color: #000055;\n    margin: 20px 0 12px 5px;\n    text-transform: uppercase; letter-spacing: 0.5px;\n  }\n\n  // Grid des Talents (Type Card)\n  .type-grid {\n    display: grid; grid-template-columns: 1fr 1fr; gap: 10px;\n    .type-card {\n      background: white; border: 2px solid #f1f5f9; border-radius: 16px;\n      padding: 15px; text-align: center; transition: 0.3s ease;\n      ion-icon { font-size: 30px; color: #94a3b8; margin-bottom: 8px; }\n      h4 { margin: 0; font-size: 14px; color: #475569; }\n      &.active {\n        border-color: #ff7f00; background: rgba(255,127,0,0.05);\n        ion-icon, h4 { color: #ff7f00; }\n      }\n    }\n  }\n\n  // Grille des genres (Chips)\n  .gender-grid {\n    display: flex; gap: 10px; margin-bottom: 15px;\n    .chip-card {\n      flex: 1; display: flex; align-items: center; justify-content: center; gap: 8px;\n      padding: 12px; background: #f1f5f9; border-radius: 50px;\n      color: #64748b; font-weight: 600; font-size: 13px; transition: 0.2s;\n      &.active { background: #000055; color: white; }\n    }\n  }\n\n  // Bouton Principal\n  .main-btn {\n    --background: #ff7f00;\n    --border-radius: 16px;\n    --box-shadow: 0 10px 20px rgba(255,127,0,0.2);\n    height: 60px; font-weight: 700; font-size: 18px; margin-top: 30px;\n    text-transform: none;\n  }\n\n  //Status\n  .status-grid {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr); // 2 colonnes pour un accès rapide au pouce\n  gap: 10px;\n  margin-bottom: 20px;\n\n  .status-pill {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    gap: 10px;\n    padding: 15px 10px;\n    background: #f1f5f9;\n    border: 2px solid transparent;\n    border-radius: 14px;\n    transition: all 0.2s ease;\n    cursor: pointer;\n\n    ion-icon {\n      font-size: 20px;\n      color: #64748b;\n    }\n\n    span {\n      font-size: 14px;\n      font-weight: 600;\n      color: #475569;\n    }\n\n    &.active {\n      background: rgba(255, 127, 0, 0.1);\n      border-color: #ff7f00;\n      \n      ion-icon, span {\n        color: #ff7f00;\n      }\n    }\n\n    &:active {\n      transform: scale(0.95);\n    }\n  }\n}\n\n// Zone de scann\n.scanner-active {\n  --background: transparent;\n  --ion-background-color: transparent;\n}\n\n.scan-success {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-top: 10px;\n  color: var(--ion-color-success);\n  \n  ion-icon {\n    margin-right: 8px;\n  }\n}\n\n.toggle-pwd {\n  margin-top: 25px; // Aligne l'oeil avec l'input sous le label stacked\n  color: #94a3b8;\n  font-size: 20px;\n}\n\n  // Social Login (Step 2)\n  .social-fast-track {\n    display: flex; flex-direction: column; gap: 10px;\n    .google-pill, .facebook-pill {\n      --border-radius: 50px; height: 50px; text-transform: none; font-weight: 600;\n    }\n    .google-pill { --background: white; --color: #444; border: 1px solid #e2e8f0; }\n    .facebook-pill { --background: #1877f2; }\n  }\n\n  .divider {\n    text-align: center; margin: 30px 0; border-bottom: 1px solid #f1f5f9; height: 10px;\n    span { background: #fdfdfd; padding: 0 15px; font-size: 11px; color: #94a3b8; font-weight: 700; }\n  }\n}\n\n// Variables\n$scanner-z-index: 1000;\n\n// Scanner container\n#qr-reader {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: $scanner-z-index;\n  background: #000;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  \n  video {\n    width: 100% !important;\n    height: 100% !important;\n    object-fit: cover;\n  }\n}\n\n// Scanner overlay\n.scanner-active {\n  --background: transparent;\n  --ion-background-color: transparent;\n  \n  ion-content {\n    --background: transparent;\n    --padding-top: 0;\n    --padding-bottom: 0;\n  }\n  \n  ion-header, \n  ion-toolbar, \n  ion-footer {\n    display: none;\n  }\n}\n\n// Scanner controls\n.scanner-controls {\n  position: fixed;\n  bottom: 20px;\n  left: 0;\n  right: 0;\n  z-index: $scanner-z-index + 1;\n  display: flex;\n  justify-content: center;\n  gap: 16px;\n  padding: 0 16px;\n}\n\n// Manual input\n.manual-input {\n  margin-top: 20px;\n  \n  ion-item {\n    --background: rgba(var(--ion-color-light-rgb), 0.8);\n    border-radius: 8px;\n    margin-bottom: 16px;\n  }\n}\n\n// Responsive adjustments\n@media (min-width: 768px) {\n  #qr-reader {\n    max-width: 600px;\n    max-height: 600px;\n    margin: 0 auto;\n    top: 50%;\n    transform: translateY(-50%);\n    border-radius: 16px;\n    overflow: hidden;\n    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n  }\n}",
                    "styleUrl": "./register.page.scss"
                }
            ],
            "stylesData": "",
            "constructorObj": {
                "name": "constructor",
                "description": "",
                "deprecated": false,
                "deprecationMessage": "",
                "args": [
                    {
                        "name": "router",
                        "type": "Router",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "platform",
                        "type": "Platform",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "auth",
                        "type": "Auth",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    }
                ],
                "line": 138,
                "jsdoctags": [
                    {
                        "name": "router",
                        "type": "Router",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "platform",
                        "type": "Platform",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "auth",
                        "type": "Auth",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            },
            "extends": [],
            "implements": [
                "OnInit"
            ],
            "templateData": "<ion-header class=\"ion-no-border custom-header\">\n  <ion-toolbar>\n    <ion-buttons slot=\"start\">\n      <ion-button (click)=\"goBack()\" class=\"back-circle\">\n        <ion-icon name=\"chevron-back\"></ion-icon>\n      </ion-button>\n    </ion-buttons>\n    <ion-title>Inscription</ion-title>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content class=\"register-content\" [fullscreen]=\"true\">\n  <ion-loading \n  [isOpen]=\"isLoading\" \n  message=\"Chargement en cours...\"\n  spinner=\"circles\">\n</ion-loading>\n\n\n  <div class=\"register-container\">\n    \n    <div class=\"progress-container\">\n      <div class=\"dots-stepper\">\n        <div class=\"dot\" [class.active]=\"currentStep >= 1\"></div>\n        <div class=\"dot\" [class.active]=\"currentStep >= 2\"></div>\n      </div>\n      <p>Étape {{ currentStep }}/{{ totalSteps }}</p>\n    </div>\n\n    <div class=\"step-wrapper\" *ngIf=\"currentStep === 1\">\n      <div class=\"welcome-msg\">\n        <h1>Bienvenue ! 🚀</h1>\n        <p>On commence par les présentations ?</p>\n      </div>\n\n      <div class=\"form-card\">\n        <div class=\"row-inputs\">\n          <ion-item fill=\"outline\" class=\"custom-item\" lines=\"none\">\n  <ion-label position=\"stacked\">Prénom</ion-label>\n  <ion-input \n    [(ngModel)]=\"registrationData.first_name\" \n    placeholder=\"Ex: John\"\n    class=\"input-fix\">\n  </ion-input>\n</ion-item>\n          <ion-item fill=\"outline\" class=\"custom-item\" lines=\"none\">\n  <ion-label position=\"stacked\">Nom</ion-label>\n  <ion-input \n    [(ngModel)]=\"registrationData.last_name\" \n    placeholder=\"Ex: John\"\n    class=\"input-fix\">\n  </ion-input>\n</ion-item>\n        </div>\n\n        <div class=\"selection-label\">Je suis...</div>\n        <div class=\"gender-grid\">\n          <div *ngFor=\"let opt of genderOptions\" \n               [class.active]=\"registrationData.gender === opt.value\"\n               (click)=\"registrationData.gender = opt.value\" class=\"chip-card\">\n            <ion-icon [name]=\"opt.icon\"></ion-icon>\n            <span>{{ opt.label }}</span>\n          </div>\n        </div>\n\n       \n\n<ion-item fill=\"outline\" class=\"custom-item custom-datetime-item\" lines=\"none\">\n  <ion-label position=\"stacked\">Date de naissance *</ion-label>\n  <ion-button expand=\"block\" (click)=\"openDatePicker()\" fill=\"outline\" class=\"date-picker-button\">\n    {{ registrationData.birthDate ? (registrationData.birthDate | date: 'dd/MM/yyyy') : 'Sélectionner une date' }}\n  </ion-button>\n</ion-item>\n\n<!-- Modal de sélection de date -->\n<ion-modal [isOpen]=\"isDatePickerOpen\" (didDismiss)=\"isDatePickerOpen = false\">\n  <ng-template>\n    <ion-datetime\n      [value]=\"registrationData.birthDate\"\n      (ionChange)=\"onDateSelected($event)\"\n      [max]=\"maxDate\"\n      presentation=\"date\"\n      showDefaultButtons=\"true\"\n      doneText=\"Valider\"\n      cancelText=\"Annuler\">\n    </ion-datetime>\n  </ng-template>\n</ion-modal>\n\n        <div class=\"selection-label\">Mon profil talent</div>\n        <div class=\"type-grid\">\n          <div *ngFor=\"let type of accountTypes\" \n               [class.active]=\"registrationData.user_type === type.value\"\n               (click)=\"registrationData.user_type = type.value\" class=\"type-card\">\n            <div class=\"type-content\">\n              <ion-icon [name]=\"type.icon\"></ion-icon>\n              <h4>{{ type.label }}</h4>\n            </div>\n          </div>\n        </div>\n\n        <ion-button expand=\"block\" class=\"main-btn\" (click)=\"nextStep()\">\n          Suivant\n          <ion-icon name=\"arrow-forward\" slot=\"end\"></ion-icon>\n        </ion-button>\n      </div>\n    </div>\n\n    <div class=\"step-wrapper\" *ngIf=\"currentStep === 2\">\n      <div class=\"welcome-msg\">\n        <h1>Dernière étape 🔒</h1>\n        <div class=\"form-card\">\n    <div class=\"selection-label\">Mon Statut *</div>\n    <div class=\"status-grid\">\n      <div \n        *ngFor=\"let option of statusOptions\"\n        class=\"status-pill\"\n        [class.active]=\"registrationData.user_status === option.value\"\n        (click)=\"registrationData.user_status = option.value\"\n      >\n        <ion-icon [name]=\"option.icon\"></ion-icon>\n        <span>{{ option.label }}</span>\n      </div>\n    </div>\n\n<!-- Scanner Container -->\n<div id=\"qr-reader\" *ngIf=\"isScanning && isCameraAvailable && needsProof()\"></div>\n\n<!-- Boutons de contrôle -->\n<ion-grid *ngIf=\"!isScanning && needsProof()\" class=\"ion-margin-vertical\">\n  <ion-row class=\"ion-justify-content-center\">\n    <ion-col size=\"12\" class=\"ion-text-center\">\n      <ion-button \n        expand=\"block\" \n        (click)=\"startScan()\" \n        color=\"primary\"\n        *ngIf=\"isCameraAvailable\">\n        <ion-icon slot=\"start\" name=\"qr-code-outline\"></ion-icon>\n        Scanner un QR Code\n      </ion-button>\n      \n      <ion-button \n        expand=\"block\" \n        (click)=\"showManualInput()\" \n        color=\"medium\"\n        fill=\"outline\"\n        class=\"ion-margin-top\">\n        <ion-icon slot=\"start\" name=\"pencil-outline\"></ion-icon>\n        Saisir manuellement\n      </ion-button>\n    </ion-col>\n  </ion-row>\n</ion-grid>\n\n<!-- Message d'erreur caméra -->\n<div *ngIf=\"!isCameraAvailable && !isScanning && needsProof()\" class=\"ion-padding ion-text-center\">\n  <ion-icon name=\"camera-off\" size=\"large\" color=\"medium\"></ion-icon>\n  <p>La caméra n'est pas disponible sur cet appareil.</p>\n</div>\n\n<!-- Affichage du code scanné -->\n<ion-card *ngIf=\"registrationData.QR_proof\" class=\"ion-margin\">\n  <ion-card-header>\n    <ion-card-title>Code scanné</ion-card-title>\n  </ion-card-header>\n  <ion-card-content>\n    <p class=\"ion-text-wrap\">{{ registrationData.QR_proof }}</p>\n    <ion-button \n      expand=\"block\" \n      color=\"danger\" \n      size=\"small\" \n      (click)=\"clearQRCode()\">\n      <ion-icon slot=\"start\" name=\"trash-outline\"></ion-icon>\n      Effacer\n    </ion-button>\n  </ion-card-content>\n</ion-card>\n    </div>\n        <p>Comment souhaites-tu te connecter ?</p>\n      </div>\n\n      <div class=\"social-fast-track\">\n        <ion-button class=\"google-pill\" (click)=\"loginWithGoogle()\">\n          <ion-icon name=\"logo-google\" slot=\"start\"></ion-icon> Google\n        </ion-button>\n        <ion-button  class=\"facebook-pill\" (click)=\"loginWithFacebook()\">\n          <ion-icon name=\"logo-facebook\" slot=\"start\"></ion-icon> Facebook\n        </ion-button>\n      </div>\n\n      <div class=\"divider\"><span>OU PAR EMAIL</span></div>\n\n      <div class=\"form-card\">\n        <ion-item fill=\"outline\" class=\"custom-item\" lines=\"none\" slot=\"none\">\n          <ion-icon name=\"mail-outline\" slot=\"start\"></ion-icon>\n          <ion-input type=\"email\"  placeholder=\"Email\" [(ngModel)]=\"registrationData.email\"></ion-input>\n        </ion-item>\n\n        <ion-item fill=\"outline\" class=\"custom-item\" lines=\"none\" slot=\"none\">\n          <ion-icon name=\"lock-closed-outline\" slot=\"start\"></ion-icon>\n          <ion-input [type]=\"showPassword ? 'text' : 'password'\" [(ngModel)]=\"registrationData.password\" placeholder=\"Mot de passe\"></ion-input>\n          <ion-icon [name]=\"showPassword ? 'eye-off' : 'eye'\" slot=\"end\" (click)=\"showPassword = !showPassword\"></ion-icon>\n        </ion-item>\n\n        <ion-button expand=\"block\" class=\"main-btn finish\" (click)=\"PrepareRegister()\">\n          C'est parti !\n        </ion-button>\n      </div>\n    </div>\n  </div>\n</ion-content>"
        },
        {
            "name": "SecureImageComponent",
            "id": "component-SecureImageComponent-cf7591c84010656e9e91f601cf6e37516fe47a9b32de349217bbd4fcbbafb05bcaa4c5de26397b4ddf07adb193ee3c345927ad3653727d2aa26e8512a346b437",
            "file": "src/app/components/secure-image/secure-image.component.ts",
            "encapsulation": [],
            "entryComponents": [],
            "inputs": [],
            "outputs": [],
            "providers": [],
            "selector": "app-secure-image",
            "styleUrls": [],
            "styles": [
                "\n    .image-container {\n      position: relative;\n      width: 100%;\n      height: 100%;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    }\n    img {\n      width: 100%;\n      height: 100%;\n      object-fit: cover;\n      opacity: 0;\n      transition: opacity 0.3s ease;\n    }\n    img.loaded {\n      opacity: 1;\n    }\n    .image-error {\n      width: 100%;\n      height: 100%;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      background: #f5f5f5;\n      color: #ccc;\n    }\n  "
            ],
            "template": "<div class=\"image-container\">\n  <img\n    *ngIf=\"imageUrl\"\n    [src]=\"imageUrl\"\n    [alt]=\"alt\"\n    [class]=\"imageClass\"\n    (load)=\"onImageLoad()\"\n    (error)=\"onImageError()\"\n  />\n  <ion-skeleton-text\n    *ngIf=\"!imageLoaded && !imageError\"\n    [class]=\"skeletonClass\"\n    animated>\n  </ion-skeleton-text>\n  <div *ngIf=\"imageError\" class=\"image-error\">\n    <ion-icon name=\"image-outline\"></ion-icon>\n  </div>\n</div>\n",
            "templateUrl": [],
            "viewProviders": [],
            "hostDirectives": [],
            "inputsClass": [
                {
                    "name": "alt",
                    "defaultValue": "'Image'",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "line": 64,
                    "type": "string",
                    "decorators": []
                },
                {
                    "name": "imageClass",
                    "defaultValue": "''",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "line": 65,
                    "type": "string",
                    "decorators": []
                },
                {
                    "name": "imagePath",
                    "defaultValue": "''",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "line": 63,
                    "type": "string",
                    "decorators": []
                },
                {
                    "name": "skeletonClass",
                    "defaultValue": "''",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "line": 66,
                    "type": "string",
                    "decorators": []
                }
            ],
            "outputsClass": [],
            "propertiesClass": [
                {
                    "name": "imageError",
                    "defaultValue": "false",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 70
                },
                {
                    "name": "imageLoaded",
                    "defaultValue": "false",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 69
                },
                {
                    "name": "imageSubscription",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "Subscription",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 71,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "imageUrl",
                    "defaultValue": "null",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string | null",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 68
                }
            ],
            "methodsClass": [
                {
                    "name": "loadImage",
                    "args": [
                        {
                            "name": "path",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 81,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        123
                    ],
                    "jsdoctags": [
                        {
                            "name": "path",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "ngOnChanges",
                    "args": [
                        {
                            "name": "changes",
                            "type": "SimpleChanges",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 75,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "changes",
                            "type": "SimpleChanges",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "ngOnDestroy",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 119,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "onImageError",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 100,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "onImageLoad",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 95,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "resetState",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 109,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        123
                    ]
                }
            ],
            "deprecated": false,
            "deprecationMessage": "",
            "hostBindings": [],
            "hostListeners": [],
            "standalone": true,
            "imports": [
                {
                    "name": "CommonModule",
                    "type": "module"
                },
                {
                    "name": "IonicModule",
                    "type": "module"
                }
            ],
            "description": "",
            "rawdescription": "\n",
            "type": "component",
            "sourceCode": "import { Component, Input, OnChanges, OnDestroy, SimpleChanges } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { IonicModule } from '@ionic/angular';\nimport { MediaService } from 'src/services/MEDIA/media';\nimport { Subscription } from 'rxjs';\n\n@Component({\n  selector: 'app-secure-image',\n  standalone: true,\n  imports: [CommonModule, IonicModule],\n  template: `\n    <div class=\"image-container\">\n      <img \n        *ngIf=\"imageUrl\" \n        [src]=\"imageUrl\" \n        [alt]=\"alt\"\n        [class]=\"imageClass\"\n        (load)=\"onImageLoad()\"\n        (error)=\"onImageError()\"\n      />\n      <ion-skeleton-text \n        *ngIf=\"!imageLoaded && !imageError\" \n        [class]=\"skeletonClass\" \n        animated>\n      </ion-skeleton-text>\n      <div *ngIf=\"imageError\" class=\"image-error\">\n        <ion-icon name=\"image-outline\"></ion-icon>\n      </div>\n    </div>\n  `,\n  styles: [`\n    .image-container {\n      position: relative;\n      width: 100%;\n      height: 100%;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    }\n    img {\n      width: 100%;\n      height: 100%;\n      object-fit: cover;\n      opacity: 0;\n      transition: opacity 0.3s ease;\n    }\n    img.loaded {\n      opacity: 1;\n    }\n    .image-error {\n      width: 100%;\n      height: 100%;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      background: #f5f5f5;\n      color: #ccc;\n    }\n  `]\n})\nexport class SecureImageComponent implements OnChanges, OnDestroy {\n  @Input() imagePath: string = '';\n  @Input() alt: string = 'Image';\n  @Input() imageClass: string = '';\n  @Input() skeletonClass: string = '';\n\n  imageUrl: string | null = null;\n  imageLoaded = false;\n  imageError = false;\n  private imageSubscription?: Subscription;\n\n  constructor(private mediaService: MediaService) {}\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes['imagePath'] && this.imagePath) {\n      this.loadImage(this.imagePath);\n    }\n  }\n\n  private loadImage(path: string): void {\n    this.resetState();\n    \n    this.imageSubscription = this.mediaService.getImageURL(path).subscribe({\n      next: (url: string) => {\n        this.imageUrl = url;\n      },\n      error: (error: any) => {\n        console.error('Error loading image:', error);\n        this.imageError = true;\n      }\n    });\n  }\n\n  onImageLoad(): void {\n    this.imageLoaded = true;\n    this.imageError = false;\n  }\n\n  onImageError(): void {\n    this.imageError = true;\n    this.imageLoaded = false;\n    if (this.imageUrl) {\n      this.mediaService.revokeImageURL(this.imageUrl);\n      this.imageUrl = null;\n    }\n  }\n\n  private resetState(): void {\n    this.imageLoaded = false;\n    this.imageError = false;\n    this.imageUrl = null;\n    \n    if (this.imageSubscription) {\n      this.imageSubscription.unsubscribe();\n    }\n  }\n\n  ngOnDestroy(): void {\n    if (this.imageSubscription) {\n      this.imageSubscription.unsubscribe();\n    }\n    \n    if (this.imageUrl) {\n      this.mediaService.revokeImageURL(this.imageUrl);\n    }\n  }\n}",
            "assetsDirs": [],
            "styleUrlsData": "",
            "stylesData": "\n    .image-container {\n      position: relative;\n      width: 100%;\n      height: 100%;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    }\n    img {\n      width: 100%;\n      height: 100%;\n      object-fit: cover;\n      opacity: 0;\n      transition: opacity 0.3s ease;\n    }\n    img.loaded {\n      opacity: 1;\n    }\n    .image-error {\n      width: 100%;\n      height: 100%;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      background: #f5f5f5;\n      color: #ccc;\n    }\n  \n",
            "constructorObj": {
                "name": "constructor",
                "description": "",
                "deprecated": false,
                "deprecationMessage": "",
                "args": [
                    {
                        "name": "mediaService",
                        "type": "MediaService",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    }
                ],
                "line": 71,
                "jsdoctags": [
                    {
                        "name": "mediaService",
                        "type": "MediaService",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            },
            "extends": [],
            "implements": [
                "OnChanges",
                "OnDestroy"
            ]
        },
        {
            "name": "SettingsPage",
            "id": "component-SettingsPage-927e3ed6dda283d3feae5cab741b31cce713804d20fdbbda57b5ba55adc3f4c107f1d31ce7cb14e85b263b6d186349678485d1d797dcd1496c11ffa949eb09d6",
            "file": "src/app/settings/settings.page.ts",
            "encapsulation": [],
            "entryComponents": [],
            "inputs": [],
            "outputs": [],
            "providers": [],
            "selector": "app-settings",
            "styleUrls": [
                "./settings.page.scss"
            ],
            "styles": [],
            "templateUrl": [
                "./settings.page.html"
            ],
            "viewProviders": [],
            "hostDirectives": [],
            "inputsClass": [],
            "outputsClass": [],
            "propertiesClass": [],
            "methodsClass": [
                {
                    "name": "ngOnInit",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 27,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "onLogout",
                    "args": [],
                    "optional": false,
                    "returnType": "any",
                    "typeParameters": [],
                    "line": 30,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        134
                    ]
                }
            ],
            "deprecated": false,
            "deprecationMessage": "",
            "hostBindings": [],
            "hostListeners": [],
            "standalone": true,
            "imports": [
                {
                    "name": "IonIcon"
                },
                {
                    "name": "IonBackButton"
                },
                {
                    "name": "IonButtons"
                },
                {
                    "name": "IonButton"
                },
                {
                    "name": "IonContent"
                },
                {
                    "name": "IonHeader"
                },
                {
                    "name": "IonTitle"
                },
                {
                    "name": "IonToolbar"
                },
                {
                    "name": "CommonModule",
                    "type": "module"
                },
                {
                    "name": "FormsModule",
                    "type": "module"
                }
            ],
            "description": "",
            "rawdescription": "\n",
            "type": "component",
            "sourceCode": "import { Component, OnInit } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { IonContent, IonHeader, IonTitle, IonToolbar, IonButton, IonButtons, IonBackButton, IonIcon } from '@ionic/angular/standalone';\nimport { Auth } from 'src/services/AUTH/auth';\nimport { Router } from '@angular/router';\nimport { addIcons } from 'ionicons';\nimport { logOutOutline } from 'ionicons/icons';\n\n\n@Component({\n  selector: 'app-settings',\n  templateUrl: './settings.page.html',\n  styleUrls: ['./settings.page.scss'],\n  standalone: true,\n  imports: [IonIcon, IonBackButton, IonButtons, IonButton, IonContent, IonHeader, IonTitle, IonToolbar, CommonModule, FormsModule]\n})\nexport class SettingsPage implements OnInit {\n\n   constructor(\n    private auth: Auth,\n    private router: Router\n  ) {\n    addIcons({ logOutOutline });\n  }\n\n  ngOnInit() {\n  }\n\n  async onLogout() {\n    try {\n      await this.auth.logout();\n      this.router.navigate(['/login'], { replaceUrl: true });\n    } catch (error) {\n      console.error('Erreur lors de la déconnexion :', error);\n    }\n  }\n}\n",
            "assetsDirs": [],
            "styleUrlsData": [
                {
                    "data": ".settings-container {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  padding: 20px;\n}\n\n.logout-button {\n  margin-top: 20px;\n  --border-radius: 8px;\n  --padding-top: 20px;\n  --padding-bottom: 20px;\n  font-weight: 600;\n}\n\nion-content {\n  --background: var(--ion-color-light);\n}",
                    "styleUrl": "./settings.page.scss"
                }
            ],
            "stylesData": "",
            "constructorObj": {
                "name": "constructor",
                "description": "",
                "deprecated": false,
                "deprecationMessage": "",
                "args": [
                    {
                        "name": "auth",
                        "type": "Auth",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "router",
                        "type": "Router",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    }
                ],
                "line": 18,
                "jsdoctags": [
                    {
                        "name": "auth",
                        "type": "Auth",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "router",
                        "type": "Router",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            },
            "extends": [],
            "implements": [
                "OnInit"
            ],
            "templateData": "<ion-header [translucent]=\"true\">\n  <ion-toolbar>\n    <ion-buttons slot=\"start\">\n      <ion-back-button defaultHref=\"/tabs/tab-profile\"></ion-back-button>\n    </ion-buttons>\n    <ion-title>Paramètres</ion-title>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content [fullscreen]=\"true\" class=\"ion-padding\">\n  <div class=\"settings-container\">\n    <ion-button \n      expand=\"block\" \n      color=\"danger\" \n      (click)=\"onLogout()\"\n      class=\"logout-button\">\n      <ion-icon name=\"log-out-outline\" slot=\"start\"></ion-icon>\n      Se déconnecter\n    </ion-button>\n  </div>\n</ion-content>"
        },
        {
            "name": "SubscriptionPage",
            "id": "component-SubscriptionPage-c32228a5e2e863e9a768ee08b0cc9696daf5d87d737f6ddafac292321e2d885598a141a5a5e255481651cbb9e4c6a4ad4e320f19581ec52ca0750f36ac9b9ed1",
            "file": "src/app/subscription/subscription.page.ts",
            "encapsulation": [],
            "entryComponents": [],
            "inputs": [],
            "outputs": [],
            "providers": [],
            "selector": "app-subscription",
            "styleUrls": [
                "./subscription.page.scss"
            ],
            "styles": [],
            "templateUrl": [
                "./subscription.page.html"
            ],
            "viewProviders": [],
            "hostDirectives": [],
            "inputsClass": [],
            "outputsClass": [],
            "propertiesClass": [
                {
                    "name": "currentUser",
                    "defaultValue": "null",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "User | null",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 61
                },
                {
                    "name": "error",
                    "defaultValue": "null",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string | null",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 63
                },
                {
                    "name": "isLoading",
                    "defaultValue": "false",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 62
                },
                {
                    "name": "plans",
                    "defaultValue": "[]",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "Plan[]",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 59
                },
                {
                    "name": "registrationData",
                    "defaultValue": "null",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "User | null",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 64
                },
                {
                    "name": "selectedPlan",
                    "defaultValue": "null",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string | null",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 58
                },
                {
                    "name": "selectedPlanId",
                    "defaultValue": "null",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string | null",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 60
                }
            ],
            "methodsClass": [
                {
                    "name": "generateUniqueUsername",
                    "args": [
                        {
                            "name": "firstName",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "lastName",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Promise<string>",
                    "typeParameters": [],
                    "line": 266,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        123,
                        134
                    ],
                    "jsdoctags": [
                        {
                            "name": "firstName",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "lastName",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "goBack",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 115,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "loadPlans",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 92,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "ngOnInit",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 90,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "selectPlan",
                    "args": [
                        {
                            "name": "planId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 111,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "planId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "subscribe",
                    "args": [],
                    "optional": false,
                    "returnType": "any",
                    "typeParameters": [],
                    "line": 119,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        134
                    ]
                }
            ],
            "deprecated": false,
            "deprecationMessage": "",
            "hostBindings": [],
            "hostListeners": [],
            "standalone": true,
            "imports": [
                {
                    "name": "IonLoading"
                },
                {
                    "name": "CommonModule",
                    "type": "module"
                },
                {
                    "name": "FormsModule",
                    "type": "module"
                },
                {
                    "name": "IonContent"
                },
                {
                    "name": "IonHeader"
                },
                {
                    "name": "IonTitle"
                },
                {
                    "name": "IonToolbar"
                },
                {
                    "name": "IonButtons"
                },
                {
                    "name": "IonButton"
                },
                {
                    "name": "IonIcon"
                }
            ],
            "description": "",
            "rawdescription": "\n",
            "type": "component",
            "sourceCode": "import { Component, OnInit } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { AlertController } from '@ionic/angular';\nimport { Router } from '@angular/router';\nimport { UserProfile } from 'src/models/User';\nimport { Dialog } from '@capacitor/dialog';\nimport { Plan } from '../../models/Plan';\nimport { ProfileService } from 'src/services/PROFILE_SERVICE/profile-service';\nimport { \n  IonContent,\n  IonHeader,\n  IonTitle,\n  IonToolbar,\n  IonButtons,\n  IonButton,\n  IonIcon, IonSpinner, IonLoading } from '@ionic/angular/standalone';\nimport { addIcons } from 'ionicons';\nimport { \n  arrowBack,\n  sparkles,\n  flame,\n  starOutline,\n  trophyOutline,\n  diamondOutline,\n  checkmarkCircle,\n  rocket,\n  calendar,\n  trophy,\n  eyeOutline,\n} from 'ionicons/icons';\nimport { SubscriptionService } from 'src/services/SUBSCRIPTION/subscription-service';\nimport { User } from 'src/models/User';\nimport { UserService } from 'src/services/USER_SERVICE/user-service';\nimport { firstValueFrom, tap } from 'rxjs';\n\n\n\n@Component({\n  selector: 'app-subscription',\n  templateUrl: './subscription.page.html',\n  styleUrls: ['./subscription.page.scss'],\n  standalone: true,\n  imports: [IonLoading, \n    CommonModule,\n    FormsModule,\n    IonContent,\n    IonHeader,\n    IonTitle,\n    IonToolbar,\n    IonButtons,\n    IonButton,\n    IonIcon\n  ]\n})\nexport class SubscriptionPage implements OnInit {\n\n  selectedPlan: string | null = null;\n  plans: Plan[] = [];\n  selectedPlanId: string | null = null;\n  currentUser: User | null = null;\n  isLoading = false;\n  error: string | null = null\n  registrationData: User | null = null;\n  constructor( private router: Router, private subscriptionService: SubscriptionService, \n              private userService: UserService, private profileService: ProfileService) {\n     addIcons({\n    'arrow-back': arrowBack,\n    'sparkles': sparkles,\n    'flame': flame,\n    'checkmark-circle': checkmarkCircle,\n    'rocket': rocket,\n    'calendar': calendar,  // Ajouté\n    'trophy': trophy,       // Ajouté\n    'eye-outline': eyeOutline,\n    'diamond-outline': diamondOutline,\n    'star-outline': starOutline,\n    'trophy-outline': trophyOutline,\n  });\n  if(this.router.getCurrentNavigation()?.extras.state?.['registrationData']) {\n    this.registrationData = this.router.getCurrentNavigation()?.extras.state?.['registrationData'] as User;\n  }\n   if (!this.registrationData) {\n      console.error('Aucune donnée d\\'inscription trouvée');\n      this.router.navigate(['/register']);\n      return;\n    }\n  }\n\n  ngOnInit() {this.loadPlans();}\n\n  private loadPlans() {\n    this.isLoading = true;\n    this.error = null;\n    \n    this.subscriptionService.getAvailablePlans().subscribe({\n      next: (plans) => {\n    \n        this.plans = plans;\n        this.isLoading = false;\n      },\n      error: (err) => {\n        console.error('Erreur lors du chargement des plans', err);\n        this.error = 'Impossible de charger les plans. Veuillez réessayer plus tard.';\n        this.isLoading = false;\n      }\n    });\n  }\n\n   \n  selectPlan(planId: string) {\n    this.selectedPlan = planId;\n  }\n\n  goBack() {\n    this.router.navigate(['/register']);\n  }\n\nasync subscribe() {\n  // 1️⃣ Vérifier si un plan est sélectionné\n  if (!this.selectedPlan) {\n    await Dialog.alert({\n      title: 'Information',\n      message: 'Veuillez sélectionner un plan pour continuer',\n      buttonTitle: 'OK'\n    });\n    return;\n  }\n\n  // 2️⃣ Mettre à jour les données avec le plan sélectionné\n  if (this.registrationData) {\n    const selectedPlan = this.plans.find(plan => plan.id === this.selectedPlan);\n    if (!selectedPlan) {\n      await Dialog.alert({\n        title: 'Erreur',\n        message: 'Le plan sélectionné est invalide',\n        buttonTitle: 'OK'\n      });\n      return;\n    }\n\n   // Calculer les dates de début et de fin\nconst startDate = new Date();\nconst endDate = new Date();\n\n// Vérifier si le plan est gratuit\nif (selectedPlan.price === 0) {\n  // Pour le plan gratuit, définir une durée par défaut de 30 jours\n  endDate.setDate(startDate.getDate() + 30);\n} else {\n  // Pour les plans payants, utiliser la durée spécifiée (1 mois par défaut)\n  endDate.setMonth(startDate.getMonth() + 1);\n}\n\n// Mettre à jour myPlan avec la nouvelle structure\nthis.registrationData.myPlan = {\n  id: selectedPlan.id,\n  name: selectedPlan.name,\n  price: selectedPlan.price,\n  period: selectedPlan.period,      \n  duration: selectedPlan.price === 0 ? 30 : 30, // 30 jours pour tous les plans\n  startDate: startDate.toISOString(),\n  endDate: endDate.toISOString(),\n  status:  'active',\n  features: selectedPlan.features\n};\n    \n\n    try {\n      // 3️⃣ Créer l'utilisateur\n      const userCreated = await firstValueFrom(\n        this.userService.createUser(this.registrationData).pipe(\n          tap({\n            next: (response) => console.log('Utilisateur créé :', response),\n            error: (error) => {\n              console.error('Erreur création utilisateur :', error);\n              throw error;\n            }\n          })\n        )\n      );\n\n      if (!userCreated?.id) {\n        throw new Error('La création du compte a échoué. Aucun ID utilisateur reçu.');\n      }\n\n      // 4️⃣ Créer le profil utilisateur\n      const userProfile: UserProfile = {\n        id: userCreated.id.toString(),\n        myFollows: [],\n        username: await this.generateUniqueUsername(\n    this.registrationData.first_name || 'user',\n    this.registrationData.last_name || userCreated.id.toString().substring(0, 8)\n  ),\n        displayName: `${this.registrationData.first_name} ${this.registrationData.last_name}`,\n        avatar: 'storage/uploads/avatar-default.png',\n        isVerified: false,\n        isFollowing: false,\n        bio: '',\n        school: this.registrationData.user_status === 'university' ? 'Nom de l\\'université' : \n               this.registrationData.user_status === 'student' ? 'Nom de l\\'école' : '',\n        contact: this.registrationData.email,\n        memberSince: new Date().toISOString().split('T')[0],\n        userType: this.registrationData.user_type || 'fan',\n        stats: {\n          posts: 0,\n          fans: 0,\n          votes: 0,\n          stars: 0\n        }\n      };\n\n      // 5️⃣ Enregistrer le profil\n      await firstValueFrom(\n        this.profileService.createProfile(userProfile).pipe(\n          tap({\n            next: (response) => console.log('Profil créé :', response),\n            error: (error) => {\n              console.error('Erreur création profil :', error);\n              throw error;\n            }\n          })\n        )\n      );\n\n      // 6️⃣ Afficher un message de succès\n      await Dialog.alert({\n        title: 'Succès',\n        message: 'Votre compte a été créé avec succès ! Vous pouvez maintenant vous connecter.',\n        buttonTitle: 'Se connecter'\n      });\n          \n          this.registrationData.id = userCreated.id;\n          this.registrationData.password_hash = \"\";\n          this.registrationData.QR_proof = \"\";\n          this.registrationData.status = \"pending\";\n          this.registrationData.first_name = \"\";\n          this.registrationData.last_name = \"\";\n          this.registrationData.gender = \"\";\n          this.registrationData.birthDate = new Date();\n          this.registrationData.age = 0;\n          this.registrationData.email = \"\";\n          this.registrationData.password = \"\";\n          this.registrationData.user_type = \"fan\";\n          this.registrationData.user_status = \"other\";\n          this.registrationData.registration_date = \"\";\n      // 7️⃣ Rediriger vers la page de connexion\n      await this.router.navigate(['/login']);\n\n    } catch (error) {\n      console.error('Erreur lors de l\\'inscription :', error);\n      await Dialog.alert({\n        title: 'Erreur',\n        message: error instanceof Error ? error.message : 'Une erreur est survenue lors de l\\'inscription',\n        buttonTitle: 'OK'\n      });\n    } finally {\n      this.isLoading = false;\n    }\n  }\n}\n\n\n\n\nprivate async generateUniqueUsername(firstName: string, lastName: string): Promise<string> {\n  // Nettoyer les caractères spéciaux et les accents\n  const cleanString = (str: string) => {\n    return str\n      .normalize('NFD')\n      .replace(/[\\u0300-\\u036f]/g, '') // Supprime les accents\n      .toLowerCase()\n      .replace(/[^a-z0-9]/g, '') // Garde uniquement les lettres et chiffres\n      .substring(0, 15); // Limite la longueur\n  };\n\n  const cleanFirstName = cleanString(firstName);\n  const cleanLastName = cleanString(lastName);\n  \n  // Première tentative : prénom.nom\n  let baseUsername = `${cleanFirstName}.${cleanLastName}`;\n  let username = baseUsername;\n  let counter = 1;\n\n  // Vérifier si le nom d'utilisateur existe déjà\n  const usernameExists = async (username: string): Promise<boolean> => {\n    try {\n      const profiles = await firstValueFrom(this.profileService.getProfiles());\n      return profiles.some(profile => profile.username === username);\n    } catch (error) {\n      console.error('Erreur lors de la vérification du nom d\\'utilisateur', error);\n      return false; // En cas d'erreur, on considère que le nom est disponible\n    }\n  };\n\n  // Tant que le nom d'utilisateur existe, on ajoute un numéro\n  while (await usernameExists(username)) {\n    username = `${baseUsername}${counter}`;\n    counter++;\n    \n    // Limite de sécurité pour éviter les boucles infinies\n    if (counter > 1000) {\n      throw new Error('Impossible de générer un nom d\\'utilisateur unique');\n    }\n  }\n\n  return username;\n}\n\n}",
            "assetsDirs": [],
            "styleUrlsData": [
                {
                    "data": ".custom-header {\n  ion-toolbar {\n    --background: linear-gradient(135deg, #ff7f00 0%, #000055 100%);\n    --color: white;\n    \n    ion-title {\n      font-weight: 600;\n    }\n    \n    ion-button {\n      --color: white;\n    }\n  }\n}\n\n.subscription-content {\n  --background: linear-gradient(180deg, #f8fafc 0%, #e2e8f0 100%);\n\n  .subscription-container {\n    padding: 20px;\n    min-height: 100%;\n  }\n\n  .header-section {\n    text-align: center;\n    margin-bottom: 30px;\n    animation: fadeInDown 0.6s ease-out;\n\n    .icon-wrapper {\n      margin-bottom: 15px;\n      \n      .main-icon {\n        font-size: 60px;\n        color: #ff7f00;\n        filter: drop-shadow(0 4px 12px rgba(255, 127, 0, 0.3));\n        animation: sparkle 2s ease-in-out infinite;\n      }\n    }\n\n    h1 {\n      font-size: 28px;\n      font-weight: 700;\n      color: #000055;\n      margin: 0 0 10px 0;\n    }\n\n    p {\n      font-size: 15px;\n      color: #64748b;\n      margin: 0;\n    }\n  }\n\n  .plans-grid {\n    display: grid;\n    gap: 20px;\n    margin-bottom: 30px;\n\n    .plan-card {\n      position: relative;\n      background: white;\n      border-radius: 20px;\n      padding: 0;\n      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);\n      cursor: pointer;\n      transition: all 0.3s ease;\n      overflow: hidden;\n      animation: fadeInUp 0.6s ease-out backwards;\n\n      &:nth-child(2) { animation-delay: 0.1s; }\n      &:nth-child(3) { animation-delay: 0.2s; }\n      &:nth-child(4) { animation-delay: 0.3s; }\n\n      &.selected {\n        transform: scale(1.02);\n        box-shadow: 0 8px 24px rgba(255, 127, 0, 0.25);\n        border: 3px solid #ff7f00;\n      }\n\n      &.popular {\n        border: 2px solid #ff7f00;\n      }\n\n      .popular-badge {\n        position: absolute;\n        top: 15px;\n        right: 15px;\n        background: linear-gradient(135deg, #ff7f00, #ff6b00);\n        color: white;\n        padding: 6px 14px;\n        border-radius: 20px;\n        font-size: 12px;\n        font-weight: 600;\n        display: flex;\n        align-items: center;\n        gap: 5px;\n        z-index: 2;\n        box-shadow: 0 4px 12px rgba(255, 127, 0, 0.3);\n\n        ion-icon {\n          font-size: 16px;\n          animation: pulse 2s ease-in-out infinite;\n        }\n      }\n\n      .plan-header {\n        padding: 30px 20px 20px;\n        color: white;\n        text-align: center;\n        position: relative;\n        overflow: hidden;\n\n        &::before {\n          content: '';\n          position: absolute;\n          top: -50%;\n          left: -50%;\n          width: 200%;\n          height: 200%;\n          background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);\n          animation: shimmer 3s ease-in-out infinite;\n        }\n\n        .plan-icon {\n          font-size: 48px;\n          margin-bottom: 10px;\n          filter: drop-shadow(0 2px 8px rgba(0, 0, 0, 0.2));\n        }\n\n        h2 {\n          font-size: 24px;\n          font-weight: 700;\n          margin: 0;\n          text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n        }\n      }\n\n      .plan-price {\n        padding: 25px 20px;\n        text-align: center;\n        border-bottom: 1px solid #f1f5f9;\n\n        .currency {\n          font-size: 20px;\n          font-weight: 600;\n          color: #64748b;\n          vertical-align: super;\n        }\n\n        .amount {\n          font-size: 42px;\n          font-weight: 800;\n          color: #000055;\n          margin: 0 5px;\n        }\n\n        .period {\n          font-size: 16px;\n          color: #64748b;\n          font-weight: 500;\n        }\n      }\n\n      .plan-features {\n        padding: 25px 20px 30px;\n\n        .feature {\n          display: flex;\n          align-items: flex-start;\n          gap: 12px;\n          margin-bottom: 14px;\n          font-size: 14px;\n          color: #475569;\n\n          &:last-child {\n            margin-bottom: 0;\n          }\n\n          .check-icon {\n            font-size: 20px;\n            color: #10b981;\n            flex-shrink: 0;\n            margin-top: 2px;\n          }\n\n          span {\n            line-height: 1.5;\n          }\n        }\n      }\n\n      .selection-indicator {\n        position: absolute;\n        bottom: 20px;\n        right: 20px;\n        \n        ion-icon {\n          font-size: 32px;\n          color: #ff7f00;\n          animation: scaleIn 0.3s ease-out;\n        }\n      }\n    }\n  }\n\n  .cta-section {\n    text-align: center;\n    animation: fadeInUp 0.6s ease-out 0.4s backwards;\n\n    .subscribe-btn {\n      --background: linear-gradient(135deg, #ff7f00 0%, #ff6b00 100%);\n      --border-radius: 16px;\n      height: 56px;\n      font-size: 17px;\n      font-weight: 700;\n      text-transform: none;\n      letter-spacing: 0.3px;\n      margin-bottom: 15px;\n      box-shadow: 0 8px 24px rgba(255, 127, 0, 0.35);\n      transition: all 0.3s ease;\n\n      &:not([disabled]):hover {\n        transform: translateY(-2px);\n        box-shadow: 0 12px 32px rgba(255, 127, 0, 0.45);\n      }\n\n      &:not([disabled]):active {\n        transform: translateY(0);\n      }\n\n      &[disabled] {\n        --background: #cbd5e1;\n        box-shadow: none;\n      }\n\n      ion-icon {\n        font-size: 22px;\n        margin-right: 8px;\n      }\n    }\n\n    .terms {\n      font-size: 12px;\n      color: #64748b;\n      margin: 0;\n      line-height: 1.6;\n\n      a {\n        color: #ff7f00;\n        text-decoration: none;\n        font-weight: 600;\n\n        &:hover {\n          text-decoration: underline;\n        }\n      }\n    }\n  }\n}\n\n.app-loading-backdrop {\n  position: fixed;\n  inset: 0;\n  background: rgba(0, 0, 0, 0.4);\n  z-index: 9999;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.app-loading-box {\n  background: #fff;\n  padding: 24px 32px;\n  border-radius: 12px;\n  text-align: center;\n  min-width: 220px;\n}\n\n@keyframes fadeInDown {\n  from {\n    opacity: 0;\n    transform: translateY(-20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes fadeInUp {\n  from {\n    opacity: 0;\n    transform: translateY(20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes sparkle {\n  0%, 100% {\n    transform: scale(1) rotate(0deg);\n  }\n  50% {\n    transform: scale(1.1) rotate(5deg);\n  }\n}\n\n@keyframes pulse {\n  0%, 100% {\n    transform: scale(1);\n  }\n  50% {\n    transform: scale(1.1);\n  }\n}\n\n@keyframes scaleIn {\n  from {\n    transform: scale(0);\n    opacity: 0;\n  }\n  to {\n    transform: scale(1);\n    opacity: 1;\n  }\n}\n\n@keyframes shimmer {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n\n// Responsive adjustments for larger screens\n@media (min-width: 768px) {\n  .subscription-content .plans-grid {\n    grid-template-columns: repeat(2, 1fr);\n  }\n}\n\n@media (min-width: 1024px) {\n  .subscription-content .plans-grid {\n    grid-template-columns: repeat(4, 1fr);\n  }\n}",
                    "styleUrl": "./subscription.page.scss"
                }
            ],
            "stylesData": "",
            "constructorObj": {
                "name": "constructor",
                "description": "",
                "deprecated": false,
                "deprecationMessage": "",
                "args": [
                    {
                        "name": "router",
                        "type": "Router",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "subscriptionService",
                        "type": "SubscriptionService",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "userService",
                        "type": "UserService",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "profileService",
                        "type": "ProfileService",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    }
                ],
                "line": 64,
                "jsdoctags": [
                    {
                        "name": "router",
                        "type": "Router",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "subscriptionService",
                        "type": "SubscriptionService",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "userService",
                        "type": "UserService",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "profileService",
                        "type": "ProfileService",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            },
            "extends": [],
            "implements": [
                "OnInit"
            ],
            "templateData": "<ion-header class=\"custom-header\">\n  <ion-toolbar>\n    <ion-buttons slot=\"start\">\n      <ion-button (click)=\"goBack()\">\n        <ion-icon slot=\"icon-only\" name=\"arrow-back\"></ion-icon>\n      </ion-button>\n    </ion-buttons>\n    <ion-title>Choisir votre plan</ion-title>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content class=\"subscription-content\">\n  <ion-loading \n  [isOpen]=\"isLoading\" \n  message=\"Chargement en cours...\"\n  spinner=\"circles\">\n</ion-loading>\n  <div class=\"subscription-container\">\n    \n    <!-- Header Section -->\n    <div class=\"header-section\">\n      <div class=\"icon-wrapper\">\n        <ion-icon name=\"sparkles\" class=\"main-icon\"></ion-icon>\n      </div>\n      <h1>Choisissez votre expérience</h1>\n      <p>Sélectionnez le plan qui vous convient le mieux</p>\n    </div>\n\n    <!-- Plans Grid -->\n    <div class=\"plans-grid\">\n      <div \n        *ngFor=\"let plan of plans\" \n        class=\"plan-card\"\n        [class.selected]=\"selectedPlan === plan.id\"\n        [class.popular]=\"plan.popular\"\n        (click)=\"selectPlan(plan.id)\"\n      >\n        <!-- Popular Badge -->\n        <div class=\"popular-badge\" *ngIf=\"plan.popular\">\n          <ion-icon name=\"flame\"></ion-icon>\n          Populaire\n        </div>\n\n        <!-- Plan Header -->\n        <div class=\"plan-header\" [style.background]=\"plan.color\">\n          <ion-icon [name]=\"plan.icon\" class=\"plan-icon\"></ion-icon>\n          <h2>{{ plan.name }}</h2>\n        </div>\n\n        <!-- Plan Price -->\n        <div class=\"plan-price\">\n          <span class=\"currency\" *ngIf=\"plan.price > 0\">€</span>\n          <span class=\"amount\">{{ plan.price === 0 ? 'Gratuit' : plan.price }}</span>\n          <span class=\"period\" *ngIf=\"plan.price > 0\">{{ plan.period }}</span>\n        </div>\n\n        <!-- Plan Features -->\n        <div class=\"plan-features\">\n          <div class=\"feature\" *ngFor=\"let feature of plan.features\">\n            <ion-icon name=\"checkmark-circle\" class=\"check-icon\"></ion-icon>\n            <span>{{ feature }}</span>\n          </div>\n        </div>\n\n        <!-- Selection Indicator -->\n        <div class=\"selection-indicator\" *ngIf=\"selectedPlan === plan.id\">\n          <ion-icon name=\"checkmark-circle\"></ion-icon>\n        </div>\n      </div>\n    </div>\n\n    <!-- CTA Button -->\n    <div class=\"cta-section\">\n      <ion-button\n        expand=\"block\"\n        class=\"subscribe-btn\"\n        [disabled]=\"!selectedPlan\"\n        (click)=\"subscribe()\"\n      >\n        <ion-icon name=\"rocket\" slot=\"start\"></ion-icon>\n        Commencer maintenant\n      </ion-button>\n      \n      <p class=\"terms\">\n        En continuant, vous acceptez nos \n        <a href=\"#\">conditions d'utilisation</a>\n      </p>\n    </div>\n\n  </div>\n</ion-content>"
        },
        {
            "name": "Tab3Page",
            "id": "component-Tab3Page-677bd584b10ada1e731f12195543d767dd78436549dce551c16b809c4794175cbb6c8758a2eb65b7f0fe09867549b4532d658546690ca4d553f22d90e90ece05",
            "file": "src/app/tab3/tab3.page.ts",
            "encapsulation": [],
            "entryComponents": [],
            "inputs": [],
            "outputs": [],
            "providers": [],
            "selector": "app-tab3",
            "styleUrls": [
                "tab3.page.scss"
            ],
            "styles": [],
            "templateUrl": [
                "tab3.page.html"
            ],
            "viewProviders": [],
            "hostDirectives": [],
            "inputsClass": [],
            "outputsClass": [],
            "propertiesClass": [],
            "methodsClass": [],
            "deprecated": false,
            "deprecationMessage": "",
            "hostBindings": [],
            "hostListeners": [],
            "standalone": false,
            "imports": [
                {
                    "name": "IonHeader"
                },
                {
                    "name": "IonToolbar"
                },
                {
                    "name": "IonTitle"
                },
                {
                    "name": "IonContent"
                },
                {
                    "name": "ExploreContainerComponent",
                    "type": "component"
                }
            ],
            "description": "",
            "rawdescription": "\n",
            "type": "component",
            "sourceCode": "import { Component } from '@angular/core';\nimport { IonHeader, IonToolbar, IonTitle, IonContent } from '@ionic/angular/standalone';\nimport { ExploreContainerComponent } from '../explore-container/explore-container.component';\n\n@Component({\n  selector: 'app-tab3',\n  templateUrl: 'tab3.page.html',\n  styleUrls: ['tab3.page.scss'],\n  imports: [IonHeader, IonToolbar, IonTitle, IonContent, ExploreContainerComponent],\n})\nexport class Tab3Page {\n  constructor() {}\n}\n",
            "assetsDirs": [],
            "styleUrlsData": [
                {
                    "data": "",
                    "styleUrl": "tab3.page.scss"
                }
            ],
            "stylesData": "",
            "constructorObj": {
                "name": "constructor",
                "description": "",
                "deprecated": false,
                "deprecationMessage": "",
                "args": [],
                "line": 11
            },
            "extends": [],
            "templateData": "<ion-header [translucent]=\"true\">\n  <ion-toolbar>\n    <ion-title>\n      Tab 3\n    </ion-title>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content [fullscreen]=\"true\">\n  <ion-header collapse=\"condense\">\n    <ion-toolbar>\n      <ion-title size=\"large\">Tab 3</ion-title>\n    </ion-toolbar>\n  </ion-header>\n\n  <app-explore-container name=\"Tab 3 page\"></app-explore-container>\n</ion-content>\n"
        },
        {
            "name": "TabsPage",
            "id": "component-TabsPage-d8ff6ad1de643e3d11c9d7a5fd19a0ae987608347871328bdccb94d8dc6d43df65cd0ce24c66b6d5d69a3ef3571947d302b92ac99ae3374401821589ff2a21dc",
            "file": "src/app/tabs/tabs.page.ts",
            "encapsulation": [],
            "entryComponents": [],
            "inputs": [],
            "outputs": [],
            "providers": [],
            "selector": "app-tabs",
            "styleUrls": [
                "tabs.page.scss"
            ],
            "styles": [],
            "templateUrl": [
                "tabs.page.html"
            ],
            "viewProviders": [],
            "hostDirectives": [],
            "inputsClass": [],
            "outputsClass": [],
            "propertiesClass": [
                {
                    "name": "activeTab",
                    "defaultValue": "'home'",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 21
                },
                {
                    "name": "destroy$",
                    "defaultValue": "new Subject<void>()",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 22,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "environmentInjector",
                    "defaultValue": "inject(EnvironmentInjector)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 20,
                    "modifierKind": [
                        125
                    ]
                },
                {
                    "name": "subscriptionStatus",
                    "defaultValue": "'inactive'",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "\"active\" | \"expiring\" | \"expired\" | \"inactive\"",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 23
                }
            ],
            "methodsClass": [
                {
                    "name": "checkSubscriptionStatus",
                    "args": [],
                    "optional": false,
                    "returnType": "any",
                    "typeParameters": [],
                    "line": 43,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        134
                    ]
                },
                {
                    "name": "getSubscriptionStatus",
                    "args": [],
                    "optional": false,
                    "returnType": "\"active\" | \"expiring\" | \"expired\" | \"inactive\"",
                    "typeParameters": [],
                    "line": 81,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "isExpiringSoon",
                    "args": [
                        {
                            "name": "endDate",
                            "type": "Date",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "boolean",
                    "typeParameters": [],
                    "line": 74,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        123
                    ],
                    "jsdoctags": [
                        {
                            "name": "endDate",
                            "type": "Date",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "ngOnDestroy",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 94,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "ngOnInit",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 90,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "setActiveTab",
                    "args": [
                        {
                            "name": "event",
                            "type": "any",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 86,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "event",
                            "type": "any",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                }
            ],
            "deprecated": false,
            "deprecationMessage": "",
            "hostBindings": [],
            "hostListeners": [],
            "standalone": false,
            "imports": [
                {
                    "name": "NgClass"
                },
                {
                    "name": "IonTabs"
                },
                {
                    "name": "IonTabBar"
                },
                {
                    "name": "IonTabButton"
                },
                {
                    "name": "IonIcon"
                },
                {
                    "name": "IonLabel"
                }
            ],
            "description": "",
            "rawdescription": "\n",
            "type": "component",
            "sourceCode": "import { Component, EnvironmentInjector, inject, OnInit } from '@angular/core';\nimport { IonTabs, IonTabBar, IonTabButton, IonIcon, IonLabel } from '@ionic/angular/standalone';\nimport { addIcons } from 'ionicons';\nimport { NgClass } from '@angular/common';\nimport { home, trophy, addCircle, person, star } from 'ionicons/icons';\nimport { firstValueFrom } from 'rxjs';\nimport { Auth } from 'src/services/AUTH/auth';\nimport { UserService } from 'src/services/USER_SERVICE/user-service';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\n\n\n@Component({\n  selector: 'app-tabs',\n  templateUrl: 'tabs.page.html',\n  styleUrls: ['tabs.page.scss'],\n  imports: [ NgClass, IonTabs, IonTabBar, IonTabButton, IonIcon, IonLabel],\n})\nexport class TabsPage implements OnInit {\n  public environmentInjector = inject(EnvironmentInjector);\n   activeTab = 'home';\n   private destroy$ = new Subject<void>();\n   subscriptionStatus: 'active' | 'expiring' | 'expired' | 'inactive' = 'inactive';\n  \nconstructor(\n  private userService: UserService, \n  private authService: Auth\n) {\n  addIcons({ home, trophy, addCircle, person, star });\n  \n  // 4. S'abonner aux changements d'authentification\n  this.authService.currentUser$\n    .pipe(takeUntil(this.destroy$))\n    .subscribe(user => {\n      if (user) {\n        this.checkSubscriptionStatus();\n      } else {\n        this.subscriptionStatus = 'inactive';\n      }\n    });\n}\n\n   async checkSubscriptionStatus() {\n  try {\n    const currentUser = this.authService.getCurrentUser();\n    if (!currentUser?.id) {\n      this.subscriptionStatus = 'inactive';\n      return;\n    }\n\n    const user = await this.userService.getUserById(currentUser.id.toString()).toPromise();\n   \n    if (user?.myPlan) {\n      const endDate = new Date(user.myPlan.endDate);\n      const today = new Date();\n      \n      if (endDate < today || user.myPlan.id == 'exhibition') {\n        this.subscriptionStatus = 'expired';\n      } else if (this.isExpiringSoon(endDate)) {\n        this.subscriptionStatus = 'expiring';\n      } else {\n        this.subscriptionStatus = 'active';\n      }\n    } else {\n      this.subscriptionStatus = 'inactive';\n    }\n  } catch (error) {\n    console.error('Erreur lors de la vérification de l\\'abonnement:', error);\n    this.subscriptionStatus = 'inactive';\n  }\n}\n\n// 7. Implémentez la méthode isExpiringSoon si elle n'existe pas déjà\nprivate isExpiringSoon(endDate: Date): boolean {\n  const today = new Date();\n  const timeDiff = endDate.getTime() - today.getTime();\n  const daysDiff = Math.ceil(timeDiff / (1000 * 3600 * 24));\n  return daysDiff <= 7; // Moins de 7 jours restants\n}\n\n  getSubscriptionStatus() {\n   \n    return this.subscriptionStatus;\n  }\n\n  setActiveTab(event: any) {\n    this.activeTab = event.tab;\n  }\n\n  ngOnInit(): void {\n    this.checkSubscriptionStatus();\n  }\n  \n  ngOnDestroy(): void {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n}\n",
            "assetsDirs": [],
            "styleUrlsData": [
                {
                    "data": "\nion-tab-bar {\n  --background: rgba(0, 0, 0, 0.8);\n  --border: none;\n  backdrop-filter: blur(10px);\n  border-top: 1px solid rgba(255, 255, 255, 0.1);\n  padding: 4px 0;\n  height: 60px;\n\n  ion-tab-button {\n    --color: white;\n    --color-selected: #ff7f00;\n    --padding-top: 4px;\n    --padding-bottom: 4px;\n    \n    ion-icon {\n      font-size: 24px;\n      margin-bottom: 4px;\n    }\n    \n    ion-label {\n      font-size: 12px;\n      margin-top: 2px;\n    }\n  }\n}\n\n\n.profile-tab {\n  position: relative;\n  display: inline-block;\n}\n\n.led-indicator {\n  position: absolute;\n  top: 0;\n  right: 0;\n  width: 8px;\n  height: 8px;\n  border-radius: 50%;\n  border: 1px solid var(--ion-color-light);\n\n  &.active {\n    background-color: #2dd36f; // Vert pour actif\n  }\n\n  &.expiring {\n    background-color: #ffc409; // Orange pour bientôt expiré\n  }\n\n  &.expired, &.inactive {\n    background-color: #eb445a; // Rouge pour expiré/inactif\n  }\n}",
                    "styleUrl": "tabs.page.scss"
                }
            ],
            "stylesData": "",
            "constructorObj": {
                "name": "constructor",
                "description": "",
                "deprecated": false,
                "deprecationMessage": "",
                "args": [
                    {
                        "name": "userService",
                        "type": "UserService",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "authService",
                        "type": "Auth",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    }
                ],
                "line": 23,
                "jsdoctags": [
                    {
                        "name": "userService",
                        "type": "UserService",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "authService",
                        "type": "Auth",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            },
            "extends": [],
            "implements": [
                "OnInit"
            ],
            "templateData": "<ion-tabs>\n  <ion-tab-bar slot=\"bottom\" class=\"custom-tab-bar\">\n    <ion-tab-button tab=\"home\" [class.active]=\"activeTab === 'home'\">\n      <ion-icon name=\"home\"></ion-icon>\n      <ion-label>Home</ion-label>\n    </ion-tab-button>\n    \n    <ion-tab-button tab=\"ranking\" [class.active]=\"activeTab === 'ranking'\">\n      <ion-icon name=\"trophy\"></ion-icon>\n      <ion-label>Ranking</ion-label>\n    </ion-tab-button>\n    \n    <ion-tab-button tab=\"upload\" [class.active]=\"activeTab === 'upload'\">\n      <ion-icon name=\"add-circle\"></ion-icon>\n      <ion-label>Upload</ion-label>\n    </ion-tab-button>\n    \n    <ion-tab-button tab=\"exclusive\" [class.active]=\"activeTab === 'exclusive'\">\n      <ion-icon name=\"star\"></ion-icon>\n      <ion-label>Exclusive</ion-label>\n    </ion-tab-button>\n    \n    <ion-tab-button tab=\"profile\" [class.active]=\"activeTab === 'profile'\">\n    <div class=\"profile-tab\">\n      <ion-icon name=\"person\"></ion-icon>\n      <div class=\"led-indicator\" [ngClass]=\"getSubscriptionStatus()\"></div>\n    </div>\n    <ion-label>Profile</ion-label>\n  </ion-tab-button>\n  </ion-tab-bar>\n</ion-tabs>"
        },
        {
            "name": "UploadPage",
            "id": "component-UploadPage-77a222c5444ef65c438a833c46c263c3b6cf1f48687c8086661d3fc0c5d8b05587e8e0891b4ce602feac408761b46fb42b6c92b218ce36409182ffbd991c7e76",
            "file": "src/app/tab-upload/upload.page.ts",
            "encapsulation": [],
            "entryComponents": [],
            "inputs": [],
            "outputs": [],
            "providers": [],
            "selector": "app-upload",
            "styleUrls": [
                "./upload.page.scss"
            ],
            "styles": [],
            "templateUrl": [
                "./upload.page.html"
            ],
            "viewProviders": [],
            "hostDirectives": [],
            "inputsClass": [],
            "outputsClass": [],
            "propertiesClass": [
                {
                    "name": "_selectedChallengeId",
                    "defaultValue": "null",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string | null",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 24,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "challenges",
                    "defaultValue": "[]",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "Challenge[]",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 51
                },
                {
                    "name": "content",
                    "defaultValue": "{\n    title: '',\n    description: '',\n    isPublic: true,\n    allowDownloads: true,\n    allowComments: true,\n    likedIds: [],\n    commentIds: [],\n    challengeId: '', // Sera mis à jour par le setter\n    userId: this.authService.getCurrentUser()?.id?.toString() || '',\n    source: ContentSource.CAMERA\n  }",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "Partial<Content>",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 39
                },
                {
                    "name": "currentStep",
                    "defaultValue": "1",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 57
                },
                {
                    "name": "isUploading",
                    "defaultValue": "false",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 56
                },
                {
                    "name": "previewUrl",
                    "defaultValue": "null",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string | null",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 55
                },
                {
                    "name": "selectedFile",
                    "defaultValue": "null",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "File | null",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 54
                },
                {
                    "name": "totalSteps",
                    "defaultValue": "4",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 58
                }
            ],
            "methodsClass": [
                {
                    "name": "canProceed",
                    "args": [],
                    "optional": false,
                    "returnType": "boolean",
                    "typeParameters": [],
                    "line": 130,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "canSubmit",
                    "args": [],
                    "optional": false,
                    "returnType": "boolean",
                    "typeParameters": [],
                    "line": 139,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "close",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 144,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "isImage",
                    "args": [],
                    "optional": false,
                    "returnType": "boolean",
                    "typeParameters": [],
                    "line": 93,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "isVideo",
                    "args": [],
                    "optional": false,
                    "returnType": "boolean",
                    "typeParameters": [],
                    "line": 98,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "loadChallenges",
                    "args": [],
                    "optional": false,
                    "returnType": "any",
                    "typeParameters": [],
                    "line": 73,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        134
                    ]
                },
                {
                    "name": "nextStep",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 262,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "ngOnDestroy",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 308,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "pickFromGallery",
                    "args": [],
                    "optional": false,
                    "returnType": "any",
                    "typeParameters": [],
                    "line": 117,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        134
                    ]
                },
                {
                    "name": "presentMediaOptions",
                    "args": [],
                    "optional": false,
                    "returnType": "any",
                    "typeParameters": [],
                    "line": 150,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        134
                    ]
                },
                {
                    "name": "prevStep",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 268,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "removeMedia",
                    "args": [
                        {
                            "name": "event",
                            "type": "Event",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 178,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "event",
                            "type": "Event",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "resetForm",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 275,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "showError",
                    "args": [
                        {
                            "name": "message",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "any",
                    "typeParameters": [],
                    "line": 289,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        123,
                        134
                    ],
                    "jsdoctags": [
                        {
                            "name": "message",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "showSuccess",
                    "args": [
                        {
                            "name": "message",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "any",
                    "typeParameters": [],
                    "line": 298,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        123,
                        134
                    ],
                    "jsdoctags": [
                        {
                            "name": "message",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "submit",
                    "args": [],
                    "optional": false,
                    "returnType": "any",
                    "typeParameters": [],
                    "line": 185,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        134
                    ]
                },
                {
                    "name": "takePhoto",
                    "args": [],
                    "optional": false,
                    "returnType": "any",
                    "typeParameters": [],
                    "line": 104,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        134
                    ]
                }
            ],
            "deprecated": false,
            "deprecationMessage": "",
            "hostBindings": [],
            "hostListeners": [],
            "standalone": true,
            "imports": [
                {
                    "name": "NgIf"
                },
                {
                    "name": "NgFor"
                },
                {
                    "name": "FormsModule",
                    "type": "module"
                },
                {
                    "name": "IonButton"
                },
                {
                    "name": "IonToggle"
                },
                {
                    "name": "IonTextarea"
                },
                {
                    "name": "IonItem"
                },
                {
                    "name": "IonContent"
                },
                {
                    "name": "IonIcon"
                },
                {
                    "name": "IonLabel"
                },
                {
                    "name": "IonHeader"
                },
                {
                    "name": "IonButtons"
                },
                {
                    "name": "IonProgressBar"
                },
                {
                    "name": "IonList"
                },
                {
                    "name": "IonToolbar"
                },
                {
                    "name": "IonTitle"
                },
                {
                    "name": "IonListHeader"
                },
                {
                    "name": "IonRadio"
                },
                {
                    "name": "IonRadioGroup"
                }
            ],
            "description": "",
            "rawdescription": "\n",
            "type": "component",
            "sourceCode": "import { Component, OnDestroy } from '@angular/core';\nimport { ActionSheetController, LoadingController, ToastController } from '@ionic/angular';\nimport { CameraService } from '../../services/CAMERA_SERVICE/camera-service';\nimport { CreationService } from '../../services/CREATION/creation-service';\nimport { Content, ContentSource, ContentType } from '../../models/Content';\nimport { IonButton,  IonToggle, IonTextarea, IonItem, IonContent, IonIcon, IonLabel, IonHeader, IonProgressBar, IonList, IonToolbar, IonTitle, IonRadioGroup, IonButtons, IonListHeader, IonRadio } from \"@ionic/angular/standalone\";\nimport { NgIf, NgFor } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { addIcons } from 'ionicons';\nimport { camera, arrowBack, closeCircle, close, image, images, globe, lockClosed, download } from 'ionicons/icons';\nimport { Challenge } from 'src/models/Challenge';\nimport { Auth } from 'src/services/AUTH/auth';\nimport { ProfileService } from 'src/services/PROFILE_SERVICE/profile-service';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-upload',\n  templateUrl: './upload.page.html',\n  styleUrls: ['./upload.page.scss'],\n  standalone: true,\n  imports:[NgIf, NgFor, FormsModule,  IonButton, IonToggle, IonTextarea, IonItem, IonContent, IonIcon, IonLabel, IonHeader, IonButtons, IonProgressBar, IonList, IonToolbar, IonTitle,  IonListHeader, IonRadio, IonRadioGroup]\n})\nexport class UploadPage implements OnDestroy {\n  private _selectedChallengeId: string | null = null;\n\n  // Getter et setter pour selectedChallengeId\n  get selectedChallengeId(): string | null {\n    return this._selectedChallengeId;\n  }\n\n  set selectedChallengeId(value: string | null) {\n    this._selectedChallengeId = value;\n    if (this.content) {\n      this.content.challengeId = value || '';\n    }\n  }\n\n  // État du formulaire\n  content: Partial<Content> = {\n    title: '',\n    description: '',\n    isPublic: true,\n    allowDownloads: true,\n    allowComments: true,\n    likedIds: [],\n    commentIds: [],\n    challengeId: '', // Sera mis à jour par le setter\n    userId: this.authService.getCurrentUser()?.id?.toString() || '',\n    source: ContentSource.CAMERA\n  };\n  challenges: Challenge[] = [];  // Liste des challenges\n  \n\n  selectedFile: File | null = null;\n  previewUrl: string | null = null;\n  isUploading = false;\n  currentStep = 1;\n  totalSteps = 4;\n\n  constructor(\n    private cameraService: CameraService,\n    private creationService: CreationService,\n    private authService: Auth,\n    private profileService: ProfileService,\n    private loadingCtrl: LoadingController,\n    private actionSheetCtrl: ActionSheetController,\n    private toastCtrl: ToastController,\n    private routeur: Router\n  ) {this.loadChallenges();\n    addIcons({arrowBack,close,images,closeCircle,camera,image,globe,lockClosed,download});}\n\n \n  async loadChallenges() {\n  try {\n    // Supprimez le await inutile car on utilise subscribe\n    this.creationService.getChallengesByCreator(\n      this.authService.getCurrentUser()?.id as string || ''\n    ).subscribe({\n      next: (challenges: Challenge[]) => {\n        this.challenges = challenges;\n      },\n      error: (error) => {\n        console.error('Erreur lors du chargement des challenges:', error);\n        this.showError('Impossible de charger les défis');\n      }\n    });\n  } catch (error) {\n    console.error('Erreur inattendue lors du chargement des challenges:', error);\n    this.showError('Une erreur inattendue est survenue');\n  }\n}\n\n  isImage(): boolean {\n  if (!this.selectedFile) return false;\n  return this.selectedFile.type.startsWith('image/');\n  }\n\n  isVideo(): boolean {\n  if (!this.selectedFile) return false;\n  return this.selectedFile.type.startsWith('video/');\n}\n\n  // Prendre une photo avec la caméra\n  async takePhoto() {\n    try {\n      const photo = await this.cameraService.takePhoto();\n      this.selectedFile = await this.cameraService.convertPhotoToFile(photo);\n      this.previewUrl = photo.webPath || null;\n      this.content.source = ContentSource.CAMERA;\n    } catch (error) {\n      console.error('Erreur avec la caméra:', error);\n      this.showError('Impossible d\\'accéder à la caméra');\n    }\n  }\n\n  // Choisir depuis la galerie\n  async pickFromGallery() {\n    try {\n      const photo = await this.cameraService.pickFromGallery();\n      this.selectedFile = await this.cameraService.convertPhotoToFile(photo);\n      this.previewUrl = photo.webPath || null;\n      this.content.source = ContentSource.GALLERY;\n    } catch (error) {\n      console.error('Erreur avec la galerie:', error);\n      this.showError('Impossible d\\'accéder à la galerie');\n    }\n  }\n\n  // Méthodes de navigation\ncanProceed(): boolean {\n  switch (this.currentStep) {\n    case 1: return !!this.selectedFile;\n    case 2: return !!this.content.title?.trim();\n    case 3: return true;  // L'étape de sélection du challenge est optionnelle\n    default: return true;\n  }\n}\n\ncanSubmit(): boolean {\n  return !!this.selectedFile && !!this.content.title?.trim();\n}\n\n// Pour fermer le formulaire\nclose() {\n  this.routeur.navigate(['/tabs/home']);\n  // Implémentez la logique pour fermer le modal ou revenir en arrière\n}\n\n// Pour afficher les options de média\nasync presentMediaOptions() {\n  if (this.selectedFile) return;\n  \n  const actionSheet = await this.actionSheetCtrl.create({\n    header: 'Ajouter des médias',\n    buttons: [\n      {\n        text: 'Prendre une photo',\n        icon: 'camera',\n        handler: () => this.takePhoto()\n      },\n      {\n        text: 'Choisir depuis la galerie',\n        icon: 'images',\n        handler: () => this.pickFromGallery()\n      },\n      {\n        text: 'Annuler',\n        icon: 'close',\n        role: 'cancel'\n      }\n    ]\n  });\n  \n  await actionSheet.present();\n}\n\n// Mettez à jour removeMedia\nremoveMedia(event: Event) {\n  event.stopPropagation();\n  this.selectedFile = null;\n  this.previewUrl = null;\n}\n\n  // Soumettre le formulaire\n async submit() {\n  if (!this.selectedFile) {\n    this.showError('Veuillez sélectionner un fichier');\n    return;\n  }\n\n  if (!this.content.title?.trim()) {\n    this.showError('Veuillez ajouter un titre');\n    return;\n  }\n\n  const loading = await this.loadingCtrl.create({\n    message: 'Publication en cours...'\n  });\n  await loading.present();\n \n  try {\n    // Création du contenu\n    const newContent = await this.creationService.createContentWithFile(\n      this.selectedFile,\n      {\n        title: this.content.title,\n        userId: this.content.userId || '',\n        description: this.content.description,\n        isPublic: this.content.isPublic ?? true,\n        allowDownloads: this.content.allowDownloads ?? true,\n        allowComments: this.content.allowComments ?? false,\n        challengeId: this.content.challengeId,\n        likedIds: [],\n        commentIds: [],\n        source: this.content.source || ContentSource.CAMERA\n      }\n    ).toPromise();\n\n    // Mise à jour des statistiques du profil utilisateur\n    if (newContent && this.content.userId) {\n      try {\n        // Récupérer le profil utilisateur\nconst userProfile = await this.profileService.getProfileById(this.content.userId).toPromise();\n\nif (userProfile) {\n  // Initialiser les stats si elles n'existent pas\n  const currentStats = userProfile.stats || { \n    posts: 0, \n    fans: 0, \n    votes: 0, \n    stars: 0 \n  };\n  \n  // Créer l'objet de mise à jour avec les nouvelles stats\n  const updates = {\n    stats: {\n      ...currentStats,\n      posts: (currentStats.posts || 0) + 1\n    }\n  };\n  \n  // Mettre à jour le profil utilisateur avec la nouvelle signature\n  await this.profileService.updateProfile(userProfile.id, updates).toPromise();\n}\n      } catch (error) {\n        console.error('Erreur lors de la mise à jour du profil:', error);\n        // Ne pas bloquer le flux en cas d'échec de la mise à jour des stats\n      }\n    }\n\n    await loading.dismiss();\n    this.showSuccess('Contenu publié avec succès!');\n    this.resetForm();\n  } catch (error) {\n    console.error('Erreur lors de la publication:', error);\n    await loading.dismiss();\n    this.showError('Erreur lors de la publication');\n  }\n}\n\n  // Navigation entre les étapes\n  nextStep() {\n    if (this.currentStep < this.totalSteps) {\n      this.currentStep++;\n    }\n  }\n\n  prevStep() {\n    if (this.currentStep > 1) {\n      this.currentStep--;\n    }\n  }\n\n  // Réinitialisation du formulaire\n  private resetForm() {\n    this.content = {\n      title: '',\n      description: '',\n      isPublic: true,\n      allowDownloads: true,\n      allowComments: false,\n    };\n    this.selectedFile = null;\n    this.previewUrl = null;\n    this.currentStep = 1;\n  }\n\n  // Affichage des messages\n  private async showError(message: string) {\n    const toast = await this.toastCtrl.create({\n      message,\n      duration: 3000,\n      color: 'danger'\n    });\n    await toast.present();\n  }\n\n  private async showSuccess(message: string) {\n    const toast = await this.toastCtrl.create({\n      message,\n      duration: 3000,\n      color: 'success'\n    });\n    await toast.present();\n  }\n\n  // Nettoyage\n  ngOnDestroy() {\n    if (this.previewUrl) {\n      URL.revokeObjectURL(this.previewUrl);\n    }\n  }\n}",
            "assetsDirs": [],
            "styleUrlsData": [
                {
                    "data": ":host {\n  --background: #f8f9fa;\n}\n\nion-toolbar {\n  --background: #ffffff;\n  --border-width: 0;\n  --min-height: 56px;\n  \n  ion-title {\n    font-size: 1.1rem;\n    font-weight: 600;\n    padding: 0;\n  }\n  \n  ion-button {\n    --color: #3897f0;\n    --background-activated: transparent;\n    font-weight: 600;\n    text-transform: none;\n    \n    &[disabled] {\n      --color: rgba(56, 151, 240, 0.5);\n    }\n  }\n}\n\n.upload-step {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n\n.upload-container {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: #ffffff;\n  border: 2px dashed #dbdbdb;\n  border-radius: 12px;\n  padding: 2rem;\n  margin-bottom: 1rem;\n  transition: all 0.3s ease;\n  \n  &.has-file {\n    border-color: transparent;\n    padding: 0;\n    background: transparent;\n  }\n  \n  &:active:not(.has-file) {\n    background: rgba(219, 219, 219, 0.3);\n  }\n}\n\n.upload-placeholder {\n  text-align: center;\n  color: #8e8e8e;\n  \n  .upload-icon {\n    font-size: 3rem;\n    margin-bottom: 1rem;\n    color: #3897f0;\n  }\n  \n  h3 {\n    margin: 0 0 0.5rem;\n    font-size: 1.25rem;\n    font-weight: 600;\n    color: #262626;\n  }\n  \n  p {\n    margin: 0;\n    font-size: 0.9rem;\n  }\n}\n\n.media-preview {\n  width: 100%;\n  height: 100%;\n  position: relative;\n  \n  .media-container {\n    position: relative;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    \n    img, video {\n      max-width: 100%;\n      max-height: 70vh;\n      border-radius: 8px;\n      object-fit: contain;\n    }\n  }\n  \n  .remove-media {\n    position: absolute;\n    top: 1rem;\n    right: 1rem;\n    background: rgba(0, 0, 0, 0.5);\n    border: none;\n    border-radius: 50%;\n    width: 32px;\n    height: 32px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    color: white;\n    font-size: 1.2rem;\n    z-index: 10;\n  }\n}\n\n.quick-actions {\n  display: flex;\n  justify-content: center;\n  gap: 1rem;\n  padding: 1rem 0;\n  \n  .action-button {\n    --color: #262626;\n    --background-activated: rgba(0, 0, 0, 0.05);\n    --border-radius: 8px;\n    --padding-start: 1rem;\n    --padding-end: 1rem;\n    font-size: 0.9rem;\n    \n    ion-icon {\n      font-size: 1.25rem;\n    }\n  }\n}\n\n.details-step {\n  .caption-item {\n    --background: #ffffff;\n    --border-radius: 12px;\n    margin-bottom: 1rem;\n    \n    .caption-input {\n      --placeholder-color: #8e8e8e;\n      --placeholder-opacity: 1;\n      font-size: 1rem;\n      --padding-start: 0;\n      --padding-end: 0;\n    }\n  }\n  \n  .settings-list {\n    background: #ffffff;\n    border-radius: 12px;\n    padding: 0.5rem 0;\n    \n    ion-item {\n      --padding-start: 1rem;\n      --padding-end: 1rem;\n      --min-height: 52px;\n      \n      ion-label {\n        font-size: 0.95rem;\n      }\n      \n      ion-toggle {\n        --background: #efefef;\n        --background-checked: #3897f0;\n        --handle-background: #ffffff;\n        --handle-background-checked: #ffffff;\n        --handle-height: 20px;\n        --handle-width: 20px;\n        --handle-box-shadow: none;\n        height: 24px;\n        width: 42px;\n      }\n    }\n  }\n}\n\n.preview-step {\n  .preview-card {\n    background: #ffffff;\n    border-radius: 12px;\n    overflow: hidden;\n    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);\n    \n    .preview-media {\n      height: 300px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      background: #000;\n      \n      img, video {\n        max-width: 100%;\n        max-height: 100%;\n        object-fit: contain;\n      }\n    }\n    \n    .preview-details {\n      padding: 1rem;\n      \n      h3 {\n        margin: 0 0 0.5rem;\n        font-size: 1.1rem;\n        font-weight: 600;\n        color: #262626;\n      }\n      \n      .description {\n        margin: 0 0 1rem;\n        color: #262626;\n        font-size: 0.95rem;\n        line-height: 1.4;\n        white-space: pre-line;\n      }\n      \n      .meta-info {\n        display: flex;\n        flex-wrap: wrap;\n        gap: 1rem;\n        font-size: 0.85rem;\n        color: #8e8e8e;\n        \n        span {\n          display: flex;\n          align-items: center;\n          gap: 0.25rem;\n          \n          ion-icon {\n            font-size: 1rem;\n          }\n        }\n      }\n    }\n  }\n}\n\n// Animations\n@keyframes fadeIn {\n  from { opacity: 0; }\n  to { opacity: 1; }\n}\n\n.step-content {\n  animation: fadeIn 0.3s ease-out;\n}\n\n// Responsive\n@media (max-height: 700px) {\n  .media-preview .media-container {\n    img, video {\n      max-height: 60vh;\n    }\n  }\n}\n\n// Thème sombre\n@media (prefers-color-scheme: dark) {\n  :host {\n    --background: #121212;\n  }\n  \n  ion-toolbar {\n    --background: #1e1e1e;\n    --color: #ffffff;\n  }\n  \n  .upload-container:not(.has-file) {\n    background: #1e1e1e;\n    border-color: #333;\n  }\n  \n  .upload-placeholder {\n    color: #a8a8a8;\n    \n    h3 {\n      color: #ffffff;\n    }\n  }\n  \n  .quick-actions .action-button {\n    --color: #f5f5f5;\n    --background-activated: rgba(255, 255, 255, 0.1);\n  }\n  \n  .details-step .caption-item,\n  .settings-list {\n    --background: #1e1e1e;\n  }\n  \n  .preview-card {\n    background: #1e1e1e;\n    \n    .preview-details {\n      h3, .description {\n        color: #ffffff;\n      }\n    }\n  }\n}\n\n.challenge-step {\n  ion-radio-group {\n    width: 100%;\n  }\n\n  ion-item {\n    --padding-start: 0;\n    --inner-padding-end: 0;\n    --border-color: var(--ion-color-light-shade);\n    margin-bottom: 8px;\n    border-radius: 8px;\n    --background: var(--ion-color-light);\n  }\n\n  ion-radio {\n    --color: var(--ion-color-medium);\n    --color-checked: var(--ion-color-primary);\n    margin: 0 16px 0 8px;\n  }\n\n  h2 {\n    font-size: 1.4rem;\n    font-weight: 600;\n    margin-bottom: 8px;\n  }\n\n  p {\n    color: var(--ion-color-medium);\n    margin-top: 0;\n  }\n}",
                    "styleUrl": "./upload.page.scss"
                }
            ],
            "stylesData": "",
            "constructorObj": {
                "name": "constructor",
                "description": "",
                "deprecated": false,
                "deprecationMessage": "",
                "args": [
                    {
                        "name": "cameraService",
                        "type": "CameraService",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "creationService",
                        "type": "CreationService",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "authService",
                        "type": "Auth",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "profileService",
                        "type": "ProfileService",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "loadingCtrl",
                        "type": "LoadingController",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "actionSheetCtrl",
                        "type": "ActionSheetController",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "toastCtrl",
                        "type": "ToastController",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "routeur",
                        "type": "Router",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    }
                ],
                "line": 58,
                "jsdoctags": [
                    {
                        "name": "cameraService",
                        "type": "CameraService",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "creationService",
                        "type": "CreationService",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "authService",
                        "type": "Auth",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "profileService",
                        "type": "ProfileService",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "loadingCtrl",
                        "type": "LoadingController",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "actionSheetCtrl",
                        "type": "ActionSheetController",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "toastCtrl",
                        "type": "ToastController",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "routeur",
                        "type": "Router",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            },
            "extends": [],
            "implements": [
                "OnDestroy"
            ],
            "accessors": {
                "selectedChallengeId": {
                    "name": "selectedChallengeId",
                    "setSignature": {
                        "name": "selectedChallengeId",
                        "type": "void",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "args": [
                            {
                                "name": "value",
                                "type": "string | null",
                                "optional": false,
                                "dotDotDotToken": false,
                                "deprecated": false,
                                "deprecationMessage": ""
                            }
                        ],
                        "returnType": "void",
                        "line": 31,
                        "jsdoctags": [
                            {
                                "name": "value",
                                "type": "string | null",
                                "optional": false,
                                "dotDotDotToken": false,
                                "deprecated": false,
                                "deprecationMessage": "",
                                "tagName": {
                                    "text": "param"
                                }
                            }
                        ]
                    },
                    "getSignature": {
                        "name": "selectedChallengeId",
                        "type": "unknown",
                        "returnType": "string | null",
                        "line": 27
                    }
                }
            },
            "templateData": "<ion-header class=\"ion-no-border\">\n  <ion-toolbar color=\"light\">\n    <ion-buttons slot=\"start\">\n      <ion-button (click)=\"prevStep()\" *ngIf=\"currentStep > 1\">\n        <ion-icon name=\"arrow-back\" slot=\"icon-only\"></ion-icon>\n      </ion-button>\n      <ion-button (click)=\"close()\" *ngIf=\"currentStep === 1\">\n        <ion-icon name=\"close\" slot=\"icon-only\"></ion-icon>\n      </ion-button>\n    </ion-buttons>\n    <ion-title class=\"ion-text-center\">\n      <span *ngIf=\"currentStep === 1\">Nouvelle publication</span>\n      <span *ngIf=\"currentStep === 2\">Détails</span>\n      <span *ngIf=\"currentStep === 3\">Vérification</span>\n    </ion-title>\n    <ion-buttons slot=\"end\">\n      <ion-button (click)=\"nextStep()\" [disabled]=\"!canProceed()\" *ngIf=\"currentStep < 4\">\n        <span>Suivant</span>\n      </ion-button>\n      <ion-button (click)=\"submit()\" [disabled]=\"!canSubmit()\" *ngIf=\"currentStep === 4\">\n        <span>Publier</span>\n      </ion-button>\n    </ion-buttons>\n  </ion-toolbar>\n  <ion-progress-bar [value]=\"currentStep / totalSteps\" color=\"primary\"></ion-progress-bar>\n</ion-header>\n\n<ion-content class=\"ion-padding\" [fullscreen]=\"true\">\n  <!-- Étape 1: Sélection du média -->\n  <div *ngIf=\"currentStep === 1\" class=\"upload-step\">\n    <div class=\"upload-container\" (click)=\"presentMediaOptions()\" [class.has-file]=\"previewUrl\">\n      <div *ngIf=\"!previewUrl\" class=\"upload-placeholder\">\n        <ion-icon name=\"images\" class=\"upload-icon\"></ion-icon>\n        <h3>Ajouter des photos ou vidéos</h3>\n        <p>Glissez des médias ici ou appuyez pour sélectionner</p>\n      </div>\n      \n      <div *ngIf=\"previewUrl\" class=\"media-preview\">\n        <div class=\"media-container\">\n          <img *ngIf=\"isImage()\" [src]=\"previewUrl\" alt=\"Aperçu\">\n          <video *ngIf=\"isVideo()\" [src]=\"previewUrl\" controls></video>\n          <button class=\"remove-media\" (click)=\"removeMedia($event)\">\n            <ion-icon name=\"close-circle\"></ion-icon>\n          </button>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"quick-actions\" *ngIf=\"!previewUrl\">\n      <ion-button fill=\"clear\" (click)=\"takePhoto()\" class=\"action-button\">\n        <ion-icon slot=\"start\" name=\"camera\"></ion-icon>\n        Appareil photo\n      </ion-button>\n      <ion-button fill=\"clear\" (click)=\"pickFromGallery()\" class=\"action-button\">\n        <ion-icon slot=\"start\" name=\"image\"></ion-icon>\n        Galerie\n      </ion-button>\n    </div>\n  </div>\n\n  <!-- Étape 2: Détails -->\n  <div *ngIf=\"currentStep === 2\" class=\"ion-padding\">\n    <ion-list lines=\"full\" class=\"ion-margin-bottom\">\n      <ion-item>\n        <ion-textarea\n          [(ngModel)]=\"content.title\"\n          placeholder=\"Titre (obligatoire)\"\n          rows=\"1\"\n          autoGrow=\"true\"\n          required\n        ></ion-textarea>\n      </ion-item>\n      \n      <ion-item>\n        <ion-textarea\n          [(ngModel)]=\"content.description\"\n          placeholder=\"Ajoutez une description...\"\n          rows=\"3\"\n          autoGrow=\"true\"\n        ></ion-textarea>\n      </ion-item>\n    </ion-list>\n\n    <ion-list lines=\"full\" class=\"settings-list\">\n      <ion-item>\n        <ion-label class=\"ion-text-wrap\">\n          <h3>Rendre public</h3>\n          <p>Visible par tous les utilisateurs</p>\n        </ion-label>\n        <ion-toggle slot=\"end\" [(ngModel)]=\"content.isPublic\"></ion-toggle>\n      </ion-item>\n      \n      <ion-item>\n        <ion-label class=\"ion-text-wrap\">\n          <h3>Autoriser les commentaires</h3>\n          <p>Les utilisateurs pourront commenter votre publication</p>\n        </ion-label>\n        <ion-toggle slot=\"end\" [(ngModel)]=\"content.allowComments\"></ion-toggle>\n      </ion-item>\n      \n      <ion-item>\n        <ion-label class=\"ion-text-wrap\">\n          <h3>Autoriser le téléchargement</h3>\n          <p>Les utilisateurs pourront télécharger votre média</p>\n        </ion-label>\n        <ion-toggle slot=\"end\" [(ngModel)]=\"content.allowDownloads\"></ion-toggle>\n      </ion-item>\n    </ion-list>\n  </div>\n<!-- Étape 3: Sélection du défi -->\n<div *ngIf=\"currentStep === 3\" class=\"challenge-step ion-padding\">\n  <h2>Associer à un défi</h2>\n  <p class=\"ion-margin-bottom\">Sélectionnez un défi existant (optionnel)</p>\n\n  <ion-list>\n    <ion-radio-group [(ngModel)]=\"selectedChallengeId\">\n      <ion-list-header>\n        <ion-label>Défis disponibles</ion-label>\n      </ion-list-header>\n\n      <ion-item *ngFor=\"let challenge of challenges\">\n        <ion-radio slot=\"start\" [value]=\"challenge.id\"></ion-radio>\n        <ion-label class=\"ion-text-wrap\">\n          <h3>{{ challenge.name }}</h3>\n          <p *ngIf=\"challenge.description\">{{ challenge.description }}</p>\n        </ion-label>\n      </ion-item>\n\n      <ion-item>\n        <ion-radio slot=\"start\" [value]=\"null\"></ion-radio>\n        <ion-label class=\"ion-text-wrap\">\n          <h3>Ne pas associer à un défi</h3>\n        </ion-label>\n      </ion-item>\n    </ion-radio-group>\n  </ion-list>\n</div>\n\n<!-- Étape 4: Vérification -->\n<div *ngIf=\"currentStep === 4\" class=\"preview-step\">\n  <div class=\"preview-card\">\n    <div class=\"preview-media\">\n      <img *ngIf=\"isImage()\" [src]=\"previewUrl\" alt=\"Aperçu\">\n      <video *ngIf=\"isVideo()\" [src]=\"previewUrl\" controls></video>\n    </div>\n    <div class=\"preview-details\">\n      <h3>{{ content.title || 'Sans titre' }}</h3>\n      <p class=\"description\" *ngIf=\"content.description\">{{ content.description }}</p>\n      <div class=\"meta-info\">\n        <span class=\"visibility\">\n          <ion-icon name=\"globe\" *ngIf=\"content.isPublic\"></ion-icon>\n          <ion-icon name=\"lock-closed\" *ngIf=\"!content.isPublic\"></ion-icon>\n          {{ content.isPublic ? 'Publique' : 'Privé' }}\n        </span>\n        <span class=\"downloads\" *ngIf=\"content.allowDownloads\">\n          <ion-icon name=\"download\"></ion-icon>\n          Téléchargement autorisé\n        </span>\n      </div>\n    </div>\n  </div>\n</div>\n</ion-content>"
        }
    ],
    "modules": [],
    "miscellaneous": {
        "variables": [
            {
                "name": "environment",
                "ctype": "miscellaneous",
                "subtype": "variable",
                "file": "src/environments/environment.prod.ts",
                "deprecated": false,
                "deprecationMessage": "",
                "type": "object",
                "defaultValue": "{\n  production: true,\n  apiUrl: 'https://apis.majorware.net/best-api',  // Remplacez par votre URL de production\n  authToken: 'demo-client-key-123'      // Remplacez par votre token de production\n}"
            },
            {
                "name": "environment",
                "ctype": "miscellaneous",
                "subtype": "variable",
                "file": "src/environments/environment.ts",
                "deprecated": false,
                "deprecationMessage": "",
                "type": "object",
                "defaultValue": "{\n  production: false,\n  apiUrl: 'http://localhost:3000',\n  authToken: 'demo-client-key-123'\n}"
            },
            {
                "name": "routes",
                "ctype": "miscellaneous",
                "subtype": "variable",
                "file": "src/app/app.routes.ts",
                "deprecated": false,
                "deprecationMessage": "",
                "type": "Routes",
                "defaultValue": "[\n  {\n    path: '',\n    redirectTo: 'login',\n    pathMatch: 'full'\n  },\n  {\n  path: 'home',\n  loadComponent: () => \"import('./tab-home/home.page').then(m => m.HomePage)\"\n},\n  {\n    path: 'login',\n    loadComponent: () => \"import('./login/login.page').then(m => m.LoginPage)\"\n  },\n  {\n    path: 'tabs',\n    loadChildren: () => \"import('./tabs/tabs.routes').then((m) => m.routes)\",\n  },\n  {\n    path: 'subscription',\n    loadComponent: () => \"import('./subscription/subscription.page').then(m => m.SubscriptionPage)\"\n  },\n  {\n    path: 'register',\n    loadComponent: () => \"import('./register/register.page').then( m => m.RegisterPage)\"\n  },\n  {\n    path: 'content-detail/:id',\n    loadComponent: () => \"import('./content-detail/content-detail.page').then( m => m.ContentDetailPage)\"\n  },\n  {\n    path: 'content-comments/:id',\n    loadComponent: () => \"import('./content-comments/content-comments.page').then( m => m.ContentCommentsPage)\"\n  },\n  {\n    path: 'settings',\n    loadComponent: () => \"import('./settings/settings.page').then( m => m.SettingsPage)\"\n  },\n  {\n    path: '**',\n    redirectTo: 'login'\n  },\n  \n  \n  \n \n  \n  \n]"
            },
            {
                "name": "routes",
                "ctype": "miscellaneous",
                "subtype": "variable",
                "file": "src/app/tabs/tabs.routes.ts",
                "deprecated": false,
                "deprecationMessage": "",
                "type": "Routes",
                "defaultValue": "[\n  {\n    path: 'tabs',\n    component: TabsPage,\n    children: [\n      {\n        path: 'home',\n        loadComponent: () =>\n          \"import('../tab-home/home.page').then((m) => m.HomePage)\",\n      },\n      {\n        path: 'ranking',\n        loadComponent: () =>\n          \"import('../tab-ranking/ranking.page').then((m) => m.RankingPage)\",\n      },\n      {\n        path: 'upload',\n        loadComponent: () =>\n          \"import('../tab-upload/upload.page').then((m) => m.UploadPage)\",\n      },\n      {\n        path: 'profile/:id',\n        loadComponent: () =>\n          \"import('../tab-profile/profile.page').then((m) => m.ProfilePage)\",\n      },\n      {\n  path: 'profile',\n  loadComponent: () =>\n    \"import('../tab-profile/profile.page').then(m => m.ProfilePage)\",\n  data: { isCurrentUser: true }\n},\n      {\n        path: '',\n        redirectTo: '/tabs/home',\n        pathMatch: 'full',\n      },\n    ],\n  },\n  {\n    path: '',\n    redirectTo: '/tabs/home',\n    pathMatch: 'full',\n  },\n]"
            }
        ],
        "functions": [
            {
                "name": "getAuthHeaders",
                "file": "src/app/utils/media.utils.ts",
                "ctype": "miscellaneous",
                "subtype": "function",
                "deprecated": false,
                "deprecationMessage": "",
                "description": "",
                "args": [],
                "returnType": "literal type"
            },
            {
                "name": "getMediaUrl",
                "file": "src/app/utils/media.utils.ts",
                "ctype": "miscellaneous",
                "subtype": "function",
                "deprecated": false,
                "deprecationMessage": "",
                "description": "",
                "args": [
                    {
                        "name": "relativePath",
                        "type": "string",
                        "deprecated": false,
                        "deprecationMessage": ""
                    }
                ],
                "returnType": "string",
                "jsdoctags": [
                    {
                        "name": "relativePath",
                        "type": "string",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            }
        ],
        "typealiases": [
            {
                "name": "AuthUser",
                "ctype": "miscellaneous",
                "subtype": "typealias",
                "rawtype": "Pick<User | \"id\" | \"email\" | \"user_type\" | \"status\" | \"readonly\">",
                "file": "src/services/AUTH/auth.ts",
                "deprecated": false,
                "deprecationMessage": "",
                "description": "",
                "kind": 184
            }
        ],
        "enumerations": [
            {
                "name": "ContentSource",
                "childs": [
                    {
                        "name": "CAMERA",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "value": "camera"
                    },
                    {
                        "name": "GALLERY",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "value": "gallery"
                    }
                ],
                "ctype": "miscellaneous",
                "subtype": "enum",
                "deprecated": false,
                "deprecationMessage": "",
                "description": "",
                "file": "src/models/Content.ts"
            },
            {
                "name": "ContentStatus",
                "childs": [
                    {
                        "name": "DRAFT",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "value": "draft"
                    },
                    {
                        "name": "PUBLISHED",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "value": "published"
                    },
                    {
                        "name": "ARCHIVED",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "value": "archived"
                    },
                    {
                        "name": "DELETED",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "value": "deleted"
                    }
                ],
                "ctype": "miscellaneous",
                "subtype": "enum",
                "deprecated": false,
                "deprecationMessage": "",
                "description": "",
                "file": "src/models/Content.ts"
            },
            {
                "name": "ContentType",
                "childs": [
                    {
                        "name": "IMAGE",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "value": "image"
                    },
                    {
                        "name": "VIDEO",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "value": "video"
                    }
                ],
                "ctype": "miscellaneous",
                "subtype": "enum",
                "deprecated": false,
                "deprecationMessage": "",
                "description": "",
                "file": "src/models/Content.ts"
            },
            {
                "name": "VoteRule",
                "childs": [
                    {
                        "name": "ONE_VOTE_PER_USER",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "value": "one_vote_per_user"
                    },
                    {
                        "name": "UNLIMITED_VOTES",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "value": "unlimited_votes"
                    }
                ],
                "ctype": "miscellaneous",
                "subtype": "enum",
                "deprecated": false,
                "deprecationMessage": "",
                "description": "",
                "file": "src/models/Challenge.ts"
            }
        ],
        "groupedVariables": {
            "src/environments/environment.prod.ts": [
                {
                    "name": "environment",
                    "ctype": "miscellaneous",
                    "subtype": "variable",
                    "file": "src/environments/environment.prod.ts",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "object",
                    "defaultValue": "{\n  production: true,\n  apiUrl: 'https://apis.majorware.net/best-api',  // Remplacez par votre URL de production\n  authToken: 'demo-client-key-123'      // Remplacez par votre token de production\n}"
                }
            ],
            "src/environments/environment.ts": [
                {
                    "name": "environment",
                    "ctype": "miscellaneous",
                    "subtype": "variable",
                    "file": "src/environments/environment.ts",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "object",
                    "defaultValue": "{\n  production: false,\n  apiUrl: 'http://localhost:3000',\n  authToken: 'demo-client-key-123'\n}"
                }
            ],
            "src/app/app.routes.ts": [
                {
                    "name": "routes",
                    "ctype": "miscellaneous",
                    "subtype": "variable",
                    "file": "src/app/app.routes.ts",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "Routes",
                    "defaultValue": "[\n  {\n    path: '',\n    redirectTo: 'login',\n    pathMatch: 'full'\n  },\n  {\n  path: 'home',\n  loadComponent: () => \"import('./tab-home/home.page').then(m => m.HomePage)\"\n},\n  {\n    path: 'login',\n    loadComponent: () => \"import('./login/login.page').then(m => m.LoginPage)\"\n  },\n  {\n    path: 'tabs',\n    loadChildren: () => \"import('./tabs/tabs.routes').then((m) => m.routes)\",\n  },\n  {\n    path: 'subscription',\n    loadComponent: () => \"import('./subscription/subscription.page').then(m => m.SubscriptionPage)\"\n  },\n  {\n    path: 'register',\n    loadComponent: () => \"import('./register/register.page').then( m => m.RegisterPage)\"\n  },\n  {\n    path: 'content-detail/:id',\n    loadComponent: () => \"import('./content-detail/content-detail.page').then( m => m.ContentDetailPage)\"\n  },\n  {\n    path: 'content-comments/:id',\n    loadComponent: () => \"import('./content-comments/content-comments.page').then( m => m.ContentCommentsPage)\"\n  },\n  {\n    path: 'settings',\n    loadComponent: () => \"import('./settings/settings.page').then( m => m.SettingsPage)\"\n  },\n  {\n    path: '**',\n    redirectTo: 'login'\n  },\n  \n  \n  \n \n  \n  \n]"
                }
            ],
            "src/app/tabs/tabs.routes.ts": [
                {
                    "name": "routes",
                    "ctype": "miscellaneous",
                    "subtype": "variable",
                    "file": "src/app/tabs/tabs.routes.ts",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "Routes",
                    "defaultValue": "[\n  {\n    path: 'tabs',\n    component: TabsPage,\n    children: [\n      {\n        path: 'home',\n        loadComponent: () =>\n          \"import('../tab-home/home.page').then((m) => m.HomePage)\",\n      },\n      {\n        path: 'ranking',\n        loadComponent: () =>\n          \"import('../tab-ranking/ranking.page').then((m) => m.RankingPage)\",\n      },\n      {\n        path: 'upload',\n        loadComponent: () =>\n          \"import('../tab-upload/upload.page').then((m) => m.UploadPage)\",\n      },\n      {\n        path: 'profile/:id',\n        loadComponent: () =>\n          \"import('../tab-profile/profile.page').then((m) => m.ProfilePage)\",\n      },\n      {\n  path: 'profile',\n  loadComponent: () =>\n    \"import('../tab-profile/profile.page').then(m => m.ProfilePage)\",\n  data: { isCurrentUser: true }\n},\n      {\n        path: '',\n        redirectTo: '/tabs/home',\n        pathMatch: 'full',\n      },\n    ],\n  },\n  {\n    path: '',\n    redirectTo: '/tabs/home',\n    pathMatch: 'full',\n  },\n]"
                }
            ]
        },
        "groupedFunctions": {
            "src/app/utils/media.utils.ts": [
                {
                    "name": "getAuthHeaders",
                    "file": "src/app/utils/media.utils.ts",
                    "ctype": "miscellaneous",
                    "subtype": "function",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "description": "",
                    "args": [],
                    "returnType": "literal type"
                },
                {
                    "name": "getMediaUrl",
                    "file": "src/app/utils/media.utils.ts",
                    "ctype": "miscellaneous",
                    "subtype": "function",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "description": "",
                    "args": [
                        {
                            "name": "relativePath",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "returnType": "string",
                    "jsdoctags": [
                        {
                            "name": "relativePath",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                }
            ]
        },
        "groupedEnumerations": {
            "src/models/Content.ts": [
                {
                    "name": "ContentSource",
                    "childs": [
                        {
                            "name": "CAMERA",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "value": "camera"
                        },
                        {
                            "name": "GALLERY",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "value": "gallery"
                        }
                    ],
                    "ctype": "miscellaneous",
                    "subtype": "enum",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "description": "",
                    "file": "src/models/Content.ts"
                },
                {
                    "name": "ContentStatus",
                    "childs": [
                        {
                            "name": "DRAFT",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "value": "draft"
                        },
                        {
                            "name": "PUBLISHED",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "value": "published"
                        },
                        {
                            "name": "ARCHIVED",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "value": "archived"
                        },
                        {
                            "name": "DELETED",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "value": "deleted"
                        }
                    ],
                    "ctype": "miscellaneous",
                    "subtype": "enum",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "description": "",
                    "file": "src/models/Content.ts"
                },
                {
                    "name": "ContentType",
                    "childs": [
                        {
                            "name": "IMAGE",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "value": "image"
                        },
                        {
                            "name": "VIDEO",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "value": "video"
                        }
                    ],
                    "ctype": "miscellaneous",
                    "subtype": "enum",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "description": "",
                    "file": "src/models/Content.ts"
                }
            ],
            "src/models/Challenge.ts": [
                {
                    "name": "VoteRule",
                    "childs": [
                        {
                            "name": "ONE_VOTE_PER_USER",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "value": "one_vote_per_user"
                        },
                        {
                            "name": "UNLIMITED_VOTES",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "value": "unlimited_votes"
                        }
                    ],
                    "ctype": "miscellaneous",
                    "subtype": "enum",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "description": "",
                    "file": "src/models/Challenge.ts"
                }
            ]
        },
        "groupedTypeAliases": {
            "src/services/AUTH/auth.ts": [
                {
                    "name": "AuthUser",
                    "ctype": "miscellaneous",
                    "subtype": "typealias",
                    "rawtype": "Pick<User | \"id\" | \"email\" | \"user_type\" | \"status\" | \"readonly\">",
                    "file": "src/services/AUTH/auth.ts",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "description": "",
                    "kind": 184
                }
            ]
        }
    },
    "routes": {
        "name": "<root>",
        "kind": "module",
        "children": [
            {
                "name": "home",
                "kind": "route-path",
                "filename": "src/app/app.routes.ts"
            },
            {
                "name": "login",
                "kind": "route-path",
                "filename": "src/app/app.routes.ts"
            },
            {
                "name": "tabs",
                "kind": "route-path",
                "filename": "src/app/app.routes.ts"
            },
            {
                "name": "subscription",
                "kind": "route-path",
                "filename": "src/app/app.routes.ts"
            },
            {
                "name": "register",
                "kind": "route-path",
                "filename": "src/app/app.routes.ts"
            },
            {
                "name": "content-detail/:id",
                "kind": "route-path",
                "filename": "src/app/app.routes.ts"
            },
            {
                "name": "content-comments/:id",
                "kind": "route-path",
                "filename": "src/app/app.routes.ts"
            },
            {
                "name": "settings",
                "kind": "route-path",
                "filename": "src/app/app.routes.ts"
            },
            {
                "name": "**",
                "kind": "route-path",
                "filename": "src/app/app.routes.ts"
            },
            {
                "name": "login",
                "kind": "route-redirect",
                "filename": "src/app/app.routes.ts"
            },
            {
                "name": "login",
                "kind": "route-redirect",
                "filename": "src/app/app.routes.ts"
            },
            {
                "name": "tabs",
                "kind": "route-path",
                "filename": "src/app/tabs/tabs.routes.ts"
            },
            {
                "name": "home",
                "kind": "route-path",
                "filename": "src/app/tabs/tabs.routes.ts"
            },
            {
                "name": "ranking",
                "kind": "route-path",
                "filename": "src/app/tabs/tabs.routes.ts"
            },
            {
                "name": "upload",
                "kind": "route-path",
                "filename": "src/app/tabs/tabs.routes.ts"
            },
            {
                "name": "profile/:id",
                "kind": "route-path",
                "filename": "src/app/tabs/tabs.routes.ts"
            },
            {
                "name": "profile",
                "kind": "route-path",
                "filename": "src/app/tabs/tabs.routes.ts"
            },
            {
                "name": "/tabs/home",
                "kind": "route-redirect",
                "filename": "src/app/tabs/tabs.routes.ts"
            },
            {
                "name": "/tabs/home",
                "kind": "route-redirect",
                "filename": "src/app/tabs/tabs.routes.ts"
            }
        ]
    },
    "coverage": {
        "count": 6,
        "status": "low",
        "files": [
            {
                "filePath": "src/app/app.component.ts",
                "type": "component",
                "linktype": "component",
                "name": "AppComponent",
                "coveragePercent": 0,
                "coverageCount": "0/2",
                "status": "low"
            },
            {
                "filePath": "src/app/app.routes.ts",
                "type": "variable",
                "linktype": "miscellaneous",
                "linksubtype": "variable",
                "name": "routes",
                "coveragePercent": 0,
                "coverageCount": "0/1",
                "status": "low"
            },
            {
                "filePath": "src/app/components/challenge-form/challenge-form.component.ts",
                "type": "component",
                "linktype": "component",
                "name": "ChallengeFormComponent",
                "coveragePercent": 46,
                "coverageCount": "14/30",
                "status": "medium"
            },
            {
                "filePath": "src/app/components/discovery-view/discovery-view.component.ts",
                "type": "component",
                "linktype": "component",
                "name": "DiscoveryViewComponent",
                "coveragePercent": 8,
                "coverageCount": "3/36",
                "status": "low"
            },
            {
                "filePath": "src/app/components/secure-image/secure-image.component.ts",
                "type": "component",
                "linktype": "component",
                "name": "SecureImageComponent",
                "coveragePercent": 0,
                "coverageCount": "0/16",
                "status": "low"
            },
            {
                "filePath": "src/app/content-comments/content-comments.page.ts",
                "type": "component",
                "linktype": "component",
                "name": "ContentCommentsPage",
                "coveragePercent": 0,
                "coverageCount": "0/14",
                "status": "low"
            },
            {
                "filePath": "src/app/content-detail/content-detail.page.ts",
                "type": "component",
                "linktype": "component",
                "name": "ContentDetailPage",
                "coveragePercent": 0,
                "coverageCount": "0/24",
                "status": "low"
            },
            {
                "filePath": "src/app/content-detail/content-detail.page.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "Comment",
                "coveragePercent": 0,
                "coverageCount": "0/7",
                "status": "low"
            },
            {
                "filePath": "src/app/login/login.page.ts",
                "type": "component",
                "linktype": "component",
                "name": "LoginPage",
                "coveragePercent": 0,
                "coverageCount": "0/14",
                "status": "low"
            },
            {
                "filePath": "src/app/register/register.page.ts",
                "type": "component",
                "linktype": "component",
                "name": "RegisterPage",
                "coveragePercent": 0,
                "coverageCount": "0/40",
                "status": "low"
            },
            {
                "filePath": "src/app/settings/settings.page.ts",
                "type": "component",
                "linktype": "component",
                "name": "SettingsPage",
                "coveragePercent": 0,
                "coverageCount": "0/4",
                "status": "low"
            },
            {
                "filePath": "src/app/subscription/subscription.page.ts",
                "type": "component",
                "linktype": "component",
                "name": "SubscriptionPage",
                "coveragePercent": 0,
                "coverageCount": "0/15",
                "status": "low"
            },
            {
                "filePath": "src/app/tab-home/home.page.ts",
                "type": "component",
                "linktype": "component",
                "name": "HomePage",
                "coveragePercent": 4,
                "coverageCount": "2/47",
                "status": "low"
            },
            {
                "filePath": "src/app/tab-profile/profile.page.ts",
                "type": "component",
                "linktype": "component",
                "name": "ProfilePage",
                "coveragePercent": 0,
                "coverageCount": "0/44",
                "status": "low"
            },
            {
                "filePath": "src/app/tab-profile/profile.page.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "Post",
                "coveragePercent": 0,
                "coverageCount": "0/6",
                "status": "low"
            },
            {
                "filePath": "src/app/tab-ranking/ranking.page.ts",
                "type": "component",
                "linktype": "component",
                "name": "RankingPage",
                "coveragePercent": 0,
                "coverageCount": "0/9",
                "status": "low"
            },
            {
                "filePath": "src/app/tab-ranking/ranking.page.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "Artist",
                "coveragePercent": 0,
                "coverageCount": "0/8",
                "status": "low"
            },
            {
                "filePath": "src/app/tab-upload/upload.page.ts",
                "type": "component",
                "linktype": "component",
                "name": "UploadPage",
                "coveragePercent": 0,
                "coverageCount": "0/27",
                "status": "low"
            },
            {
                "filePath": "src/app/tab3/tab3.page.ts",
                "type": "component",
                "linktype": "component",
                "name": "Tab3Page",
                "coveragePercent": 0,
                "coverageCount": "0/2",
                "status": "low"
            },
            {
                "filePath": "src/app/tabs/tabs.page.ts",
                "type": "component",
                "linktype": "component",
                "name": "TabsPage",
                "coveragePercent": 0,
                "coverageCount": "0/12",
                "status": "low"
            },
            {
                "filePath": "src/app/tabs/tabs.routes.ts",
                "type": "variable",
                "linktype": "miscellaneous",
                "linksubtype": "variable",
                "name": "routes",
                "coveragePercent": 0,
                "coverageCount": "0/1",
                "status": "low"
            },
            {
                "filePath": "src/app/utils/media.utils.ts",
                "type": "function",
                "linktype": "miscellaneous",
                "linksubtype": "function",
                "name": "getAuthHeaders",
                "coveragePercent": 0,
                "coverageCount": "0/1",
                "status": "low"
            },
            {
                "filePath": "src/app/utils/media.utils.ts",
                "type": "function",
                "linktype": "miscellaneous",
                "linksubtype": "function",
                "name": "getMediaUrl",
                "coveragePercent": 0,
                "coverageCount": "0/1",
                "status": "low"
            },
            {
                "filePath": "src/app/utils/pipes/filter-pipe.ts",
                "type": "pipe",
                "linktype": "pipe",
                "name": "FilterPipe",
                "coveragePercent": 0,
                "coverageCount": "0/1",
                "status": "low"
            },
            {
                "filePath": "src/environments/environment.prod.ts",
                "type": "variable",
                "linktype": "miscellaneous",
                "linksubtype": "variable",
                "name": "environment",
                "coveragePercent": 0,
                "coverageCount": "0/1",
                "status": "low"
            },
            {
                "filePath": "src/environments/environment.ts",
                "type": "variable",
                "linktype": "miscellaneous",
                "linksubtype": "variable",
                "name": "environment",
                "coveragePercent": 0,
                "coverageCount": "0/1",
                "status": "low"
            },
            {
                "filePath": "src/models/Challenge.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "Challenge",
                "coveragePercent": 0,
                "coverageCount": "0/17",
                "status": "low"
            },
            {
                "filePath": "src/models/Comment.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "Comment",
                "coveragePercent": 0,
                "coverageCount": "0/14",
                "status": "low"
            },
            {
                "filePath": "src/models/Content.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "Content",
                "coveragePercent": 0,
                "coverageCount": "0/30",
                "status": "low"
            },
            {
                "filePath": "src/models/Content.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "PostWithUser",
                "coveragePercent": 0,
                "coverageCount": "0/4",
                "status": "low"
            },
            {
                "filePath": "src/models/Plan.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "Plan",
                "coveragePercent": 0,
                "coverageCount": "0/16",
                "status": "low"
            },
            {
                "filePath": "src/models/User.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "User",
                "coveragePercent": 0,
                "coverageCount": "0/18",
                "status": "low"
            },
            {
                "filePath": "src/models/User.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "UserProfile",
                "coveragePercent": 0,
                "coverageCount": "0/15",
                "status": "low"
            },
            {
                "filePath": "src/models/Vote.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "Vote",
                "coveragePercent": 0,
                "coverageCount": "0/6",
                "status": "low"
            },
            {
                "filePath": "src/services/API/LOCAL/api-json.ts",
                "type": "injectable",
                "linktype": "injectable",
                "name": "ApiJSON",
                "coveragePercent": 15,
                "coverageCount": "2/13",
                "status": "low"
            },
            {
                "filePath": "src/services/AUTH/auth.ts",
                "type": "injectable",
                "linktype": "injectable",
                "name": "Auth",
                "coveragePercent": 7,
                "coverageCount": "1/14",
                "status": "low"
            },
            {
                "filePath": "src/services/AUTH/auth.ts",
                "type": "type alias",
                "linktype": "miscellaneous",
                "linksubtype": "typealias",
                "name": "AuthUser",
                "coveragePercent": 0,
                "coverageCount": "0/1",
                "status": "low"
            },
            {
                "filePath": "src/services/CAMERA_SERVICE/camera-service.ts",
                "type": "injectable",
                "linktype": "injectable",
                "name": "CameraService",
                "coveragePercent": 0,
                "coverageCount": "0/6",
                "status": "low"
            },
            {
                "filePath": "src/services/COMMENTS_SERVICE/comment-service.ts",
                "type": "injectable",
                "linktype": "injectable",
                "name": "CommentService",
                "coveragePercent": 45,
                "coverageCount": "5/11",
                "status": "medium"
            },
            {
                "filePath": "src/services/CREATION/creation-service.ts",
                "type": "injectable",
                "linktype": "injectable",
                "name": "CreationService",
                "coveragePercent": 45,
                "coverageCount": "10/22",
                "status": "medium"
            },
            {
                "filePath": "src/services/MEDIA/media.ts",
                "type": "injectable",
                "linktype": "injectable",
                "name": "MediaService",
                "coveragePercent": 0,
                "coverageCount": "0/4",
                "status": "low"
            },
            {
                "filePath": "src/services/PROFILE_SERVICE/profile-service.ts",
                "type": "injectable",
                "linktype": "injectable",
                "name": "ProfileService",
                "coveragePercent": 21,
                "coverageCount": "3/14",
                "status": "low"
            },
            {
                "filePath": "src/services/SUBSCRIPTION/subscription-service.ts",
                "type": "injectable",
                "linktype": "injectable",
                "name": "SubscriptionService",
                "coveragePercent": 0,
                "coverageCount": "0/6",
                "status": "low"
            },
            {
                "filePath": "src/services/USER_SERVICE/user-service.ts",
                "type": "injectable",
                "linktype": "injectable",
                "name": "UserService",
                "coveragePercent": 0,
                "coverageCount": "0/11",
                "status": "low"
            },
            {
                "filePath": "src/services/VOTE_SERVICE/vote-service.ts",
                "type": "injectable",
                "linktype": "injectable",
                "name": "VoteService",
                "coveragePercent": 61,
                "coverageCount": "8/13",
                "status": "good"
            },
            {
                "filePath": "src/stories/button.component.ts",
                "type": "component",
                "linktype": "component",
                "name": "ButtonComponent",
                "coveragePercent": 83,
                "coverageCount": "5/6",
                "status": "very-good"
            },
            {
                "filePath": "src/stories/header.component.ts",
                "type": "component",
                "linktype": "component",
                "name": "HeaderComponent",
                "coveragePercent": 0,
                "coverageCount": "0/5",
                "status": "low"
            },
            {
                "filePath": "src/stories/page.component.ts",
                "type": "component",
                "linktype": "component",
                "name": "PageComponent",
                "coveragePercent": 0,
                "coverageCount": "0/5",
                "status": "low"
            },
            {
                "filePath": "src/stories/user.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "User",
                "coveragePercent": 0,
                "coverageCount": "0/2",
                "status": "low"
            }
        ]
    }
}