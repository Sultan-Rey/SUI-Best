<!-- No Active Challenges -->
<div *ngIf="challengeRankings.length === 0" class="no-challenges">
  <ion-icon name="trophy-outline"></ion-icon>
  <h3>Aucun défi actif pour le moment</h3>
  <p>Revenez plus tard pour découvrir les prochains défis !</p>
</div>



<!-- Top 6 Section -->
<div *ngIf="topArtists.length > 0" class="section">
  <div class="section-header">
    <h2 class="section-title">Top 6</h2>
    <a (click)="viewChallengeRanking('top6')" class="see-more">Voir tout</a>
  </div>
  
  <div class="top-artists-scroll">
    <div class="artist-card" *ngFor="let artist of topArtists">
      <div class="rank-badge" [class.top-3]="artist.rank && artist.rank <= 3">
        <ion-icon *ngIf="artist.rank === 1" name="trophy"></ion-icon>
        <span *ngIf="artist.rank !== 1">{{ artist.rank }}</span>
      </div>
      <div class="artist-image" [style.background-image]="'url(' + (artist.imageUrl | mediaUrl) + ')'" (error)="onImageError($event)">
        <div class="image-overlay"></div>
      </div>
      <div class="artist-info">
        <h3 class="artist-name">{{ artist.name }}</h3>
        <p class="artist-category">{{ artist.category }}</p>
        <p class="artist-votes">{{ formatVotes(artist.votes) }} votes</p>
      </div>
    </div>
  </div>
</div>

<!-- Active Challenges Slider -->
<div *ngIf="challengeRankings.length > 0" class="active-challenges">
  <h2 class="section-title">Défis en cours</h2>
  
  <div class="slider-container">
    <div class="slider-wrapper">
      <div class="slider-track" [style.transform]="'translateX(-' + (currentSlide * 100) + '%)'">
        <div class="slide" *ngFor="let challenge of challengeRankings; let i = index" 
             [class.active]="i === currentSlide"
             [style.background-image]="'url(' + ((challenge.coverImage | mediaUrl) || 'assets/splash.png') + ')'">
          <div class="slide-overlay"></div>
          <div class="slide-content">
            <h3 class="challenge-title">{{ challenge.challengeName }}</h3>
            <p class="challenge-description">{{ challenge.description || 'Participez à ce défi passionnant !' }}</p>
            <ion-button (click)="viewChallengeRanking(challenge.challengeId)" fill="clear" class="challenge-button">
              Voir le classement
              <ion-icon slot="end" name="arrow-forward"></ion-icon>
            </ion-button>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Pager -->
    <div class="slider-pager">
      <span *ngFor="let _ of challengeRankings; let i = index" 
            [class.active]="i === currentSlide"
            (click)="goToSlide(i)"></span>
    </div>
  </div>
</div>

<!-- Challenges List -->
<div *ngFor="let ranking of challengeRankings" class="section">
  <div class="section-header">
    <h2 class="section-title">{{ ranking.challengeName }}</h2>
    <a (click)="viewChallengeRanking(ranking.challengeId)" class="see-more">Voir tout</a>
  </div>
  
  <div class="top-artists-scroll">
    <div class="artist-card" *ngFor="let artist of ranking.artists | slice:0:6; let i = index">
      <div class="rank-badge" [class.top-3]="i < 3">
        <ion-icon *ngIf="i === 0" name="trophy"></ion-icon>
        <span *ngIf="i !== 0">{{ i + 1 }}</span>
      </div>
      <div class="artist-image" [style.background-image]="'url(' + (artist.imageUrl | mediaUrl) + ')'" (error)="onImageError($event)">
        <div class="image-overlay"></div>
      </div>
      <div class="artist-info">
        <h3 class="artist-name">{{ artist.name }}</h3>
        <p class="artist-category">{{ artist.category }}</p>
        <p class="artist-votes">{{ formatVotes(artist.votes) }} votes</p>
      </div>
    </div>
  </div>
</div>
